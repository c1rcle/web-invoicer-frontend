{"version":3,"sources":["i18n.js","components/layout/AppDrawer/styles.js","components/layout/AppDrawer/PermanentDrawer.js","components/layout/AppDrawer/TemporaryDrawer.js","hooks/useDropdownMenu.js","components/layout/AppDrawer/common/LanguageSelector.js","slices/appSlice.js","components/layout/AppDrawer/common/ThemeSwitcher.js","hooks/useHomeDialog.js","components/layout/AppDrawer/HomeDrawerContent/Buttons.js","components/layout/AppDrawer/HomeDrawerContent/index.js","components/layout/AppDrawer/UserDrawerContent.js","hooks/useDrawer.js","components/layout/AppDrawer/index.js","components/layout/Navigation/styles.js","components/layout/Navigation/HomeNavigation.js","components/common/Dialog/styles.js","components/common/Dialog/DialogHeader.js","components/common/Dialog/index.js","apis/webInvoicerApi.js","apis/apiHandler.js","slices/userSlice.js","components/layout/Navigation/UserNavigation/UserDialog/styles.js","components/layout/Navigation/UserNavigation/UserDialog/DialogAlert.js","hooks/useValidation.js","components/common/ValidatorForm.js","components/common/SubmitButton/styles.js","components/common/SubmitButton/SubmitButton.js","components/common/Dialog/FormContent.js","components/common/Dialog/DialogTextField.js","components/common/Dialog/Password.js","components/common/Dialog/SuccessAlert.js","hooks/useResultSuccess.js","components/layout/Navigation/UserNavigation/UserDialog/ChangePasswordContent.js","hooks/useDidUpdateEffect.js","components/layout/Navigation/UserNavigation/UserDialog/CompanyDataContent.js","components/layout/Navigation/UserNavigation/UserDialog/index.js","hooks/useLogout.js","hooks/useDialog.js","hooks/useInterval.js","hooks/useTokenRefresh.js","components/layout/Navigation/UserNavigation/index.js","hooks/useTokenCheck.js","components/layout/Navigation/index.js","components/SuspenseLoading.js","components/common/PrivateRoute.js","components/pages/Home/styles.js","components/pages/Home/FeatureGrid.js","components/pages/Home/Footer.js","components/pages/Home/Hero.js","components/pages/Home/HomeDialog/styles.js","components/pages/Home/HomeDialog/DialogAlert.js","components/pages/Home/HomeDialog/DialogContent/common/Email.js","components/pages/Home/HomeDialog/DialogContent/styles.js","components/pages/Home/HomeDialog/DialogContent/Login.js","components/pages/Home/HomeDialog/DialogContent/Register.js","components/pages/Home/HomeDialog/DialogContent/ResetPassword.js","components/pages/Home/HomeDialog/DialogContent/ChangePassword.js","components/pages/Home/HomeDialog/DialogContent/ConfirmEmail.js","components/pages/Home/HomeDialog/index.js","components/pages/Home/index.js","components/common/ErrorDialog.js","components/pages/Invoices/Editor/LoadingBackdrop.js","components/pages/Invoices/Editor/Header.js","components/pages/Invoices/Editor/Content/Common/Input/EditorTextField.js","components/pages/Invoices/Editor/Content/Common/Input/Autocomplete.js","components/pages/Invoices/Editor/Content/Common/Input/DatePicker.js","components/pages/Invoices/Editor/Content/Common/Input/ClearButton.js","components/pages/Invoices/Editor/Content/Common/Details/fields.js","utils/editorUtils.js","pdfMake.js","pdf/headerElement.js","pdf/counterpartiesElement.js","pdf/itemsElement.js","pdf/summaryElement.js","pdf/footerElement.js","pdf/documentDefinition.js","utils/dataUtils.js","utils/invoiceUtils.js","slices/invoiceSlice.js","components/pages/Invoices/Editor/Content/Common/Details/actions.js","components/pages/Invoices/Editor/Content/Common/Details/index.js","components/pages/Invoices/Editor/Content/Common/Input/Button.js","utils/priceUtils.js","components/pages/Invoices/Editor/Content/Common/Items/styles.js","components/pages/Invoices/Editor/Content/Common/Items/Summary.js","hooks/useHandleAction.js","components/pages/Invoices/Editor/Content/Common/Items/actions.js","components/pages/Invoices/Editor/Content/Common/Input/Picker.js","components/pages/Invoices/Editor/Content/Common/Items/VatRatePicker.js","components/pages/Invoices/Editor/Content/Common/Items/fields.js","components/pages/Invoices/Editor/Content/Common/Items/useItems.js","components/pages/Invoices/Editor/Content/Common/Items/index.js","components/pages/Invoices/Editor/Content/Receipt.js","components/pages/Invoices/Editor/Content/Common/Counterparty/actions.js","components/pages/Invoices/Editor/Content/Common/Counterparty/fields.js","components/pages/Invoices/Editor/Content/Common/Counterparty/index.js","components/pages/Invoices/Editor/Content/Common/Payment/actions.js","components/pages/Invoices/Editor/Content/Common/Payment/index.js","components/pages/Invoices/Editor/Content/Invoice.js","components/pages/Invoices/Editor/Content/styles.js","components/pages/Invoices/Editor/Content/index.js","components/pages/Invoices/Editor/styles.js","components/pages/Invoices/Editor/Footer.js","components/pages/Invoices/Editor/useEditor.js","components/pages/Invoices/Editor/index.js","components/common/DataTable/config.js","components/common/DataTable/styles.js","components/common/DataTable/index.js","components/pages/Invoices/InvoiceTable/ActionMenu.js","components/pages/Invoices/InvoiceTable/CreateMenu.js","components/pages/Invoices/InvoiceTable/DeleteDialog.js","components/pages/Invoices/InvoiceTable/config.js","components/pages/Invoices/InvoiceTable/index.js","components/pages/NotFound.js","components/pages/Invoices/index.js","slices/productSlice.js","components/pages/Products/config.js","components/pages/Products/index.js","slices/counterpartySlice.js","components/pages/Counterparties/styles.js","components/pages/Counterparties/config.js","components/pages/Counterparties/index.js","slices/employeeSlice.js","components/pages/Employees/config.js","components/pages/Employees/index.js","components/pages/DataVisualization/index.js","components/Routes.js","App.js","store.js","index.js"],"names":["i18n","use","Backend","LanguageDetector","initReactI18next","init","fallbackLng","interpolation","escapeValue","backend","loadPath","useStyles","makeStyles","theme","drawer","width","drawerPaper","drawerHeader","padding","spacing","display","alignItems","justifyContent","mixins","toolbar","drawerHighlight","background","palette","primary","main","drawerHighlightText","color","getContrastText","PermanentDrawer","children","classes","variant","anchor","className","paper","Toolbar","TemporaryDrawer","open","onClose","IconButton","onClick","ChevronLeft","Divider","useDropdownMenu","useState","menuData","setMenuData","setAnchor","openMenu","event","data","currentTarget","closeMenu","LanguageSelector","useTranslation","t","languages","returnObjects","ListItem","button","ListItemIcon","Language","ListItemText","anchorEl","Boolean","map","language","index","MenuItem","key","selected","startsWith","code","languageCode","changeLanguage","label","initialState","localStorage","getItem","isDialogOpen","isDrawerOpen","appSlice","createSlice","name","reducers","setTheme","state","action","payload","setDialogOpen","setDrawerOpen","actions","ThemeSwitcher","dispatch","useDispatch","useSelector","app","newTheme","setItem","Brightness2","Brightness7","useHomeDialog","history","useHistory","openDialogForType","type","replace","openDialog","closeDialog","onExited","Buttons","Hidden","smUp","List","HomeDrawerContent","UserDrawerContent","closeDrawer","isDrawerPermanent","location","useLocation","drawerItems","isSelected","item","pathname","onItemClick","component","Link","to","Icon","icon","text","useDrawer","isLoggedIn","user","isLgUp","useMediaQuery","useTheme","breakpoints","up","openDrawer","AppDrawer","Drawer","DrawerContent","appBar","zIndex","appBarSpacer","marginRight","appBarLogo","appBarTitle","userSelect","flexGrow","HomeNavigation","xsDown","dialogTitle","centered","margin","textAlign","dialogCloseButton","position","top","right","secondary","successAlert","dialogActions","DialogHeader","title","closeButton","disableTypography","Typography","Close","Dialog","centeredTitle","content","props","DialogContent","DialogActions","Axios","create","baseURL","process","timeout","headers","Authorization","restCall","errorPayload","a","response","success","status","login","createAsyncThunk","handleAction","endpoint","errorData","token","JSON","stringify","userData","refreshToken","_","register","confirmEmail","confirmationData","resetPassword","email","changeResetPassword","changePassword","setCompanyData","setActionPending","apiHandler","webInvoicerApi","post","setError","Error","userSlice","actionPending","error","setUserData","extraReducers","fulfilled","dialogAlert","DialogAlert","displayedError","setDisplayedError","useEffect","setTimeout","Collapse","in","Alert","severity","useValidation","required","value","coercedValue","validator","isEmpty","ignore_whitespace","validate","validationType","isRequired","length","weights","isNumeric","sum","Array","from","forEach","char","Number","validNip","isInt","gt","allow_leading_zeroes","positiveInt","isCurrency","allow_negatives","digits_after_decimal","symbol","currency","isMobilePhone","phoneNumber","isPostalCode","postalCode","result","ValidatorForm","validatorRef","booleanResult","validationRules","rule","Form","addValidationRule","removeValidationRule","ref","wrapper","progress","left","marginTop","marginLeft","SubmitButton","loading","size","disabled","CircularProgress","FormContent","onSubmit","submitText","noValidate","DialogTextField","fullWidth","Password","passwordChange","validators","errorMessages","SuccessAlert","useResultSuccess","setSuccess","performAction","args","successCallback","handleError","then","unwrapResult","catch","e","ChangePasswordContent","password","newPassword","formData","setFormData","onTextChanged","target","preventDefault","autoFocus","onChange","useDidUpdateEffect","effect","deps","isFirstRun","useRef","current","CompanyDataContent","initialFormData","companyName","nip","address","city","equal","resetValidations","UserDialog","maxWidth","useLogout","removeItem","useDialog","setIsDialogOpen","dialogData","setDialogData","useInterval","callback","delay","savedCallback","id","setInterval","clearInterval","useTokenRefresh","tokenExpiryTime","JwtDecode","exp","calculateExpiryDelay","Date","getTime","expiryDelay","UserNavigation","logout","handleClick","edge","AccountCircle","fontSize","useTokenCheck","decodedToken","parse","Navigation","AppBar","Menu","SuspenseLoading","Backdrop","PrivateRoute","heroContainer","only","flexDirection","heroItem","marginBottom","heroIcon","featureCard","height","featureIcon","FeatureGrid","features","Grid","container","justify","feature","xs","sm","Card","CardContent","gutterBottom","header","description","Footer","Box","mb","mt","Hero","require","locationKey","Email","dialogText","dialogConfirmContainer","dialogProgress","Login","BrowserLink","Register","fullName","ResetPassword","setEmail","ChangePassword","setPassword","params","URLSearchParams","search","get","resetToken","ConfirmEmail","HomeDialog","substring","exact","path","Home","my","ErrorDialog","clearAction","DialogContentText","createErrors","includes","translationKey","getText","LoadingBackdrop","setOpen","clearTimeout","transitionDuration","Header","headerText","split","EditorTextField","Autocomplete","textProps","filterOptions","createFilterOptions","limit","freeSolo","renderInput","DatePicker","minDate","utils","DateFnsUtils","locale","locales","disablePast","inputVariant","format","date","toISOString","ClearButton","ml","Delete","useFields","update","select","editorData","employees","invoice","employeeData","employee","getAutocomplete","property","options","getOptionLabel","reason","inputValue","number","FullName","PhoneNumber","Clear","initialEditorData","counterparty","items","paymentType","paymentDeadline","getType","invoiceTypes","findIndex","x","getId","isEqual","month","getMonth","pdfMake","vfs","pdfFonts","getHeaderElement","paymentTypes","style","layout","table","body","getCounterpartiesElement","companyData","hLineWidth","vLineWidth","columns","headerRows","widths","getItems","vatRateStrings","unit","count","netPrice","grossPrice","vatRate","netValue","grossValue","vatValue","toFixed","getItemsElement","pdfItems","fillColor","rowIndex","getSummaryItems","vatRates","reduce","prev","sort","b","getPropertyTotal","curr","getSummaryElement","netTotal","grossTotal","vatTotal","summaryItems","bold","keepWithHeaderRows","getFooterElement","currentPage","pageCount","alignment","border","getDocumentDefinition","counterpartiesElement","footer","pageMargins","defaultStyle","styles","counterpartiesHeader","summary","filterProperties","oldData","newData","filteredKeys","Object","keys","filter","useInvoicePayloadCreators","getPayload","method","counterparties","invoices","employeeId","counterpartyId","rest","find","getEmployeeId","getCounterpartyId","addNewItems","invoiceId","editorId","productData","productId","updateItems","oldItems","newItems","undefined","itemId","newItemIndex","newItem","extractItem","updateData","put","delete","extractInvoice","createPayload","invoiceData","updatePayload","oldInvoice","oldInvoiceData","exportPayload","mappedItems","push","createPdf","bind","download","counterpartyData","oldEditorData","createInvoice","handlePayloadCreator","getInvoices","updateInvoice","deleteInvoice","exportInvoice","getState","getProducts","getInvoiceItems","product","nanoid","payloadCreator","message","invoiceSlice","setEditorData","setOldEditorData","addItem","updateItem","deleteItem","splice","useActions","initialize","setDates","getNewDateProps","invoiceDate","padStart","year","getNumber","add","days","isEmployee","Details","fields","Button","calculateGrossPrice","roundValue","getVatRate","calculateNetPrice","isNaN","Math","round","bottomContainer","flexWrap","addButton","summaryContainer","Summary","Paper","useHandleAction","onSuccess","rejectOnError","editorItems","valueAsNumber","remove","selectedItem","Picker","TextField","VatRatePicker","rate","products","onPriceChange","fieldName","calculatedValue","calculatedFieldName","onVatRateChange","Name","renderOption","Description","Count","Unit","NetPrice","GrossPrice","VatRate","mr","useItems","getFields","itemRows","Items","xl","md","Receipt","lg","Nip","Address","PostalCode","City","Counterparty","Payment","Invoice","contentContainer","Content","getRender","render","backdrop","paddingLeft","editorContainer","footerDivider","footerContainer","useEditor","onErrorDialogClose","Editor","useConfig","editableConfig","getIcon","Component","iconProps","forwardRef","icons","Add","AddCircle","Check","Edit","ResetSearch","localization","emptyDataSourceMessage","addTooltip","deleteTooltip","editTooltip","filterRow","filterTooltip","editRow","deleteText","cancelTooltip","saveTooltip","pagination","labelDisplayedRows","labelRowsSelect","labelRowsPerPage","firstAriaLabel","firstTooltip","previousAriaLabel","previousTooltip","nextAriaLabel","nextTooltip","lastAriaLabel","lastTooltip","nRowsSelected","searchTooltip","searchPlaceholder","editable","createAction","updateAction","deleteAction","onRowAdd","newRow","onRowUpdate","oldRow","onRowDelete","deletedRow","searchFieldVariant","addRowPosition","tableLayout","draggable","tableContainer","DataTable","ActionMenu","openDeleteDialog","editLink","tableData","CreateMenu","option","DeleteDialog","dialog","createMenu","actionMenu","currencySettings","align","currencySetting","currencyCode","field","tooltip","isFreeAction","MoreHoriz","rowData","InvoiceTable","isLoading","NotFound","Invoices","createProduct","updateProduct","deleteProduct","productSlice","editComponent","currencyEditComponent","onRowDataChange","parsedValue","row","initialEditValue","lookup","0","1","2","3","4","5","Products","createCounterparty","getCounterpartyDetails","getCounterparties","updateCounterparty","deleteCounterparty","counterpartySlice","nipEditContainer","nipEditButton","downloadDetails","street","propertyNumber","apartmentNumber","CloudDownload","Counterparties","createEmployee","getEmployees","updateEmployee","deleteEmployee","employeeSlice","Employees","DataVisualization","Routes","App","muiTheme","createMuiTheme","lightTheme","darkTheme","ThemeProvider","CssBaseline","fallback","Container","combinedReducer","combineReducers","appReducer","userReducer","invoiceReducer","counterpartyReducer","employeeReducer","productReducer","configureStore","reducer","ReactDOM","StrictMode","store","document","getElementById"],"mappings":"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","file":"static/js/main.4d692bb9.chunk.js","sourcesContent":["import i18n from 'i18next';\r\nimport { initReactI18next } from 'react-i18next';\r\nimport Backend from 'i18next-http-backend';\r\nimport LanguageDetector from 'i18next-browser-languagedetector';\r\n\r\ni18n\r\n  .use(Backend)\r\n  .use(LanguageDetector)\r\n  .use(initReactI18next)\r\n  .init({\r\n    fallbackLng: 'en',\r\n    interpolation: {\r\n      escapeValue: false\r\n    },\r\n    backend: {\r\n      loadPath: '/web-invoicer-frontend/locales/{{lng}}/{{ns}}.json'\r\n    }\r\n  });\r\n\r\nexport default i18n;\r\n","import { makeStyles } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  drawer: {\r\n    width: 250\r\n  },\r\n  drawerPaper: {\r\n    width: 250\r\n  },\r\n  drawerHeader: {\r\n    width: 250,\r\n    padding: theme.spacing(0, 1),\r\n    display: 'flex',\r\n    alignItems: 'center',\r\n    justifyContent: 'flex-end',\r\n    ...theme.mixins.toolbar\r\n  },\r\n  drawerHighlight: {\r\n    background: theme.palette.primary.main,\r\n    '&:hover': {\r\n      background: theme.palette.primary.main\r\n    }\r\n  },\r\n  drawerHighlightText: {\r\n    color: theme.palette.getContrastText(theme.palette.primary.main)\r\n  }\r\n}));\r\n\r\nexport default useStyles;\r\n","import React from 'react';\r\nimport { Drawer, Toolbar } from '@material-ui/core';\r\nimport useStyles from './styles';\r\n\r\nconst PermanentDrawer = ({ children }) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Drawer\r\n      variant='permanent'\r\n      anchor='left'\r\n      className={classes.drawer}\r\n      classes={{ paper: classes.drawerPaper }}>\r\n      <Toolbar />\r\n      {children}\r\n    </Drawer>\r\n  );\r\n};\r\n\r\nexport default PermanentDrawer;\r\n","import React from 'react';\r\nimport { Divider, Drawer, IconButton } from '@material-ui/core';\r\nimport { ChevronLeft } from '@material-ui/icons';\r\nimport useStyles from './styles';\r\n\r\nconst TemporaryDrawer = ({ open, onClose, children }) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Drawer anchor='left' open={open} onClose={onClose}>\r\n      <div className={classes.drawerHeader}>\r\n        <IconButton onClick={onClose}>\r\n          <ChevronLeft />\r\n        </IconButton>\r\n      </div>\r\n      <Divider />\r\n      {children}\r\n    </Drawer>\r\n  );\r\n};\r\n\r\nexport default TemporaryDrawer;\r\n","import { useState } from 'react';\r\n\r\nconst useDropdownMenu = () => {\r\n  const [menuData, setMenuData] = useState(null);\r\n\r\n  const [anchor, setAnchor] = useState(null);\r\n\r\n  const openMenu = (event, data) => {\r\n    setAnchor(event.currentTarget);\r\n    data && setMenuData(data);\r\n  };\r\n\r\n  const closeMenu = () => setAnchor(null);\r\n\r\n  return { anchor, menuData, openMenu, closeMenu };\r\n};\r\n\r\nexport default useDropdownMenu;\r\n","import React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { ListItem, ListItemIcon, ListItemText, Menu, MenuItem } from '@material-ui/core';\r\nimport { Language } from '@material-ui/icons';\r\nimport useDropdownMenu from '../../../../hooks/useDropdownMenu';\r\n\r\nconst LanguageSelector = () => {\r\n  const { t, i18n } = useTranslation();\r\n\r\n  const languages = t('languages', { returnObjects: true });\r\n\r\n  const { anchor, openMenu, closeMenu } = useDropdownMenu();\r\n\r\n  const handleLanguageChange = languageCode => () => {\r\n    if (languageCode !== i18n.language) i18n.changeLanguage(languageCode);\r\n    closeMenu();\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <ListItem button onClick={openMenu}>\r\n        <ListItemIcon>\r\n          <Language />\r\n        </ListItemIcon>\r\n        <ListItemText primary={t('drawer.language')} />\r\n      </ListItem>\r\n      <Menu anchorEl={anchor} open={Boolean(anchor)} onClose={closeMenu}>\r\n        {languages.map((language, index) => (\r\n          <MenuItem\r\n            key={index}\r\n            selected={i18n.language.startsWith(language.code)}\r\n            onClick={handleLanguageChange(language.code)}>\r\n            {language.label}\r\n          </MenuItem>\r\n        ))}\r\n      </Menu>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default LanguageSelector;\r\n","import { createSlice } from '@reduxjs/toolkit';\r\n\r\nconst initialState = {\r\n  theme: localStorage.getItem('theme') || 'dark',\r\n  isDialogOpen: false,\r\n  isDrawerOpen: false\r\n};\r\n\r\nconst appSlice = createSlice({\r\n  name: 'app',\r\n  initialState,\r\n  reducers: {\r\n    setTheme(state, action) {\r\n      state.theme = action.payload;\r\n    },\r\n    setDialogOpen(state, action) {\r\n      state.isDialogOpen = action.payload;\r\n    },\r\n    setDrawerOpen(state, action) {\r\n      state.isDrawerOpen = action.payload;\r\n    }\r\n  }\r\n});\r\n\r\nexport const { setTheme, setDialogOpen, setDrawerOpen } = appSlice.actions;\r\n\r\nexport default appSlice.reducer;\r\n","import React from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { ListItem, ListItemIcon, ListItemText } from '@material-ui/core';\r\nimport { Brightness2, Brightness7 } from '@material-ui/icons';\r\nimport { setTheme } from '../../../../slices/appSlice';\r\n\r\nconst ThemeSwitcher = () => {\r\n  const { t } = useTranslation();\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const theme = useSelector(state => state.app.theme);\r\n\r\n  const changeTheme = () => {\r\n    const newTheme = theme === 'light' ? 'dark' : 'light';\r\n    localStorage.setItem('theme', newTheme);\r\n    dispatch(setTheme(newTheme));\r\n  };\r\n\r\n  return (\r\n    <ListItem button onClick={changeTheme}>\r\n      <ListItemIcon>{theme === 'dark' ? <Brightness2 /> : <Brightness7 />}</ListItemIcon>\r\n      <ListItemText primary={t('drawer.theme')} />\r\n    </ListItem>\r\n  );\r\n};\r\n\r\nexport default ThemeSwitcher;\r\n","import { useDispatch, useSelector } from 'react-redux';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { setDialogOpen } from '../slices/appSlice';\r\n\r\nconst useHomeDialog = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const isDialogOpen = useSelector(state => state.app.isDialogOpen);\r\n\r\n  const history = useHistory();\r\n\r\n  const openDialog = () => dispatch(setDialogOpen(true));\r\n\r\n  const closeDialog = () => dispatch(setDialogOpen(false));\r\n\r\n  const openDialogForType = type => {\r\n    history.replace(`/${type}`);\r\n    dispatch(setDialogOpen(true));\r\n  };\r\n\r\n  const onExited = () => history.replace('/');\r\n\r\n  return { openDialogForType, openDialog, closeDialog, onExited, isDialogOpen };\r\n};\r\n\r\nexport default useHomeDialog;\r\n","import React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Divider, Hidden, List, ListItem, ListItemText } from '@material-ui/core';\r\nimport useHomeDialog from '../../../../hooks/useHomeDialog';\r\nimport useStyles from '../styles';\r\n\r\nconst Buttons = () => {\r\n  const { t } = useTranslation();\r\n\r\n  const { openDialogForType } = useHomeDialog();\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Hidden smUp>\r\n      <Divider />\r\n      <List>\r\n        <ListItem button onClick={() => openDialogForType('login')}>\r\n          <ListItemText primary={t('signIn')} />\r\n        </ListItem>\r\n        <ListItem\r\n          button\r\n          onClick={() => openDialogForType('register')}\r\n          className={classes.drawerHighlight}>\r\n          <ListItemText primary={t('signUp')} className={classes.drawerHighlightText} />\r\n        </ListItem>\r\n      </List>\r\n    </Hidden>\r\n  );\r\n};\r\n\r\nexport default Buttons;\r\n","import React from 'react';\r\nimport { List } from '@material-ui/core';\r\nimport LanguageSelector from '../common/LanguageSelector';\r\nimport ThemeSwitcher from '../common/ThemeSwitcher';\r\nimport Buttons from './Buttons';\r\n\r\nconst HomeDrawerContent = () => {\r\n  return (\r\n    <>\r\n      <List>\r\n        <LanguageSelector />\r\n        <ThemeSwitcher />\r\n      </List>\r\n      <Buttons />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default HomeDrawerContent;\r\n","import React from 'react';\r\nimport { Link, useLocation } from 'react-router-dom';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Divider, Icon, List, ListItem, ListItemIcon, ListItemText } from '@material-ui/core';\r\nimport LanguageSelector from './common/LanguageSelector';\r\nimport ThemeSwitcher from './common/ThemeSwitcher';\r\n\r\nconst UserDrawerContent = ({ closeDrawer, isDrawerPermanent }) => {\r\n  const { t } = useTranslation();\r\n\r\n  const location = useLocation();\r\n\r\n  const drawerItems = t('drawer.user', { returnObjects: true });\r\n\r\n  const isSelected = item =>\r\n    location.pathname === item.pathname || location.pathname.startsWith(`${item.pathname}/`);\r\n\r\n  const onItemClick = () => !isDrawerPermanent && closeDrawer();\r\n\r\n  return (\r\n    <>\r\n      <List>\r\n        {drawerItems.map((item, index) => (\r\n          <ListItem\r\n            button\r\n            key={index}\r\n            component={Link}\r\n            to={item.pathname}\r\n            replace={location.pathname === item.pathname}\r\n            selected={isSelected(item)}\r\n            onClick={onItemClick}>\r\n            <ListItemIcon>\r\n              <Icon>{item.icon}</Icon>\r\n            </ListItemIcon>\r\n            <ListItemText primary={item.text} />\r\n          </ListItem>\r\n        ))}\r\n      </List>\r\n      <Divider />\r\n      <List>\r\n        <LanguageSelector />\r\n        <ThemeSwitcher />\r\n      </List>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default UserDrawerContent;\r\n","import { useDispatch, useSelector } from 'react-redux';\r\nimport { useMediaQuery, useTheme } from '@material-ui/core';\r\nimport { setDrawerOpen } from '../slices/appSlice';\r\n\r\nconst useDrawer = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const isDrawerOpen = useSelector(state => state.app.isDrawerOpen);\r\n\r\n  const isLoggedIn = useSelector(state => state.user.isLoggedIn);\r\n\r\n  const isLgUp = useMediaQuery(useTheme().breakpoints.up('lg'));\r\n\r\n  const openDrawer = () => dispatch(setDrawerOpen(true));\r\n\r\n  const closeDrawer = () => dispatch(setDrawerOpen(false));\r\n\r\n  const isDrawerPermanent = isLoggedIn && isLgUp;\r\n\r\n  return { openDrawer, closeDrawer, isDrawerOpen, isDrawerPermanent };\r\n};\r\n\r\nexport default useDrawer;\r\n","import React from 'react';\r\nimport PermanentDrawer from './PermanentDrawer';\r\nimport TemporaryDrawer from './TemporaryDrawer';\r\nimport HomeDrawerContent from './HomeDrawerContent';\r\nimport UserDrawerContent from './UserDrawerContent';\r\nimport useDrawer from '../../../hooks/useDrawer';\r\n\r\nconst AppDrawer = ({ isLoggedIn }) => {\r\n  const { closeDrawer, isDrawerOpen, isDrawerPermanent } = useDrawer();\r\n\r\n  const Drawer = isDrawerPermanent ? PermanentDrawer : TemporaryDrawer;\r\n\r\n  const DrawerContent = isLoggedIn ? UserDrawerContent : HomeDrawerContent;\r\n\r\n  return (\r\n    <Drawer open={isDrawerOpen} onClose={closeDrawer}>\r\n      <DrawerContent closeDrawer={closeDrawer} isDrawerPermanent={isDrawerPermanent} />\r\n    </Drawer>\r\n  );\r\n};\r\n\r\nexport default AppDrawer;\r\n","import { makeStyles } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  appBar: {\r\n    zIndex: theme.zIndex.drawer + 1\r\n  },\r\n  appBarSpacer: {\r\n    marginRight: theme.spacing(1)\r\n  },\r\n  appBarLogo: {\r\n    marginRight: 4\r\n  },\r\n  appBarTitle: {\r\n    userSelect: 'none',\r\n    flexGrow: 1\r\n  }\r\n}));\r\n\r\nexport default useStyles;\r\n","import React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Button, Hidden } from '@material-ui/core';\r\nimport useHomeDialog from '../../../hooks/useHomeDialog';\r\nimport useStyles from './styles';\r\n\r\nconst HomeNavigation = () => {\r\n  const { t } = useTranslation();\r\n\r\n  const { openDialogForType } = useHomeDialog();\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Hidden xsDown>\r\n      <Button\r\n        color='inherit'\r\n        onClick={() => openDialogForType('login')}\r\n        className={classes.appBarSpacer}>\r\n        {t('signIn')}\r\n      </Button>\r\n      <Button variant='outlined' color='inherit' onClick={() => openDialogForType('register')}>\r\n        {t('signUp')}\r\n      </Button>\r\n    </Hidden>\r\n  );\r\n};\r\n\r\nexport default HomeNavigation;\r\n","import { makeStyles } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  dialogTitle: ({ centered }) => ({\r\n    margin: 0,\r\n    padding: centered ? theme.spacing(2, 8, 0) : theme.spacing(2, 8, 2, 3),\r\n    textAlign: centered ? 'center' : 'initial'\r\n  }),\r\n  dialogCloseButton: {\r\n    position: 'absolute',\r\n    top: theme.spacing(1),\r\n    right: theme.spacing(1),\r\n    color: theme.palette.text.secondary\r\n  },\r\n  successAlert: {\r\n    margin: theme.spacing(3, 3, 0)\r\n  },\r\n  dialogActions: {\r\n    padding: theme.spacing(2, 3),\r\n    justifyContent: 'center'\r\n  }\r\n}));\r\n\r\nexport default useStyles;\r\n","import React from 'react';\r\nimport MuiDialogTitle from '@material-ui/core/DialogTitle';\r\nimport { IconButton, Typography } from '@material-ui/core';\r\nimport { Close } from '@material-ui/icons';\r\nimport useStyles from './styles';\r\n\r\nconst DialogHeader = ({ title, onClose, centered, closeButton }) => {\r\n  const classes = useStyles({ centered: centered });\r\n\r\n  return (\r\n    <MuiDialogTitle disableTypography className={classes.dialogTitle}>\r\n      <Typography variant='h6'>{title}</Typography>\r\n      {closeButton && (\r\n        <IconButton className={classes.dialogCloseButton} onClick={onClose}>\r\n          <Close />\r\n        </IconButton>\r\n      )}\r\n    </MuiDialogTitle>\r\n  );\r\n};\r\n\r\nexport default DialogHeader;\r\n","import React from 'react';\r\nimport { Dialog as MaterialDialog, DialogActions, DialogContent } from '@material-ui/core';\r\nimport DialogHeader from './DialogHeader';\r\n\r\nconst Dialog = ({\r\n  open,\r\n  onClose,\r\n  title,\r\n  centeredTitle = false,\r\n  closeButton = false,\r\n  content,\r\n  actions,\r\n  children,\r\n  ...props\r\n}) => {\r\n  return (\r\n    <MaterialDialog open={open} onClose={onClose} {...props}>\r\n      <DialogHeader\r\n        title={title}\r\n        onClose={onClose}\r\n        centered={centeredTitle}\r\n        closeButton={closeButton}\r\n      />\r\n      {content && <DialogContent>{content}</DialogContent>}\r\n      {actions && <DialogActions>{actions}</DialogActions>}\r\n      {children}\r\n    </MaterialDialog>\r\n  );\r\n};\r\n\r\nexport default Dialog;\r\n","import Axios from 'axios';\r\n\r\nexport default () =>\r\n  Axios.create({\r\n    baseURL: process.env.REACT_APP_API_URL,\r\n    timeout: 10000,\r\n    headers: localStorage.getItem('token')\r\n      ? { Authorization: 'Bearer ' + localStorage.getItem('token') }\r\n      : {}\r\n  });\r\n","export default async (restCall, errorPayload) => {\r\n  let response;\r\n  try {\r\n    response = await restCall;\r\n  } catch (e) {\r\n    response = null;\r\n  }\r\n\r\n  const success = response && response.status >= 200 && response.status < 300;\r\n  return success ? response : { type: 'ERROR', data: errorPayload };\r\n};\r\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\r\nimport webInvoicerApi from '../apis/webInvoicerApi';\r\nimport apiHandler from '../apis/apiHandler';\r\nimport { setDrawerOpen } from './appSlice';\r\n\r\nconst initialState = {\r\n  actionPending: false,\r\n  error: null,\r\n  userData: null,\r\n  isLoggedIn: false\r\n};\r\n\r\nexport const login = createAsyncThunk('user/login', async (user, { dispatch }) => {\r\n  const response = await handleAction(\r\n    { endpoint: 'users/authenticate', payload: user, errorData: 'login' },\r\n    dispatch\r\n  );\r\n\r\n  dispatch(setDrawerOpen(false));\r\n  localStorage.setItem('token', response.token);\r\n  localStorage.setItem('userData', JSON.stringify(response.userData));\r\n  return response;\r\n});\r\n\r\nexport const refreshToken = createAsyncThunk('user/refreshToken', async (_, { dispatch }) => {\r\n  const response = await handleAction(\r\n    { endpoint: 'users/refreshToken', errorData: 'refreshToken' },\r\n    dispatch\r\n  );\r\n\r\n  localStorage.setItem('token', response);\r\n  return response;\r\n});\r\n\r\nexport const register = createAsyncThunk('user/register', async (user, { dispatch }) => {\r\n  return await handleAction(\r\n    { endpoint: 'users/register', payload: user, errorData: 'register' },\r\n    dispatch\r\n  );\r\n});\r\n\r\nexport const confirmEmail = createAsyncThunk(\r\n  'user/confirmEmail',\r\n  async (confirmationData, { dispatch }) => {\r\n    return await handleAction(\r\n      { endpoint: 'users/confirm', payload: confirmationData, errorData: 'confirmEmail' },\r\n      dispatch\r\n    );\r\n  }\r\n);\r\n\r\nexport const resetPassword = createAsyncThunk('user/resetPassword', async (email, { dispatch }) => {\r\n  return await handleAction(\r\n    { endpoint: 'users/resetPassword', payload: { email: email }, errorData: 'resetPassword' },\r\n    dispatch\r\n  );\r\n});\r\n\r\nexport const changeResetPassword = createAsyncThunk(\r\n  'user/changeResetPassword',\r\n  async (data, { dispatch }) => {\r\n    return await handleAction(\r\n      { endpoint: 'users/changeResetPassword', payload: data, errorData: 'changePassword' },\r\n      dispatch\r\n    );\r\n  }\r\n);\r\n\r\nexport const changePassword = createAsyncThunk(\r\n  'user/changePassword',\r\n  async (data, { dispatch }) => {\r\n    return await handleAction(\r\n      { endpoint: 'users/changePassword', payload: data, errorData: 'changePassword' },\r\n      dispatch\r\n    );\r\n  }\r\n);\r\n\r\nexport const setCompanyData = createAsyncThunk(\r\n  'user/setCompanyData',\r\n  async (data, { dispatch }) => {\r\n    return await handleAction(\r\n      { endpoint: 'users/setCompanyDetails', payload: data, errorData: 'setCompanyData' },\r\n      dispatch\r\n    );\r\n  }\r\n);\r\n\r\nconst handleAction = async ({ endpoint, payload, errorData }, dispatch) => {\r\n  dispatch(setActionPending(true));\r\n  const response = await apiHandler(webInvoicerApi().post(endpoint, payload), errorData);\r\n  dispatch(setActionPending(false));\r\n\r\n  if (response.type === 'ERROR') {\r\n    dispatch(setError(response.data));\r\n    throw new Error(response.data);\r\n  }\r\n  return response.data;\r\n};\r\n\r\nconst userSlice = createSlice({\r\n  name: 'user',\r\n  initialState,\r\n  reducers: {\r\n    setActionPending(state, action) {\r\n      state.actionPending = action.payload;\r\n    },\r\n    setError(state, action) {\r\n      state.error = action.payload;\r\n    },\r\n    setUserData(state, action) {\r\n      state.userData = action.payload;\r\n      state.isLoggedIn = true;\r\n    }\r\n  },\r\n  extraReducers: {\r\n    [login.fulfilled]: (state, action) => {\r\n      state.userData = action.payload.userData;\r\n      state.isLoggedIn = true;\r\n    }\r\n  }\r\n});\r\n\r\nexport const { setActionPending, setError, setUserData } = userSlice.actions;\r\n\r\nexport default userSlice.reducer;\r\n","import { makeStyles } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  dialogAlert: {\r\n    margin: theme.spacing(3, 3, 0)\r\n  }\r\n}));\r\n\r\nexport default useStyles;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Collapse } from '@material-ui/core';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport { setError } from '../../../../../slices/userSlice';\r\nimport useStyles from './styles';\r\n\r\nconst DialogAlert = () => {\r\n  const [displayedError, setDisplayedError] = useState('');\r\n\r\n  const { t } = useTranslation();\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const error = useSelector(state => state.user.error);\r\n\r\n  const classes = useStyles();\r\n\r\n  useEffect(() => {\r\n    if (error) {\r\n      setDisplayedError(error);\r\n      setTimeout(() => {\r\n        dispatch(setError(null));\r\n      }, 5000);\r\n    }\r\n  }, [error, dispatch]);\r\n\r\n  useEffect(() => {\r\n    return () => dispatch(setError(null));\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  return (\r\n    <Collapse in={Boolean(error)}>\r\n      <Alert variant='outlined' severity='error' className={classes.dialogAlert}>\r\n        {displayedError && t(`user.error.${displayedError}`)}\r\n      </Alert>\r\n    </Collapse>\r\n  );\r\n};\r\n\r\nexport default DialogAlert;\r\n","import { useTranslation } from 'react-i18next';\r\nimport validator from 'validator';\r\n\r\nconst useValidation = () => {\r\n  const { t } = useTranslation();\r\n\r\n  const validNip = value => {\r\n    const weights = [6, 5, 7, 2, 3, 4, 5, 6, 7, 0];\r\n\r\n    if (value.length !== 10 || !validator.isNumeric(value)) return false;\r\n\r\n    let sum = 0;\r\n    Array.from(value).forEach((char, index) => (sum += Number(char) * weights[index]));\r\n    return sum % 11 === Number(value[9]);\r\n  };\r\n\r\n  const positiveInt = value => {\r\n    return validator.isInt(value, { gt: 0, allow_leading_zeroes: false });\r\n  };\r\n\r\n  const currency = value => {\r\n    return (\r\n      Number(value) > 0 &&\r\n      validator.isCurrency(value, {\r\n        allow_negatives: false,\r\n        digits_after_decimal: [1, 2],\r\n        symbol: ''\r\n      })\r\n    );\r\n  };\r\n\r\n  const phoneNumber = value => {\r\n    return validator.isMobilePhone(value, ['pl-PL']);\r\n  };\r\n\r\n  const postalCode = value => {\r\n    return validator.isPostalCode(value, ['PL']);\r\n  };\r\n\r\n  const required = value => {\r\n    const coercedValue = value + '';\r\n    const isInvalid = !value || validator.isEmpty(coercedValue, { ignore_whitespace: true });\r\n\r\n    return isInvalid ? t('validation.required') : true;\r\n  };\r\n\r\n  const validate = (validationType, value, isRequired) => {\r\n    const coercedValue = value + '';\r\n    if (!isRequired && (!value || coercedValue.length === 0)) return true;\r\n\r\n    const result = () => {\r\n      switch (validationType) {\r\n        case 'validNip':\r\n          return validNip(coercedValue);\r\n        case 'positiveInt':\r\n          return positiveInt(coercedValue);\r\n        case 'currency':\r\n          return currency(coercedValue);\r\n        case 'phoneNumber':\r\n          return phoneNumber(coercedValue);\r\n        case 'postalCode':\r\n          return postalCode(coercedValue);\r\n        default:\r\n          throw new Error('Validation type not supported!');\r\n      }\r\n    };\r\n\r\n    return result() ? true : t(`validation.${validationType}`);\r\n  };\r\n\r\n  return { required, validate };\r\n};\r\n\r\nexport default useValidation;\r\n","import React, { useEffect } from 'react';\r\nimport { ValidatorForm as Form } from 'react-material-ui-form-validator';\r\nimport useValidation from '../../hooks/useValidation';\r\n\r\nconst ValidatorForm = ({ children, validatorRef, ...props }) => {\r\n  const { validate } = useValidation();\r\n\r\n  const booleanResult = result => (result === true ? true : false);\r\n\r\n  const validationRules = [\r\n    { name: 'validNip', validator: value => booleanResult(validate('validNip', value, true)) },\r\n    { name: 'positiveInt', validator: value => booleanResult(validate('positiveInt', value, true)) },\r\n    { name: 'currency', validator: value => booleanResult(validate('currency', value, true)) },\r\n    { name: 'phoneNumber', validator: value => booleanResult(validate('phoneNumber', value, true)) },\r\n    { name: 'postalCode', validator: value => booleanResult(validate('postalCode', value, true)) }\r\n  ];\r\n\r\n  useEffect(() => {\r\n    validationRules.forEach(rule => Form.addValidationRule(rule.name, rule.validator));\r\n    return () => validationRules.forEach(rule => Form.removeValidationRule(rule.name));\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  return (\r\n    <Form {...props} ref={validatorRef}>\r\n      {children}\r\n    </Form>\r\n  );\r\n};\r\n\r\nexport default ValidatorForm;\r\n","import { makeStyles } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles(() => ({\r\n  wrapper: {\r\n    position: 'relative'\r\n  },\r\n  progress: {\r\n    position: 'absolute',\r\n    top: '50%',\r\n    left: '50%',\r\n    marginTop: -12,\r\n    marginLeft: -12\r\n  }\r\n}));\r\n\r\nexport default useStyles;\r\n","import React from 'react';\r\nimport { Button, CircularProgress } from '@material-ui/core';\r\nimport useStyles from './styles';\r\n\r\nconst SubmitButton = ({ text, loading }) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.wrapper}>\r\n      <Button variant='contained' color='primary' size='large' type='submit' disabled={loading}>\r\n        {text}\r\n      </Button>\r\n      {loading && <CircularProgress size={24} className={classes.progress} />}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SubmitButton;\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { DialogActions, DialogContent } from '@material-ui/core';\r\nimport ValidatorForm from '../ValidatorForm';\r\nimport SubmitButton from '../SubmitButton/SubmitButton';\r\nimport useStyles from './styles';\r\n\r\nconst FormContent = ({ onSubmit, children, submitText, validatorRef }) => {\r\n  const classes = useStyles();\r\n\r\n  const loading = useSelector(state => state.user.actionPending);\r\n\r\n  return (\r\n    <ValidatorForm onSubmit={onSubmit} validatorRef={validatorRef} noValidate>\r\n      <DialogContent>{children}</DialogContent>\r\n      <DialogActions className={classes.dialogActions}>\r\n        <SubmitButton text={submitText} loading={loading} />\r\n      </DialogActions>\r\n    </ValidatorForm>\r\n  );\r\n};\r\n\r\nexport default FormContent;\r\n","import React from 'react';\r\nimport { TextValidator } from 'react-material-ui-form-validator';\r\n\r\nconst DialogTextField = props => {\r\n  return <TextValidator margin='normal' variant='outlined' fullWidth {...props} />;\r\n};\r\n\r\nexport default DialogTextField;\r\n","import React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport DialogTextField from './DialogTextField';\r\n\r\nconst Password = ({ passwordChange, ...props }) => {\r\n  const { t } = useTranslation();\r\n\r\n  return (\r\n    <DialogTextField\r\n      label={t(`home.dialog.${passwordChange ? 'newPassword' : 'password'}`)}\r\n      type='password'\r\n      validators={[\r\n        'required',\r\n        'matchRegexp:^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[#$^+=!*()@%&]).{6,}$'\r\n      ]}\r\n      errorMessages={[t('home.dialog.validation.required'), t('home.dialog.validation.password')]}\r\n      {...props}\r\n    />\r\n  );\r\n};\r\n\r\nexport default Password;\r\n","import React from 'react';\r\nimport { Collapse } from '@material-ui/core';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport useStyles from './styles';\r\n\r\nconst SuccessAlert = ({ success, text }) => {\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Collapse in={success}>\r\n      <Alert variant='outlined' severity='success' className={classes.successAlert}>\r\n        {text}\r\n      </Alert>\r\n    </Collapse>\r\n  );\r\n};\r\n\r\nexport default SuccessAlert;\r\n","import { useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { unwrapResult } from '@reduxjs/toolkit';\r\n\r\nconst useResultSuccess = action => {\r\n  const [success, setSuccess] = useState(false);\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const performAction = (args, successCallback, handleError) => {\r\n    setSuccess(false);\r\n    dispatch(action(args))\r\n      .then(unwrapResult)\r\n      .then(() => {\r\n        setSuccess(true);\r\n        successCallback && successCallback();\r\n      })\r\n      .catch(e => handleError && handleError(e));\r\n  };\r\n\r\n  return { success, performAction };\r\n};\r\n\r\nexport default useResultSuccess;\r\n","import React, { useState } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport FormContent from '../../../../common/Dialog/FormContent';\r\nimport Password from '../../../../common/Dialog/Password';\r\nimport SuccessAlert from '../../../../common/Dialog/SuccessAlert';\r\nimport { changePassword, setError } from '../../../../../slices/userSlice';\r\nimport useResultSuccess from '../../../../../hooks/useResultSuccess';\r\n\r\nconst ChangePasswordContent = () => {\r\n  const [formData, setFormData] = useState({\r\n    password: '',\r\n    newPassword: ''\r\n  });\r\n\r\n  const { t } = useTranslation();\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const { success, performAction } = useResultSuccess(changePassword);\r\n\r\n  const email = useSelector(state => state.user.userData.email);\r\n\r\n  const onTextChanged = name => ({ target }) => {\r\n    setFormData(formData => ({ ...formData, [name]: target.value }));\r\n  };\r\n\r\n  const onSubmit = e => {\r\n    e.preventDefault();\r\n\r\n    if (formData.password === formData.newPassword) {\r\n      dispatch(setError('passwordsEqual'));\r\n      return;\r\n    }\r\n\r\n    performAction({ ...formData, email }, () => setFormData({ password: '', newPassword: '' }));\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <SuccessAlert success={success} text={t('user.success.changePassword')} />\r\n      <FormContent onSubmit={onSubmit} submitText={t('changePassword')}>\r\n        <Password autoFocus onChange={onTextChanged('password')} value={formData.password} />\r\n        <Password\r\n          passwordChange\r\n          onChange={onTextChanged('newPassword')}\r\n          value={formData.newPassword}\r\n        />\r\n      </FormContent>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ChangePasswordContent;\r\n","import { useEffect, useRef } from 'react';\r\n\r\nconst useDidUpdateEffect = (effect, deps) => {\r\n  const isFirstRun = useRef(true);\r\n\r\n  useEffect(() => {\r\n    isFirstRun.current ? (isFirstRun.current = false) : effect();\r\n    // eslint-disable-next-line\r\n  }, deps);\r\n};\r\n\r\nexport default useDidUpdateEffect;\r\n","import React, { useRef, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useTranslation } from 'react-i18next';\r\nimport FormContent from '../../../../common/Dialog/FormContent';\r\nimport DialogTextField from '../../../../common/Dialog/DialogTextField';\r\nimport SuccessAlert from '../../../../common/Dialog/SuccessAlert';\r\nimport { setCompanyData, setUserData } from '../../../../../slices/userSlice';\r\nimport useDidUpdateEffect from '../../../../../hooks/useDidUpdateEffect';\r\nimport useResultSuccess from '../../../../../hooks/useResultSuccess';\r\nimport equal from 'fast-deep-equal';\r\n\r\nconst CompanyDataContent = () => {\r\n  const initialFormData = {\r\n    companyName: '',\r\n    nip: '',\r\n    address: '',\r\n    postalCode: '',\r\n    city: ''\r\n  };\r\n\r\n  const [formData, setFormData] = useState(initialFormData);\r\n\r\n  const { t } = useTranslation();\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const validator = useRef(null);\r\n\r\n  const { success, performAction } = useResultSuccess(setCompanyData);\r\n\r\n  const userData = useSelector(state => state.user.userData);\r\n\r\n  useDidUpdateEffect(() => {\r\n    equal(formData, initialFormData) && validator.current.resetValidations();\r\n  }, [formData]);\r\n\r\n  const onTextChanged = name => ({ target }) => {\r\n    setFormData(formData => ({ ...formData, [name]: target.value }));\r\n  };\r\n\r\n  const onSubmit = e => {\r\n    e.preventDefault();\r\n    performAction(formData, () => {\r\n      dispatch(setUserData({ ...userData, ...formData }));\r\n      setFormData(initialFormData);\r\n    });\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <SuccessAlert success={success} text={t('user.success.setCompanyData')} />\r\n      <FormContent onSubmit={onSubmit} submitText={t('save')} validatorRef={validator}>\r\n        <DialogTextField\r\n          autoFocus\r\n          label={t('counterparties.name')}\r\n          onChange={onTextChanged('companyName')}\r\n          value={formData.companyName}\r\n          validators={['required']}\r\n          errorMessages={[t('validation.required')]}\r\n        />\r\n        <DialogTextField\r\n          label={t('counterparties.nip')}\r\n          onChange={onTextChanged('nip')}\r\n          value={formData.nip}\r\n          validators={['validNip']}\r\n          errorMessages={[t('validation.validNip')]}\r\n        />\r\n        <DialogTextField\r\n          label={t('counterparties.address')}\r\n          onChange={onTextChanged('address')}\r\n          value={formData.address}\r\n          validators={['required']}\r\n          errorMessages={[t('validation.required')]}\r\n        />\r\n        <DialogTextField\r\n          label={t('counterparties.postalCode')}\r\n          onChange={onTextChanged('postalCode')}\r\n          value={formData.postalCode}\r\n          validators={['postalCode']}\r\n          errorMessages={[t('validation.postalCode')]}\r\n        />\r\n        <DialogTextField\r\n          label={t('counterparties.city')}\r\n          onChange={onTextChanged('city')}\r\n          value={formData.city}\r\n          validators={['required']}\r\n          errorMessages={[t('validation.required')]}\r\n        />\r\n      </FormContent>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default CompanyDataContent;\r\n","import React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport Dialog from '../../../../common/Dialog';\r\nimport DialogAlert from './DialogAlert';\r\nimport ChangePasswordContent from './ChangePasswordContent';\r\nimport CompanyDataContent from './CompanyDataContent';\r\n\r\nconst UserDialog = ({ open, onClose, type }) => {\r\n  const { t } = useTranslation();\r\n\r\n  const dialogTitle =\r\n    type === 'changePassword' ? t('accountChangePassword') : t('accountSetCompanyData');\r\n\r\n  return (\r\n    <Dialog\r\n      centeredTitle\r\n      closeButton\r\n      title={dialogTitle}\r\n      open={open}\r\n      onClose={onClose}\r\n      maxWidth='xs'\r\n      fullWidth>\r\n      <DialogAlert />\r\n      {type === 'changePassword' ? <ChangePasswordContent /> : <CompanyDataContent />}\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default UserDialog;\r\n","import { useDispatch } from 'react-redux';\r\n\r\nconst useLogout = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  return () => {\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('userData');\r\n    dispatch({ type: 'user/logout' });\r\n  };\r\n};\r\n\r\nexport default useLogout;\r\n","import { useState } from 'react';\r\n\r\nconst useDialog = () => {\r\n  const [isDialogOpen, setIsDialogOpen] = useState(false);\r\n\r\n  const [dialogData, setDialogData] = useState(null);\r\n\r\n  const openDialog = data => {\r\n    setIsDialogOpen(true);\r\n    data && setDialogData(data);\r\n  };\r\n\r\n  const closeDialog = () => setIsDialogOpen(false);\r\n\r\n  return { isDialogOpen, dialogData, openDialog, closeDialog };\r\n};\r\n\r\nexport default useDialog;\r\n","import { useEffect, useRef } from 'react';\r\n\r\nconst useInterval = (callback, delay) => {\r\n  const savedCallback = useRef();\r\n\r\n  useEffect(() => {\r\n    savedCallback.current = callback;\r\n  }, [callback]);\r\n\r\n  useEffect(() => {\r\n    const tick = () => {\r\n      savedCallback.current();\r\n    };\r\n\r\n    if (delay !== null) {\r\n      let id = setInterval(tick, delay);\r\n      return () => clearInterval(id);\r\n    }\r\n  }, [delay]);\r\n};\r\nexport default useInterval;\r\n","import JwtDecode from 'jwt-decode';\r\nimport { useDispatch } from 'react-redux';\r\nimport { refreshToken } from '../slices/userSlice';\r\nimport useInterval from './useInterval';\r\n\r\nconst useTokenRefresh = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const tokenExpiryTime = JwtDecode(localStorage.getItem('token')).exp;\r\n\r\n  const calculateExpiryDelay = () => tokenExpiryTime * 1000 - new Date().getTime() - 30000;\r\n\r\n  let expiryDelay = calculateExpiryDelay();\r\n\r\n  useInterval(() => {\r\n    dispatch(refreshToken());\r\n    expiryDelay = calculateExpiryDelay();\r\n  }, expiryDelay);\r\n};\r\n\r\nexport default useTokenRefresh;\r\n","import React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { IconButton, Menu, MenuItem } from '@material-ui/core';\r\nimport { AccountCircle } from '@material-ui/icons';\r\nimport UserDialog from './UserDialog';\r\nimport useLogout from '../../../../hooks/useLogout';\r\nimport useDialog from '../../../../hooks/useDialog';\r\nimport useDropdownMenu from '../../../../hooks/useDropdownMenu';\r\nimport useTokenRefresh from '../../../../hooks/useTokenRefresh';\r\n\r\nconst UserNavigation = () => {\r\n  const { t } = useTranslation();\r\n\r\n  const { anchor, openMenu, closeMenu } = useDropdownMenu();\r\n\r\n  const { isDialogOpen, dialogData, openDialog, closeDialog } = useDialog();\r\n\r\n  const logout = useLogout();\r\n\r\n  useTokenRefresh();\r\n\r\n  const handleClick = type => () => {\r\n    closeMenu();\r\n    openDialog(type);\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <UserDialog open={isDialogOpen} onClose={closeDialog} type={dialogData} />\r\n      <IconButton edge='end' color='primary' onClick={openMenu}>\r\n        <AccountCircle fontSize='large' />\r\n      </IconButton>\r\n      <Menu anchorEl={anchor} open={Boolean(anchor)} onClose={closeMenu}>\r\n        <MenuItem onClick={handleClick('setCompanyData')}>{t('accountSetCompanyData')}</MenuItem>\r\n        <MenuItem onClick={handleClick('changePassword')}>{t('accountChangePassword')}</MenuItem>\r\n        <MenuItem onClick={logout}>{t('signOut')}</MenuItem>\r\n      </Menu>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default UserNavigation;\r\n","import { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport JwtDecode from 'jwt-decode';\r\nimport { setUserData } from '../slices/userSlice';\r\nimport useLogout from './useLogout';\r\n\r\nconst useTokenCheck = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const logout = useLogout();\r\n\r\n  const isLoggedIn = useSelector(state => state.user.isLoggedIn);\r\n\r\n  useEffect(() => {\r\n    if (isLoggedIn || !localStorage.getItem('token')) return;\r\n\r\n    const decodedToken = JwtDecode(localStorage.getItem('token'));\r\n    const userData = JSON.parse(localStorage.getItem('userData'));\r\n\r\n    if (!decodedToken || !userData || decodedToken.exp < new Date().getTime() / 1000) {\r\n      logout();\r\n    } else dispatch(setUserData(userData));\r\n    // eslint-disable-next-line\r\n  }, []);\r\n};\r\n\r\nexport default useTokenCheck;\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { AppBar, IconButton, Toolbar, Typography } from '@material-ui/core';\r\nimport { Menu as MenuIcon, MonetizationOnTwoTone as AppIcon } from '@material-ui/icons';\r\nimport Drawer from '../AppDrawer';\r\nimport HomeNavigation from './HomeNavigation';\r\nimport UserNavigation from './UserNavigation';\r\nimport useDrawer from '../../../hooks/useDrawer';\r\nimport useTokenCheck from '../../../hooks/useTokenCheck';\r\nimport useStyles from './styles';\r\n\r\nconst Navigation = () => {\r\n  const { t } = useTranslation();\r\n\r\n  const isLoggedIn = useSelector(state => state.user.isLoggedIn);\r\n\r\n  const { openDrawer, isDrawerPermanent } = useDrawer();\r\n\r\n  const classes = useStyles();\r\n\r\n  useTokenCheck();\r\n\r\n  return (\r\n    <>\r\n      <Drawer isLoggedIn={isLoggedIn} />\r\n      <AppBar position='fixed' color='inherit' className={classes.appBar}>\r\n        <Toolbar>\r\n          {!isDrawerPermanent && (\r\n            <IconButton\r\n              edge='start'\r\n              color='inherit'\r\n              onClick={openDrawer}\r\n              className={classes.appBarSpacer}>\r\n              <MenuIcon />\r\n            </IconButton>\r\n          )}\r\n          <AppIcon fontSize='large' className={classes.appBarLogo} color='primary' />\r\n          <Typography variant='h6' className={classes.appBarTitle}>\r\n            {t('title')}\r\n          </Typography>\r\n          {isLoggedIn ? <UserNavigation /> : <HomeNavigation />}\r\n        </Toolbar>\r\n      </AppBar>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Navigation;\r\n","import { Backdrop, CircularProgress } from '@material-ui/core';\r\nimport React from 'react';\r\n\r\nconst SuspenseLoading = () => {\r\n  return (\r\n    <Backdrop open={true}>\r\n      <CircularProgress />\r\n    </Backdrop>\r\n  );\r\n};\r\n\r\nexport default SuspenseLoading;\r\n","import React from 'react';\r\nimport { Redirect, Route } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\n\r\nconst PrivateRoute = props => {\r\n  const isLoggedIn = useSelector(state => state.user.isLoggedIn);\r\n\r\n  return (\r\n    <>\r\n      {isLoggedIn || <Redirect to='/' />}\r\n      <Route {...props} />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default PrivateRoute;\r\n","import { makeStyles } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  heroContainer: {\r\n    width: 'fit-content',\r\n    padding: theme.spacing(2),\r\n    margin: theme.spacing(2, 0),\r\n    marginLeft: 'auto',\r\n    marginRight: 'auto',\r\n    display: 'flex',\r\n    [theme.breakpoints.only('xs')]: {\r\n      flexDirection: 'column'\r\n    }\r\n  },\r\n  heroItem: {\r\n    marginTop: 'auto',\r\n    marginBottom: 'auto',\r\n    [theme.breakpoints.only('xs')]: {\r\n      textAlign: 'center'\r\n    }\r\n  },\r\n  heroIcon: {\r\n    fontSize: '6rem',\r\n    marginRight: theme.spacing(2),\r\n    [theme.breakpoints.only('xs')]: {\r\n      marginRight: 0\r\n    }\r\n  },\r\n  featureCard: {\r\n    height: '100%'\r\n  },\r\n  featureIcon: {\r\n    fontSize: '5rem'\r\n  }\r\n}));\r\n\r\nexport default useStyles;\r\n","import React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Card, CardContent, Grid, Icon, Typography } from '@material-ui/core';\r\nimport useStyles from './styles';\r\n\r\nconst FeatureGrid = () => {\r\n  const { t } = useTranslation();\r\n\r\n  const features = t('home.features', { returnObjects: true });\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Grid container justify='center' spacing={3}>\r\n      {features.map((feature, index) => (\r\n        <Grid key={index} item xs={12} sm={6}>\r\n          <Card className={classes.featureCard}>\r\n            <CardContent>\r\n              <div className='text-center'>\r\n                <Icon className={classes.featureIcon} color='primary'>\r\n                  {feature.icon}\r\n                </Icon>\r\n              </div>\r\n              <Typography gutterBottom variant='h5' className='text-center'>\r\n                {feature.header}\r\n              </Typography>\r\n              <Typography variant='body1' color='textSecondary' className='text-center'>\r\n                {feature.description}\r\n              </Typography>\r\n            </CardContent>\r\n          </Card>\r\n        </Grid>\r\n      ))}\r\n    </Grid>\r\n  );\r\n};\r\n\r\nexport default FeatureGrid;\r\n","import React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Box, Button, Typography } from '@material-ui/core';\r\nimport useHomeDialog from '../../../hooks/useHomeDialog';\r\n\r\nconst Footer = () => {\r\n  const { t } = useTranslation();\r\n\r\n  const { openDialogForType } = useHomeDialog();\r\n\r\n  return (\r\n    <Box mb={4} className='text-center'>\r\n      <Typography variant='h5'>{t('home.footer')}</Typography>\r\n      <Box mt={2}>\r\n        <Button\r\n          variant='outlined'\r\n          color='inherit'\r\n          size='large'\r\n          onClick={() => openDialogForType('register')}>\r\n          {t('signUp')}\r\n        </Button>\r\n      </Box>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default Footer;\r\n","import React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Typography } from '@material-ui/core';\r\nimport { MonetizationOnTwoTone as AppIcon } from '@material-ui/icons';\r\nimport useStyles from './styles';\r\n\r\nconst Hero = () => {\r\n  const { t } = useTranslation();\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.heroContainer}>\r\n      <div className={classes.heroItem}>\r\n        <AppIcon className={classes.heroIcon} color='primary' />\r\n      </div>\r\n      <div className={classes.heroItem}>\r\n        <Typography variant='h4' gutterBottom>\r\n          {t('home.hero.title')}\r\n        </Typography>\r\n        <Typography variant='h6' color='textSecondary'>\r\n          {t('home.hero.description')}\r\n        </Typography>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Hero;\r\n","const { makeStyles } = require('@material-ui/core');\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  dialogAlert: {\r\n    margin: theme.spacing(3, 3, 0)\r\n  },\r\n  dialogActions: {\r\n    padding: theme.spacing(2, 3),\r\n    justifyContent: 'center'\r\n  }\r\n}));\r\n\r\nexport default useStyles;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Collapse } from '@material-ui/core';\r\nimport Alert from '@material-ui/lab/Alert';\r\nimport { setError } from '../../../../slices/userSlice';\r\nimport useStyles from './styles';\r\n\r\nconst DialogAlert = ({ locationKey }) => {\r\n  const [displayedError, setDisplayedError] = useState('');\r\n\r\n  const { t } = useTranslation();\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const error = useSelector(state => state.user.error);\r\n\r\n  const classes = useStyles();\r\n\r\n  useEffect(() => {\r\n    if (error) {\r\n      if (error !== locationKey) dispatch(setError(null));\r\n      else {\r\n        setDisplayedError(error);\r\n        setTimeout(() => {\r\n          dispatch(setError(null));\r\n        }, 5000);\r\n      }\r\n    }\r\n  }, [error, dispatch, locationKey]);\r\n\r\n  useEffect(() => {\r\n    return () => dispatch(setError(null));\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  return (\r\n    <Collapse in={Boolean(error)}>\r\n      <Alert variant='outlined' severity='error' className={classes.dialogAlert}>\r\n        {displayedError && t(`home.dialog.error.${displayedError}`)}\r\n      </Alert>\r\n    </Collapse>\r\n  );\r\n};\r\n\r\nexport default DialogAlert;\r\n","import React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport DialogTextField from '../../../../../common/Dialog/DialogTextField';\r\n\r\nconst Email = props => {\r\n  const { t } = useTranslation();\r\n\r\n  return (\r\n    <DialogTextField\r\n      label={t('home.dialog.email')}\r\n      type='email'\r\n      validators={['required', 'isEmail']}\r\n      errorMessages={[t('home.dialog.validation.required'), t('home.dialog.validation.email')]}\r\n      {...props}\r\n    />\r\n  );\r\n};\r\n\r\nexport default Email;\r\n","import { makeStyles } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  dialogText: {\r\n    display: 'block',\r\n    marginTop: theme.spacing(3),\r\n    textAlign: 'center'\r\n  },\r\n  dialogConfirmContainer: {\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    margin: theme.spacing(3, 0)\r\n  },\r\n  dialogProgress: {\r\n    marginRight: theme.spacing(2)\r\n  }\r\n}));\r\n\r\nexport default useStyles;\r\n","import React, { useState } from 'react';\r\nimport { Link as BrowserLink, Redirect } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Link } from '@material-ui/core';\r\nimport FormContent from '../../../../common/Dialog/FormContent';\r\nimport Email from './common/Email';\r\nimport Password from '../../../../common/Dialog/Password';\r\nimport { login } from '../../../../../slices/userSlice';\r\nimport useStyles from './styles';\r\n\r\nconst Login = () => {\r\n  const [formData, setFormData] = useState({\r\n    email: '',\r\n    password: ''\r\n  });\r\n\r\n  const { t } = useTranslation();\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const isLoggedIn = useSelector(state => state.user.isLoggedIn);\r\n\r\n  const classes = useStyles();\r\n\r\n  const onTextChanged = name => ({ target }) => {\r\n    setFormData(formData => ({ ...formData, [name]: target.value }));\r\n  };\r\n\r\n  const onSubmit = e => {\r\n    e.preventDefault();\r\n    dispatch(login(formData));\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {isLoggedIn && <Redirect to='invoices' />}\r\n      <FormContent onSubmit={onSubmit} submitText={t('signIn')}>\r\n        <Email autoFocus onChange={onTextChanged('email')} value={formData.email} />\r\n        <Password onChange={onTextChanged('password')} value={formData.password} />\r\n        <Link\r\n          component={BrowserLink}\r\n          to='resetPassword'\r\n          variant='body2'\r\n          color='primary'\r\n          className={classes.dialogText}>\r\n          {t('home.dialog.forgotPassword')}\r\n        </Link>\r\n      </FormContent>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n","import React, { useState } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Typography } from '@material-ui/core';\r\nimport SuccessAlert from '../../../../common/Dialog/SuccessAlert';\r\nimport FormContent from '../../../../common/Dialog/FormContent';\r\nimport DialogTextField from '../../../../common/Dialog/DialogTextField';\r\nimport Email from './common/Email';\r\nimport Password from '../../../../common/Dialog/Password';\r\nimport { register } from '../../../../../slices/userSlice';\r\nimport useResultSuccess from '../../../../../hooks/useResultSuccess';\r\nimport useStyles from './styles';\r\n\r\nconst Register = () => {\r\n  const [formData, setFormData] = useState({\r\n    fullName: '',\r\n    email: '',\r\n    password: ''\r\n  });\r\n\r\n  const { success, performAction } = useResultSuccess(register);\r\n\r\n  const { t } = useTranslation();\r\n\r\n  const classes = useStyles();\r\n\r\n  const onTextChanged = name => ({ target }) => {\r\n    setFormData(formData => ({ ...formData, [name]: target.value }));\r\n  };\r\n\r\n  const onSubmit = e => {\r\n    e.preventDefault();\r\n    performAction(formData, () => setFormData({ fullName: '', email: '', password: '' }));\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <SuccessAlert success={success} text={t('home.dialog.success.register')} />\r\n      <FormContent onSubmit={onSubmit} submitText={t('signUp')}>\r\n        <DialogTextField\r\n          autoFocus\r\n          label={t('home.dialog.name')}\r\n          type='text'\r\n          value={formData.fullName}\r\n          validators={['required']}\r\n          errorMessages={[t('home.dialog.validation.required')]}\r\n          onChange={onTextChanged('fullName')}\r\n        />\r\n        <Email onChange={onTextChanged('email')} value={formData.email} />\r\n        <Password onChange={onTextChanged('password')} value={formData.password} />\r\n        <Typography variant='body2' color='textSecondary' className={classes.dialogText}>\r\n          {t('home.dialog.terms')}\r\n        </Typography>\r\n      </FormContent>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Register;\r\n","import React, { useState } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport SuccessAlert from '../../../../common/Dialog/SuccessAlert';\r\nimport FormContent from '../../../../common/Dialog/FormContent';\r\nimport Email from './common/Email';\r\nimport { resetPassword } from '../../../../../slices/userSlice';\r\nimport useResultSuccess from '../../../../../hooks/useResultSuccess';\r\n\r\nconst ResetPassword = () => {\r\n  const [email, setEmail] = useState('');\r\n\r\n  const { success, performAction } = useResultSuccess(resetPassword);\r\n\r\n  const { t } = useTranslation();\r\n\r\n  const onTextChanged = ({ target }) => {\r\n    setEmail(target.value);\r\n  };\r\n\r\n  const onSubmit = e => {\r\n    e.preventDefault();\r\n    performAction(email, () => setEmail(''));\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <SuccessAlert success={success} text={t('home.dialog.success.resetPassword')} />\r\n      <FormContent onSubmit={onSubmit} submitText={t('reset')}>\r\n        <Email autoFocus onChange={onTextChanged} value={email} />\r\n      </FormContent>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ResetPassword;\r\n","import React, { useState } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { useTranslation } from 'react-i18next';\r\nimport SuccessAlert from '../../../../common/Dialog/SuccessAlert';\r\nimport FormContent from '../../../../common/Dialog/FormContent';\r\nimport Password from '../../../../common/Dialog/Password';\r\nimport { changeResetPassword } from '../../../../../slices/userSlice';\r\nimport useResultSuccess from '../../../../../hooks/useResultSuccess';\r\n\r\nconst ChangePassword = () => {\r\n  const [password, setPassword] = useState('');\r\n\r\n  const { success, performAction } = useResultSuccess(changeResetPassword);\r\n\r\n  const { t } = useTranslation();\r\n\r\n  const params = new URLSearchParams(useLocation().search);\r\n  const email = params.get('email');\r\n  const token = params.get('token');\r\n\r\n  const onTextChanged = ({ target }) => {\r\n    setPassword(target.value);\r\n  };\r\n\r\n  const onSubmit = e => {\r\n    e.preventDefault();\r\n    performAction({ email: email, resetToken: token, newPassword: password }, () =>\r\n      setPassword('')\r\n    );\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <SuccessAlert success={success} text={t('home.dialog.success.resetPassword')} />\r\n      <FormContent onSubmit={onSubmit} submitText={t('changePassword')}>\r\n        <Password autoFocus passwordChange onChange={onTextChanged} value={password} />\r\n      </FormContent>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ChangePassword;\r\n","import React, { useEffect } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { CircularProgress, DialogContent, Typography } from '@material-ui/core';\r\nimport SuccessAlert from '../../../../common/Dialog/SuccessAlert';\r\nimport { confirmEmail } from '../../../../../slices/userSlice';\r\nimport useResultSuccess from '../../../../../hooks/useResultSuccess';\r\nimport useStyles from './styles';\r\n\r\nconst ConfirmEmail = () => {\r\n  const { success, performAction } = useResultSuccess(confirmEmail);\r\n\r\n  const { t } = useTranslation();\r\n\r\n  const actionPending = useSelector(state => state.user.actionPending);\r\n\r\n  const params = new URLSearchParams(useLocation().search);\r\n  const email = params.get('email');\r\n  const token = params.get('token');\r\n\r\n  const classes = useStyles();\r\n\r\n  useEffect(() => {\r\n    performAction({ email: email, token: token });\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <SuccessAlert success={success} text={t('home.dialog.success.confirmEmail')} />\r\n      <DialogContent>\r\n        <div className={classes.dialogConfirmContainer}>\r\n          {actionPending ? (\r\n            <>\r\n              <CircularProgress className={classes.dialogProgress} />\r\n              <Typography>{t('home.dialog.pleaseWait')}</Typography>\r\n            </>\r\n          ) : (\r\n            <Typography>{t('home.dialog.closeWindow')}</Typography>\r\n          )}\r\n        </div>\r\n      </DialogContent>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default ConfirmEmail;\r\n","import React from 'react';\r\nimport { Route, useLocation } from 'react-router-dom';\r\nimport { useTranslation } from 'react-i18next';\r\nimport Dialog from '../../../common/Dialog';\r\nimport DialogAlert from './DialogAlert';\r\nimport Login from './DialogContent/Login';\r\nimport Register from './DialogContent/Register';\r\nimport ResetPassword from './DialogContent/ResetPassword';\r\nimport ChangePassword from './DialogContent/ChangePassword';\r\nimport ConfirmEmail from './DialogContent/ConfirmEmail';\r\nimport useHomeDialog from '../../../../hooks/useHomeDialog';\r\n\r\nconst HomeDialog = () => {\r\n  const { t } = useTranslation();\r\n\r\n  const { isDialogOpen, closeDialog, onExited } = useHomeDialog();\r\n\r\n  const locationKey = useLocation().pathname.substring(1);\r\n\r\n  const dialogTitle = () => {\r\n    //Required to make sure i18n doesn't log missing key errors.\r\n    return locationKey ? t(`home.dialog.${locationKey}`) : '';\r\n  };\r\n\r\n  return (\r\n    <Dialog\r\n      centeredTitle\r\n      closeButton\r\n      title={dialogTitle()}\r\n      open={isDialogOpen}\r\n      onClose={closeDialog}\r\n      onExited={onExited}\r\n      maxWidth='xs'\r\n      fullWidth>\r\n      <DialogAlert locationKey={locationKey} />\r\n      <Route exact path='/login' component={Login} />\r\n      <Route exact path='/register' component={Register} />\r\n      <Route exact path='/resetPassword' component={ResetPassword} />\r\n      <Route exact path='/changePassword' component={ChangePassword} />\r\n      <Route exact path='/confirmEmail' component={ConfirmEmail} />\r\n    </Dialog>\r\n  );\r\n};\r\n\r\nexport default HomeDialog;\r\n","import React, { useEffect } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { Redirect, useLocation } from 'react-router-dom';\r\nimport { Box, Divider } from '@material-ui/core';\r\nimport FeatureGrid from './FeatureGrid';\r\nimport Footer from './Footer';\r\nimport Hero from './Hero';\r\nimport HomeDialog from './HomeDialog';\r\nimport useHomeDialog from '../../../hooks/useHomeDialog';\r\n\r\nconst Home = () => {\r\n  const location = useLocation();\r\n\r\n  const { isDialogOpen, openDialog, closeDialog } = useHomeDialog();\r\n\r\n  const isLoggedIn = useSelector(state => state.user.isLoggedIn);\r\n\r\n  const checkLocation = () => {\r\n    location.pathname !== '/' && !isDialogOpen && openDialog();\r\n    location.pathname === '/' && isDialogOpen && closeDialog();\r\n  };\r\n  useEffect(checkLocation, [location]);\r\n\r\n  return (\r\n    <>\r\n      {isLoggedIn && <Redirect to='invoices' />}\r\n      <HomeDialog />\r\n      <Hero />\r\n      <FeatureGrid />\r\n      <Box my={5}>\r\n        <Divider variant='fullWidth' />\r\n      </Box>\r\n      <Footer />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Home;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Button, DialogContentText } from '@material-ui/core';\r\nimport Dialog from '../common/Dialog';\r\n\r\nconst ErrorDialog = ({ error, clearAction, onClose }) => {\r\n  const [displayedError, setDisplayedError] = useState('');\r\n\r\n  const { t } = useTranslation();\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const closeDialog = () => {\r\n    onClose ? onClose() : dispatch(clearAction(null));\r\n  };\r\n\r\n  const getTitle = () => (displayedError ? t(`errors.${displayedError}`) : '');\r\n\r\n  const getText = () => {\r\n    const createErrors = ['create', 'invoice', 'counterparty'];\r\n    const translationKey = () => {\r\n      switch (displayedError) {\r\n        case createErrors.includes(displayedError):\r\n          return 'create';\r\n        case 'createInvoice':\r\n          return 'createInvoice';\r\n        case 'delete':\r\n          return 'delete';\r\n        case 'details':\r\n          return 'details';\r\n        default:\r\n          return 'serverDown';\r\n      }\r\n    };\r\n\r\n    return t(`errors.text.${translationKey()}`);\r\n  };\r\n\r\n  useEffect(() => {\r\n    error && setDisplayedError(error);\r\n  }, [error]);\r\n\r\n  return (\r\n    <Dialog\r\n      open={Boolean(error)}\r\n      onClose={closeDialog}\r\n      title={getTitle()}\r\n      content={<DialogContentText>{getText()}</DialogContentText>}\r\n      actions={\r\n        <Button onClick={closeDialog} color='primary'>\r\n          {t('cancel')}\r\n        </Button>\r\n      }\r\n    />\r\n  );\r\n};\r\n\r\nexport default ErrorDialog;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { Backdrop, CircularProgress } from '@material-ui/core';\r\n\r\nconst LoadingBackdrop = ({ actionPending, className }) => {\r\n  const [open, setOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    let id = null;\r\n    if (actionPending !== open) {\r\n      if (actionPending) setOpen(true);\r\n      else {\r\n        id = setTimeout(() => {\r\n          setOpen(actionPending);\r\n        }, 1000);\r\n      }\r\n    }\r\n    return () => id && clearTimeout(id);\r\n    // eslint-disable-next-line\r\n  }, [actionPending]);\r\n\r\n  return (\r\n    <Backdrop open={open} transitionDuration={500} className={className}>\r\n      <CircularProgress />\r\n    </Backdrop>\r\n  );\r\n};\r\n\r\nexport default LoadingBackdrop;\r\n","import React from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Typography } from '@material-ui/core';\r\n\r\nconst Header = () => {\r\n  const { t } = useTranslation();\r\n\r\n  const location = useLocation();\r\n\r\n  const headerText = t(`invoices.header.${location.pathname.split('/')[2]}`);\r\n\r\n  return <Typography variant='h5'>{headerText}</Typography>;\r\n};\r\n\r\nexport default Header;\r\n","import React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { TextValidator } from 'react-material-ui-form-validator';\r\n\r\nconst EditorTextField = ({ validators, ...props }) => {\r\n  const { t } = useTranslation();\r\n\r\n  const errorMessages = validators && validators.map(name => t(`validation.${name}`));\r\n\r\n  return (\r\n    <TextValidator\r\n      variant='outlined'\r\n      fullWidth\r\n      validators={validators}\r\n      errorMessages={errorMessages}\r\n      {...props}\r\n    />\r\n  );\r\n};\r\n\r\nexport default EditorTextField;\r\n","import React from 'react';\r\nimport { Autocomplete as MaterialAutocomplete, createFilterOptions } from '@material-ui/lab';\r\nimport EditorTextField from './EditorTextField';\r\n\r\nconst Autocomplete = ({ textProps, ...props }) => {\r\n  const filterOptions = createFilterOptions({\r\n    limit: 5\r\n  });\r\n\r\n  return (\r\n    <MaterialAutocomplete\r\n      freeSolo\r\n      fullWidth\r\n      filterOptions={filterOptions}\r\n      renderInput={props => <EditorTextField {...props} {...textProps} variant='outlined' />}\r\n      {...props}\r\n    />\r\n  );\r\n};\r\n\r\nexport default Autocomplete;\r\n","import React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport DateFnsUtils from '@date-io/date-fns';\r\nimport * as locales from 'date-fns/locale';\r\nimport { KeyboardDatePicker, MuiPickersUtilsProvider } from '@material-ui/pickers';\r\n\r\nconst DatePicker = ({ onChange, minDate, ...props }) => {\r\n  const { i18n } = useTranslation();\r\n\r\n  return (\r\n    <MuiPickersUtilsProvider utils={DateFnsUtils} locale={locales[i18n.language]}>\r\n      <KeyboardDatePicker\r\n        disablePast={!Boolean(minDate)}\r\n        variant='inline'\r\n        inputVariant='outlined'\r\n        fullWidth\r\n        format='dd/MM/yyyy'\r\n        onChange={(date, _) => onChange(new Date(date).toISOString())}\r\n        {...(minDate && { minDate: minDate })}\r\n        {...props}\r\n      />\r\n    </MuiPickersUtilsProvider>\r\n  );\r\n};\r\n\r\nexport default DatePicker;\r\n","import { Box, IconButton } from '@material-ui/core';\r\nimport { Delete } from '@material-ui/icons';\r\nimport React from 'react';\r\n\r\nconst ClearButton = ({ onClick }) => {\r\n  return (\r\n    <Box ml={1}>\r\n      <IconButton onClick={onClick} size='small'>\r\n        <Delete color='primary' />\r\n      </IconButton>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default ClearButton;\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { useTranslation } from 'react-i18next';\r\nimport Autocomplete from '../Input/Autocomplete';\r\nimport DatePicker from '../Input/DatePicker';\r\nimport EditorTextField from '../Input/EditorTextField';\r\nimport ClearButton from '../Input/ClearButton';\r\n\r\nconst useFields = ({ update, select, editorData }) => {\r\n  const { t } = useTranslation();\r\n\r\n  const employees = useSelector(state => state.invoice.employeeData);\r\n\r\n  const employee = editorData.employee;\r\n\r\n  const getAutocomplete = (property, label) => (\r\n    <Autocomplete\r\n      disabled={Boolean(employee?.id)}\r\n      options={employees}\r\n      getOptionLabel={employee => employee[property]}\r\n      onChange={(_, value, reason) => reason === 'select-option' && select(value)}\r\n      inputValue={employee?.[property] || ''}\r\n      textProps={{\r\n        label: label,\r\n        validators: [property === 'fullName' ? 'required' : 'phoneNumber'],\r\n        onChange: update(property, true),\r\n        value: employee?.[property]\r\n      }}\r\n    />\r\n  );\r\n\r\n  return {\r\n    Number: (\r\n      <EditorTextField\r\n        label={t('invoices.number')}\r\n        validators={['required']}\r\n        onChange={update('number')}\r\n        value={editorData.number}\r\n      />\r\n    ),\r\n    Date: (\r\n      <DatePicker\r\n        minDate={Boolean(editorData.id) && new Date(editorData.date)}\r\n        label={t('invoices.date')}\r\n        onChange={update('date')}\r\n        value={editorData.date}\r\n      />\r\n    ),\r\n    FullName: getAutocomplete('fullName', t('employees.fullName')),\r\n    PhoneNumber: getAutocomplete('phoneNumber', t('employees.phoneNumber')),\r\n    Clear: <ClearButton onClick={() => select(null)} />\r\n  };\r\n};\r\n\r\nexport default useFields;\r\n","import format from 'date-fns/format';\r\n\r\nexport const initialEditorData = {\r\n  type: null,\r\n  number: '',\r\n  date: new Date().toISOString(),\r\n  employee: null,\r\n  counterparty: null,\r\n  items: [],\r\n  paymentType: null,\r\n  paymentDeadline: null\r\n};\r\n\r\nexport const getType = id => {\r\n  return invoiceTypes.findIndex(x => x.id === id);\r\n};\r\n\r\nexport const getId = type => {\r\n  return invoiceTypes[type].id;\r\n};\r\n\r\nexport const getNumber = (type, invoiceDate, invoices) => {\r\n  let count = 1;\r\n  const date = new Date(invoiceDate);\r\n  invoices.forEach(invoice => isEqual(type, date.getMonth(), invoice) && count++);\r\n\r\n  const symbol = invoiceTypes[type].symbol;\r\n  const index = ('' + count).padStart(4, '0');\r\n  const month = format(date, 'MM');\r\n  const year = format(date, 'yyyy');\r\n\r\n  return `${symbol} ${index}/${month}/${year}`;\r\n};\r\n\r\nconst invoiceTypes = [\r\n  { id: 'vat', symbol: 'FV' },\r\n  { id: 'proforma', symbol: 'FP' },\r\n  { id: 'receipt', symbol: 'PA' },\r\n  { id: 'corrective', symbol: 'FC' }\r\n];\r\n\r\nconst isEqual = (type, month, invoice) =>\r\n  type === invoice.type && month === new Date(invoice.date).getMonth();\r\n","import pdfMake from 'pdfmake/build/pdfmake';\r\nimport pdfFonts from 'pdfmake/build/vfs_fonts';\r\n\r\npdfMake.vfs = pdfFonts.pdfMake.vfs;\r\n\r\nexport default pdfMake;\r\n","import { format } from 'date-fns';\r\nimport { getId, getType } from '../utils/editorUtils';\r\n\r\nconst getHeaderElement = (invoice, t) => {\r\n  const { type, number, date, paymentDeadline, paymentType } = invoice;\r\n\r\n  const paymentTypes = t('invoices.paymentTypes', { returnObjects: true });\r\n\r\n  return [\r\n    {\r\n      text: t(`invoices.header.${getId(type)}`),\r\n      style: 'header',\r\n      margin: [0, 0, 0, 10]\r\n    },\r\n    {\r\n      layout: 'noBorders',\r\n      margin: [0, 0, 0, 20],\r\n      table: {\r\n        body: [\r\n          [`${t('invoices.number')}:`, number],\r\n          [`${t('invoices.date')}:`, format(new Date(date), 'dd.MM.yyyy')],\r\n          ...(type !== getType('receipt')\r\n            ? [\r\n                [`${t('invoices.deadline')}:`, format(new Date(paymentDeadline), 'dd.MM.yyyy')],\r\n                [`${t('invoices.paymentType')}:`, paymentTypes[paymentType]]\r\n              ]\r\n            : [])\r\n        ]\r\n      }\r\n    }\r\n  ];\r\n};\r\n\r\nexport default getHeaderElement;\r\n","const getCounterpartiesElement = (counterparty, companyData, t) => {\r\n  const layout = {\r\n    hLineWidth: index => {\r\n      return index === 1 ? 1 : 0;\r\n    },\r\n    vLineWidth: () => {\r\n      return 0;\r\n    }\r\n  };\r\n\r\n  return {\r\n    columns: [\r\n      {\r\n        layout: layout,\r\n        margin: [0, 0, 20, 0],\r\n        table: {\r\n          headerRows: 1,\r\n          widths: ['*'],\r\n          body: [\r\n            [{ text: t('invoices.seller'), fontSize: 14 }],\r\n            [{ text: companyData.companyName, margin: [0, 5, 0, 0] }],\r\n            [companyData.address],\r\n            [`${companyData.postalCode} ${companyData.city}`],\r\n            [`${t('counterparties.nip')}: ${companyData.nip}`]\r\n          ]\r\n        }\r\n      },\r\n      {\r\n        layout: layout,\r\n        margin: [20, 0, 0, 0],\r\n        table: {\r\n          headerRows: 1,\r\n          widths: ['*'],\r\n          body: [\r\n            [{ text: t('invoices.buyer'), fontSize: 14 }],\r\n            [{ text: counterparty.name, margin: [0, 5, 0, 0] }],\r\n            [counterparty.address],\r\n            [`${counterparty.postalCode} ${counterparty.city}`],\r\n            [`${t('counterparties.nip')}: ${counterparty.nip}`]\r\n          ]\r\n        }\r\n      }\r\n    ]\r\n  };\r\n};\r\n\r\nexport default getCounterpartiesElement;\r\n","import { getType } from \"../utils/editorUtils\";\r\n\r\nconst getItemsElement = (items, type, t) => {\r\n  const vatRateStrings = [\r\n    '23%',\r\n    '8%',\r\n    '5%',\r\n    '0%',\r\n    t('products.vatExempt'),\r\n    t('products.vatNotApplicable')\r\n  ];\r\n\r\n  const pdfItems = getItems(items, vatRateStrings);\r\n\r\n  return {\r\n    layout: {\r\n      fillColor: rowIndex => {\r\n        return rowIndex === 0 ? '#EEEEEE' : null;\r\n      }\r\n    },\r\n    margin: [0, type === getType('receipt') ? 0 : 40, 0, 0],\r\n    table: {\r\n      headerRows: 1,\r\n      widths: ['auto', '*', 'auto', 'auto', 'auto', 'auto', 'auto', 'auto', 'auto'],\r\n      body: [\r\n        [\r\n          t('products.ordinal'),\r\n          t('products.name'),\r\n          t('products.unit'),\r\n          t('products.count'),\r\n          t('products.netPrice'),\r\n          'VAT',\r\n          t('invoices.netValue'),\r\n          t('invoices.vatValue'),\r\n          t('invoices.grossValue')\r\n        ],\r\n        ...pdfItems\r\n      ]\r\n    }\r\n  };\r\n};\r\n\r\nconst getItems = (items, vatRateStrings) => {\r\n  return items.map((item, index) => {\r\n    const { name, unit, count, netPrice, grossPrice, vatRate } = item;\r\n    const netValue = netPrice * count;\r\n    const grossValue = grossPrice * count;\r\n    const vatValue = grossValue - netValue;\r\n\r\n    return [\r\n      index + 1,\r\n      name,\r\n      unit,\r\n      count,\r\n      netPrice.toFixed(2),\r\n      vatRateStrings[vatRate],\r\n      netValue.toFixed(2),\r\n      vatValue.toFixed(2),\r\n      grossValue.toFixed(2)\r\n    ];\r\n  });\r\n};\r\n\r\nexport default getItemsElement;\r\n","const getSummaryElement = (invoice, t) => {\r\n  const vatRateStrings = [\r\n    '23%',\r\n    '8%',\r\n    '5%',\r\n    '0%',\r\n    t('products.vatExempt'),\r\n    t('products.vatNotApplicable')\r\n  ];\r\n\r\n  const netTotal = invoice.netTotal.toFixed(2);\r\n  const grossTotal = invoice.grossTotal.toFixed(2);\r\n  const vatTotal = (invoice.grossTotal - invoice.netTotal).toFixed(2);\r\n\r\n  const summaryItems = getSummaryItems(invoice.items, vatRateStrings);\r\n\r\n  return [\r\n    {\r\n      columns: [\r\n        { width: '*', text: '' },\r\n        {\r\n          width: 'auto',\r\n          layout: {\r\n            fillColor: rowIndex => {\r\n              return rowIndex === 0 || rowIndex === 3 ? '#EEEEEE' : null;\r\n            }\r\n          },\r\n          margin: [0, 40, 0, 0],\r\n          table: {\r\n            headerRows: 1,\r\n            widths: ['auto', 'auto', 'auto', 'auto'],\r\n            body: [\r\n              ['VAT', t('invoices.netValue'), t('invoices.vatValue'), t('invoices.grossValue')],\r\n              ...summaryItems,\r\n              [\r\n                { text: t('invoices.total'), bold: true },\r\n                { text: netTotal, bold: true },\r\n                { text: vatTotal, bold: true },\r\n                { text: grossTotal, bold: true }\r\n              ]\r\n            ]\r\n          }\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      style: 'summary',\r\n      layout: 'noBorders',\r\n      margin: [0, 40, 0, 0],\r\n      table: {\r\n        headerRows: 1,\r\n        keepWithHeaderRows: true,\r\n        body: [\r\n          [t('invoices.total'), `${invoice.grossTotal.toFixed(2)} zł`],\r\n          [\r\n            { text: t('invoices.amountDue'), bold: true },\r\n            { text: `${invoice.grossTotal.toFixed(2)} zł`, bold: true }\r\n          ]\r\n        ]\r\n      }\r\n    }\r\n  ];\r\n};\r\n\r\nconst getSummaryItems = (items, vatRateStrings) => {\r\n  const vatRates = items.reduce((prev, { vatRate }) => {\r\n    return !prev.includes(vatRate) ? [...prev, vatRate] : prev;\r\n  }, []);\r\n\r\n  vatRates.sort((a, b) => a - b);\r\n\r\n  return vatRates.map(vatRate => {\r\n    const netValue = getPropertyTotal('netPrice', vatRate, items);\r\n    const grossValue = getPropertyTotal('grossPrice', vatRate, items);\r\n    const vatValue = grossValue - netValue;\r\n\r\n    return [\r\n      vatRateStrings[vatRate],\r\n      netValue.toFixed(2),\r\n      vatValue.toFixed(2),\r\n      grossValue.toFixed(2)\r\n    ];\r\n  });\r\n};\r\n\r\nconst getPropertyTotal = (property, vatRate, items) =>\r\n  items.reduce((prev, curr) => {\r\n    return curr.vatRate === vatRate ? prev + Number(curr[property]) * Number(curr.count) : prev;\r\n  }, 0);\r\n\r\nexport default getSummaryElement;\r\n","const getFooterElement = (fullName, t) => (currentPage, pageCount) => {\r\n  return (\r\n    currentPage === pageCount && [\r\n      {\r\n        margin: [80, 40],\r\n        columns: [\r\n          {\r\n            margin: [0, 0, 20, 0],\r\n            table: {\r\n              widths: ['*'],\r\n              body: [\r\n                [\r\n                  {\r\n                    text: fullName,\r\n                    alignment: 'center',\r\n                    border: [false, false, false, false]\r\n                  }\r\n                ],\r\n                [\r\n                  {\r\n                    text: t('invoices.issuerSignature'),\r\n                    alignment: 'center',\r\n                    border: [false, true, false, false]\r\n                  }\r\n                ]\r\n              ]\r\n            }\r\n          },\r\n          {\r\n            margin: [20, 0, 0, 0],\r\n            table: {\r\n              widths: ['*'],\r\n              body: [\r\n                [{ text: ' ', alignment: 'center', border: [false, false, false, false] }],\r\n                [\r\n                  {\r\n                    text: t('invoices.recipientSignature'),\r\n                    alignment: 'center',\r\n                    border: [false, true, false, false]\r\n                  }\r\n                ]\r\n              ]\r\n            }\r\n          }\r\n        ]\r\n      }\r\n    ]\r\n  );\r\n};\r\n\r\nexport default getFooterElement;\r\n","import getHeaderElement from './headerElement';\r\nimport getCounterpartiesElement from './counterpartiesElement';\r\nimport getItemsElement from './itemsElement';\r\nimport getSummaryElement from './summaryElement';\r\nimport getFooterElement from './footerElement';\r\nimport { getType } from '../utils/editorUtils';\r\n\r\nconst getDocumentDefinition = (invoice, companyData, t) => {\r\n  const { employee, counterparty, items, type } = invoice;\r\n\r\n  const counterpartiesElement = () => {\r\n    if (type !== getType('receipt'))\r\n      return getCounterpartiesElement(counterparty, companyData, t);\r\n  };\r\n\r\n  return {\r\n    content: [\r\n      ...getHeaderElement(invoice, t),\r\n      counterpartiesElement(),\r\n      getItemsElement(items, type, t),\r\n      ...getSummaryElement(invoice, t)\r\n    ],\r\n    footer: getFooterElement(employee.fullName, t),\r\n    pageMargins: [40, 40, 40, 100],\r\n    defaultStyle: {\r\n      fontSize: 10\r\n    },\r\n    styles: {\r\n      header: {\r\n        alignment: 'left',\r\n        fontSize: 18,\r\n        bold: true\r\n      },\r\n      counterpartiesHeader: {\r\n        fontSize: 14\r\n      },\r\n      summary: {\r\n        fontSize: 12\r\n      }\r\n    }\r\n  };\r\n};\r\n\r\nexport default getDocumentDefinition;\r\n","export const filterProperties = (oldData, newData) => {\r\n  const filteredKeys = Object.keys(newData).filter(key => newData[key] !== oldData[key]);\r\n\r\n  if (filteredKeys.length === 0) return;\r\n\r\n  return filteredKeys.reduce((prev, key) => ({ ...prev, [key]: newData[key] }), {});\r\n};\r\n\r\nexport const getColumnCellStyle = width => {\r\n  return {\r\n    cellStyle: {\r\n      minWidth: width,\r\n      maxWidth: width\r\n    },\r\n    headerStyle: {\r\n      minWidth: width,\r\n      maxWidth: width\r\n    }\r\n  };\r\n};\r\n","import apiHandler from '../apis/apiHandler';\r\nimport webInvoicerApi from '../apis/webInvoicerApi';\r\nimport i18n from '../i18n';\r\nimport pdfMake from '../pdfMake';\r\nimport getDocumentDefinition from '../pdf/documentDefinition';\r\nimport { filterProperties } from './dataUtils';\r\nimport { getType } from './editorUtils';\r\n\r\nconst useInvoicePayloadCreators = () => {\r\n  const createPayload = invoice => async () => {\r\n    const { employee, counterparty, items, ...invoiceData } = invoice;\r\n\r\n    const employeeId = await getEmployeeId(employee);\r\n    const counterpartyId = await getCounterpartyId(counterparty, invoiceData.type);\r\n\r\n    const invoiceId = (\r\n      await handleAction({\r\n        method: () =>\r\n          webInvoicerApi().post('Invoices', { ...invoiceData, employeeId, counterpartyId }),\r\n        errorData: 'invoice'\r\n      })\r\n    ).id;\r\n\r\n    await addNewItems(invoiceId, items);\r\n  };\r\n\r\n  const getPayload = async () => {\r\n    const employees = await handleAction({\r\n      method: () => webInvoicerApi().get('Employees'),\r\n      errorData: 'employees'\r\n    });\r\n\r\n    const counterparties = await handleAction({\r\n      method: () => webInvoicerApi().get('Counterparties'),\r\n      errorData: 'counterparties'\r\n    });\r\n\r\n    let invoices = await handleAction({\r\n      method: () => webInvoicerApi().get('Invoices'),\r\n      errorData: 'invoices'\r\n    });\r\n\r\n    invoices = invoices.map(invoice => {\r\n      const { employeeId, counterpartyId, ...rest } = invoice;\r\n      return {\r\n        ...rest,\r\n        employee: employees.find(x => x.id === employeeId),\r\n        counterparty: counterparties.find(x => x.id === counterpartyId)\r\n      };\r\n    });\r\n\r\n    return { invoices, employees, counterparties };\r\n  };\r\n\r\n  const updatePayload = (oldInvoice, invoice) => async () => {\r\n    const { id, type, employee, counterparty, items, ...invoiceData } = invoice;\r\n    const oldInvoiceData = extractInvoice(oldInvoice);\r\n\r\n    const employeeId = await getEmployeeId(employee);\r\n    const counterpartyId = await getCounterpartyId(counterparty, type);\r\n\r\n    const updateData = filterProperties(oldInvoiceData, {\r\n      ...invoiceData,\r\n      employeeId,\r\n      counterpartyId\r\n    });\r\n\r\n    updateData &&\r\n      (await handleAction({\r\n        method: () => webInvoicerApi().put('Invoices', { id, type, ...updateData }),\r\n        errorData: 'invoice'\r\n      }));\r\n\r\n    await updateItems(invoice.id, oldInvoice.items, items);\r\n  };\r\n\r\n  const exportPayload = (invoice, companyData) => async () => {\r\n    const items = await handleAction({\r\n      method: () => webInvoicerApi().get(`InvoiceItems/${invoice.id}`),\r\n      errorData: 'export'\r\n    });\r\n\r\n    const mappedItems = [];\r\n    for (const item of items) {\r\n      const productData = await handleAction({\r\n        method: () => webInvoicerApi().get(`Products/${item.id}`),\r\n        errorData: 'export'\r\n      });\r\n\r\n      mappedItems.push({ ...item, ...productData });\r\n    }\r\n\r\n    pdfMake\r\n      .createPdf(\r\n        getDocumentDefinition({ ...invoice, items: mappedItems }, companyData, i18n.t.bind(i18n))\r\n      )\r\n      .download(`${invoice.number}.pdf`);\r\n  };\r\n\r\n  const getEmployeeId = async employee => {\r\n    if (!employee.id) {\r\n      return (\r\n        await handleAction({\r\n          method: () => webInvoicerApi().post('Employees', employee),\r\n          errorData: 'employee'\r\n        })\r\n      ).id;\r\n    } else return employee.id;\r\n  };\r\n\r\n  const getCounterpartyId = async (counterparty, type) => {\r\n    if (!counterparty?.id && type !== getType('receipt')) {\r\n      return (\r\n        await handleAction({\r\n          method: () => webInvoicerApi().post('Counterparties', counterparty),\r\n          errorData: 'counterparty'\r\n        })\r\n      ).id;\r\n    } else return counterparty?.id;\r\n  };\r\n\r\n  const addNewItems = async (invoiceId, items) => {\r\n    for (let index = 0; index < items.length; index++) {\r\n      const { count, unit, editorId, ...productData } = items[index];\r\n      let productId = items[index].id;\r\n\r\n      if (!productId) {\r\n        productId = (\r\n          await handleAction({\r\n            method: () => webInvoicerApi().post('Products', productData),\r\n            errorData: 'product'\r\n          })\r\n        ).id;\r\n      }\r\n\r\n      await handleAction({\r\n        method: () =>\r\n          webInvoicerApi().post('InvoiceItems', { invoiceId, productId, index, count, unit }),\r\n        errorData: 'item'\r\n      });\r\n    }\r\n  };\r\n\r\n  const updateItems = async (invoiceId, oldItems, newItems) => {\r\n    await addNewItems(\r\n      invoiceId,\r\n      newItems.filter(x => x.itemId === undefined)\r\n    );\r\n\r\n    for (const item of oldItems) {\r\n      const newItemIndex = newItems.findIndex(x => x.itemId === item.itemId);\r\n\r\n      if (newItemIndex !== -1) {\r\n        const newItem = { ...extractItem(newItems[newItemIndex]), index: newItemIndex };\r\n        const updateData = filterProperties(extractItem(item), newItem);\r\n\r\n        updateData &&\r\n          (await handleAction({\r\n            method: () =>\r\n              webInvoicerApi().put('InvoiceItems', { ...updateData, itemId: item.itemId }),\r\n            errorData: 'item'\r\n          }));\r\n      } else {\r\n        await handleAction({\r\n          method: () => webInvoicerApi().delete(`InvoiceItems/${item.itemId}`),\r\n          errorData: 'item'\r\n        });\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleAction = async ({ method, errorData }) => {\r\n    const response = await apiHandler(method(), errorData);\r\n\r\n    if (response.type === 'ERROR') {\r\n      throw new Error(response.data);\r\n    }\r\n    return response.data;\r\n  };\r\n\r\n  const extractInvoice = ({ employee, counterparty, items, ...rest }) => ({\r\n    ...rest,\r\n    employeeId: employee.id,\r\n    counterpartyId: counterparty?.id\r\n  });\r\n\r\n  const extractItem = ({ id, index, count, unit }) => ({ id, index, count, unit });\r\n\r\n  return { createPayload, getPayload, updatePayload, exportPayload };\r\n};\r\n\r\nexport default useInvoicePayloadCreators;\r\n","import { createAsyncThunk, createSlice, nanoid } from '@reduxjs/toolkit';\r\nimport webInvoicerApi from '../apis/webInvoicerApi';\r\nimport apiHandler from '../apis/apiHandler';\r\nimport { initialEditorData } from '../utils/editorUtils';\r\nimport useInvoicePayloadCreators from '../utils/invoiceUtils';\r\n\r\nconst initialState = {\r\n  actionPending: false,\r\n  error: null,\r\n  invoiceData: [],\r\n  employeeData: [],\r\n  counterpartyData: [],\r\n  productData: [],\r\n  editorData: initialEditorData,\r\n  oldEditorData: null\r\n};\r\n\r\nexport const createInvoice = createAsyncThunk('invoice/create', async (invoice, { dispatch }) => {\r\n  return await handlePayloadCreator(createPayload(invoice), dispatch);\r\n});\r\n\r\nexport const getInvoices = createAsyncThunk('invoice/get', async (_, { dispatch }) => {\r\n  return await handlePayloadCreator(getPayload, dispatch);\r\n});\r\n\r\nexport const updateInvoice = createAsyncThunk(\r\n  'invoice/update',\r\n  async ({ oldInvoice, invoice }, { dispatch }) => {\r\n    return await handlePayloadCreator(updatePayload(oldInvoice, invoice), dispatch);\r\n  }\r\n);\r\n\r\nexport const deleteInvoice = createAsyncThunk('invoice/delete', async (id, { dispatch }) => {\r\n  await handleAction(\r\n    {\r\n      method: () => webInvoicerApi().delete(`Invoices/${id}`),\r\n      errorData: 'delete'\r\n    },\r\n    dispatch\r\n  );\r\n\r\n  return id;\r\n});\r\n\r\nexport const exportInvoice = createAsyncThunk(\r\n  'invoice/export',\r\n  async (invoice, { dispatch, getState }) => {\r\n    return await handlePayloadCreator(exportPayload(invoice, getState().user.userData), dispatch);\r\n  }\r\n);\r\n\r\nexport const getProducts = createAsyncThunk('invoice/getProducts', async (_, { dispatch }) => {\r\n  return await handleAction(\r\n    {\r\n      method: () => webInvoicerApi().get('Products'),\r\n      errorData: 'getProducts'\r\n    },\r\n    dispatch\r\n  );\r\n});\r\n\r\nexport const getInvoiceItems = createAsyncThunk(\r\n  'invoice/getItems',\r\n  async (id, { dispatch, getState }) => {\r\n    const items = await handleAction(\r\n      {\r\n        method: () => webInvoicerApi().get(`InvoiceItems/${id}`),\r\n        errorData: 'getInvoiceItems'\r\n      },\r\n      dispatch\r\n    );\r\n\r\n    return items.map(item => {\r\n      const products = getState().invoice.productData;\r\n      const product = products.find(x => x.id === item.id);\r\n      return { editorId: nanoid(), ...item, ...product };\r\n    });\r\n  }\r\n);\r\n\r\nconst handlePayloadCreator = async (payloadCreator, dispatch) => {\r\n  try {\r\n    dispatch(setActionPending(true));\r\n    const result = await payloadCreator();\r\n    dispatch(setActionPending(false));\r\n\r\n    return result;\r\n  } catch (error) {\r\n    dispatch(setError(error.message));\r\n    throw error;\r\n  }\r\n};\r\n\r\nconst handleAction = async ({ method, errorData }, dispatch) => {\r\n  dispatch(setActionPending(true));\r\n  const response = await apiHandler(method(), errorData);\r\n  dispatch(setActionPending(false));\r\n\r\n  if (response.type === 'ERROR') {\r\n    dispatch(setError(response.data));\r\n    throw new Error(response.data);\r\n  }\r\n  return response.data;\r\n};\r\n\r\nconst { createPayload, getPayload, updatePayload, exportPayload } = useInvoicePayloadCreators();\r\n\r\nconst invoiceSlice = createSlice({\r\n  name: 'invoice',\r\n  initialState,\r\n  reducers: {\r\n    setActionPending(state, action) {\r\n      state.actionPending = action.payload;\r\n    },\r\n    setError(state, action) {\r\n      state.actionPending = false;\r\n      state.error = action.payload;\r\n    },\r\n    setEditorData(state, action) {\r\n      state.editorData = action.payload;\r\n    },\r\n    setOldEditorData(state, action) {\r\n      state.oldEditorData = action.payload;\r\n    },\r\n    addItem(state, action) {\r\n      state.editorData.items.push(action.payload);\r\n    },\r\n    updateItem(state, action) {\r\n      const index = state.editorData.items.findIndex(x => x.editorId === action.payload.editorId);\r\n      state.editorData.items[index] = action.payload;\r\n    },\r\n    deleteItem(state, action) {\r\n      const index = state.editorData.items.findIndex(x => x.editorId === action.payload);\r\n      state.editorData.items.splice(index, 1);\r\n    }\r\n  },\r\n  extraReducers: {\r\n    [getInvoices.fulfilled]: (state, action) => {\r\n      const { invoices, employees, counterparties } = action.payload;\r\n      state.invoiceData = invoices;\r\n      state.employeeData = employees;\r\n      state.counterpartyData = counterparties;\r\n    },\r\n    [deleteInvoice.fulfilled]: (state, action) => {\r\n      state.invoiceData = state.invoiceData.filter(x => x.id !== action.payload);\r\n    },\r\n    [getProducts.fulfilled]: (state, action) => {\r\n      state.productData = action.payload;\r\n    },\r\n    [getInvoiceItems.fulfilled]: (state, action) => {\r\n      state.editorData.items = action.payload;\r\n      state.oldEditorData = { ...state.editorData };\r\n    }\r\n  }\r\n});\r\n\r\nexport const {\r\n  setActionPending,\r\n  setError,\r\n  setEditorData,\r\n  setOldEditorData,\r\n  addItem,\r\n  updateItem,\r\n  deleteItem\r\n} = invoiceSlice.actions;\r\n\r\nexport default invoiceSlice.reducer;\r\n","import { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport add from 'date-fns/add';\r\nimport useDidUpdateEffect from '../../../../../../../hooks/useDidUpdateEffect';\r\nimport { setEditorData } from '../../../../../../../slices/invoiceSlice';\r\nimport { getNumber, getType } from '../../../../../../../utils/editorUtils';\r\n\r\nconst useActions = type => {\r\n  const dispatch = useDispatch();\r\n\r\n  const editorData = useSelector(state => state.invoice.editorData);\r\n\r\n  const invoices = useSelector(state => state.invoice.invoiceData);\r\n\r\n  useEffect(() => {\r\n    editorData.id || initialize();\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  useDidUpdateEffect(() => {\r\n    setDates();\r\n  }, [editorData.date]);\r\n\r\n  const initialize = () => {\r\n    const paymentType = type === getType('receipt') ? null : 0;\r\n    dispatch(setEditorData({ ...editorData, type: type, paymentType, ...getNewDateProps() }));\r\n  };\r\n\r\n  const update = (property, isEmployee) => event => {\r\n    const value = event.target ? event.target.value : event;\r\n    isEmployee\r\n      ? dispatch(\r\n          setEditorData({ ...editorData, employee: { ...editorData.employee, [property]: value } })\r\n        )\r\n      : dispatch(setEditorData({ ...editorData, [property]: value }));\r\n  };\r\n\r\n  const select = employee => {\r\n    dispatch(setEditorData({ ...editorData, employee: employee }));\r\n  };\r\n\r\n  const setDates = () => {\r\n    dispatch(setEditorData({ ...editorData, ...getNewDateProps() }));\r\n  };\r\n\r\n  const getNewDateProps = () => {\r\n    const number = getNumber(type, editorData.date, invoices);\r\n\r\n    return {\r\n      number,\r\n      paymentDeadline:\r\n        type !== getType('receipt')\r\n          ? add(new Date(editorData.date), { days: 7 }).toISOString()\r\n          : null\r\n    };\r\n  };\r\n\r\n  return { update, select, editorData };\r\n};\r\n\r\nexport default useActions;\r\n","import React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Box, Grid, Typography } from '@material-ui/core';\r\nimport useFields from './fields';\r\nimport useActions from './actions';\r\n\r\nconst Details = ({ type }) => {\r\n  const { t } = useTranslation();\r\n\r\n  const fields = useFields(useActions(type));\r\n\r\n  return (\r\n    <>\r\n      <div className='d-flex'>\r\n        <Typography variant='h6'>{t('invoices.editor.details')}</Typography>\r\n        {fields.Clear}\r\n      </div>\r\n      <Box mt={2}>\r\n        <Grid container spacing={2}>\r\n          <Grid xs={12} sm={6} item>\r\n            {fields.Number}\r\n          </Grid>\r\n          <Grid xs={12} sm={6} item>\r\n            {fields.Date}\r\n          </Grid>\r\n          <Grid xs={6} item>\r\n            {fields.FullName}\r\n          </Grid>\r\n          <Grid xs={6} item>\r\n            {fields.PhoneNumber}\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Details;\r\n","import React from 'react';\r\nimport { Button as MaterialButton } from '@material-ui/core';\r\n\r\nconst Button = ({ label, ...props }) => {\r\n  return (\r\n    <MaterialButton variant='outlined' color='primary' size='large' {...props}>\r\n      {label}\r\n    </MaterialButton>\r\n  );\r\n};\r\n\r\nexport default Button;\r\n","export const calculateGrossPrice = (netPrice, vatRate) => {\r\n  return roundValue(netPrice * getVatRate(vatRate));\r\n};\r\n\r\nexport const calculateNetPrice = (grossPrice, vatRate) => {\r\n  return roundValue(grossPrice / getVatRate(vatRate));\r\n};\r\n\r\nexport const getPropertyTotal = (property, items) =>\r\n  items.reduce((prev, curr) => prev + Number(curr[property]) * Number(curr.count), 0) || 0;\r\n\r\nconst roundValue = value => (isNaN(value) ? undefined : Number(Math.round(value + 'e2') + 'e-2'));\r\n\r\nconst getVatRate = vatRate => {\r\n  switch (vatRate) {\r\n    case 0:\r\n      return 1.23;\r\n    case 1:\r\n      return 1.08;\r\n    case 2:\r\n      return 1.05;\r\n    default:\r\n      return 1.0;\r\n  }\r\n};\r\n","import { makeStyles } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  bottomContainer: {\r\n    display: 'flex',\r\n    flexWrap: 'wrap',\r\n    justifyContent: 'space-between',\r\n    alignItems: 'flex-start'\r\n  },\r\n  addButton: {\r\n    marginRight: theme.spacing(2),\r\n    marginBottom: theme.spacing(2)\r\n  },\r\n  summaryContainer: {\r\n    padding: theme.spacing(3),\r\n    textAlign: 'end'\r\n  }\r\n}));\r\n\r\nexport default useStyles;\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Paper, Typography } from '@material-ui/core';\r\nimport { getPropertyTotal } from '../../../../../../../utils/priceUtils';\r\nimport useStyles from './styles';\r\n\r\nconst Summary = () => {\r\n  const { t } = useTranslation();\r\n\r\n  const items = useSelector(state => state.invoice.editorData.items);\r\n\r\n  const netTotal = getPropertyTotal('netPrice', items);\r\n\r\n  const grossTotal = getPropertyTotal('grossPrice', items);\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <Paper variant='outlined' className={classes.summaryContainer}>\r\n      <Typography variant='body1'>\r\n        {t('invoices.editor.netTotal', { sum: netTotal.toFixed(2) })}\r\n      </Typography>\r\n      <Typography variant='body1'>\r\n        {t('invoices.editor.vatTotal', { sum: (grossTotal - netTotal).toFixed(2) })}\r\n      </Typography>\r\n      <Typography variant='body1' color='primary'>\r\n        {t('invoices.editor.grossTotal', { sum: grossTotal.toFixed(2) })}\r\n      </Typography>\r\n    </Paper>\r\n  );\r\n};\r\n\r\nexport default Summary;\r\n","import { useDispatch } from 'react-redux';\r\nimport { unwrapResult } from '@reduxjs/toolkit';\r\n\r\nconst useHandleAction = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const handleAction = async ({ action, onSuccess, rejectOnError = false }) => {\r\n    await dispatch(action)\r\n      .then(unwrapResult)\r\n      .then(result => onSuccess && onSuccess(result))\r\n      .catch(_ => {\r\n        if (rejectOnError) throw new Error();\r\n      });\r\n  };\r\n\r\n  return handleAction;\r\n};\r\n\r\nexport default useHandleAction;\r\n","import { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { nanoid } from '@reduxjs/toolkit';\r\nimport {\r\n  addItem,\r\n  updateItem,\r\n  deleteItem,\r\n  getInvoiceItems\r\n} from '../../../../../../../slices/invoiceSlice';\r\nimport { getProducts } from '../../../../../../../slices/invoiceSlice';\r\nimport useHandleAction from '../../../../../../../hooks/useHandleAction';\r\n\r\nconst useActions = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const handleAction = useHandleAction();\r\n\r\n  const editorData = useSelector(state => state.invoice.editorData);\r\n\r\n  const editorItems = editorData.items;\r\n\r\n  const initialItemData = () => {\r\n    return {\r\n      editorId: nanoid(),\r\n      name: '',\r\n      description: '',\r\n      count: '',\r\n      unit: '',\r\n      netPrice: '',\r\n      grossPrice: '',\r\n      vatRate: 0\r\n    };\r\n  };\r\n\r\n  useEffect(() => {\r\n    handleAction({\r\n      action: getProducts(),\r\n      onSuccess: () => editorData.id && dispatch(getInvoiceItems(editorData.id))\r\n    });\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    editorItems.length === 0 && add();\r\n    // eslint-disable-next-line\r\n  }, [editorItems]);\r\n\r\n  const add = () => {\r\n    dispatch(addItem(initialItemData()));\r\n  };\r\n\r\n  const update = (item, property) => e => {\r\n    const value = property === 'count' ? e.target.valueAsNumber : e.target.value;\r\n    dispatch(updateItem({ ...item, [property]: value }));\r\n  };\r\n\r\n  const remove = editorId => () => {\r\n    dispatch(deleteItem(editorId));\r\n  };\r\n\r\n  const select = (item, selectedItem) => {\r\n    dispatch(updateItem({ ...item, ...selectedItem }));\r\n  };\r\n\r\n  return { add, update, remove, select };\r\n};\r\n\r\nexport default useActions;\r\n","import { TextField } from '@material-ui/core';\r\nimport React from 'react';\r\n\r\nconst Picker = ({ children, ...props }) => {\r\n  return (\r\n    <TextField select variant='outlined' fullWidth {...props}>\r\n      {children}\r\n    </TextField>\r\n  );\r\n};\r\n\r\nexport default Picker;\r\n","import React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { MenuItem } from '@material-ui/core';\r\nimport Picker from '../Input/Picker';\r\n\r\nconst VatRatePicker = props => {\r\n  const { t } = useTranslation();\r\n\r\n  const vatRates = [\r\n    '23%',\r\n    '8%',\r\n    '5%',\r\n    '0%',\r\n    t('products.vatExempt'),\r\n    t('products.vatNotApplicable')\r\n  ];\r\n\r\n  return (\r\n    <Picker {...props}>\r\n      {vatRates.map((rate, index) => (\r\n        <MenuItem key={index} value={index}>\r\n          {rate}\r\n        </MenuItem>\r\n      ))}\r\n    </Picker>\r\n  );\r\n};\r\n\r\nexport default VatRatePicker;\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Box, IconButton, Typography } from '@material-ui/core';\r\nimport { Delete } from '@material-ui/icons';\r\nimport Autocomplete from '../Input/Autocomplete';\r\nimport EditorTextField from '../Input/EditorTextField';\r\nimport VatRatePicker from './VatRatePicker';\r\nimport { calculateGrossPrice, calculateNetPrice } from '../../../../../../../utils/priceUtils';\r\n\r\nconst useFields = ({ update, select, remove }) => {\r\n  const { t } = useTranslation();\r\n\r\n  const products = useSelector(state => state.invoice.productData);\r\n\r\n  const onPriceChange = (fieldName, item) => e => {\r\n    const value = e.target.valueAsNumber;\r\n    const calculatedValue =\r\n      fieldName === 'netPrice'\r\n        ? calculateGrossPrice(value, item.vatRate)\r\n        : calculateNetPrice(value, item.vatRate);\r\n\r\n    const calculatedFieldName = fieldName === 'netPrice' ? 'grossPrice' : 'netPrice';\r\n    select(item, { [fieldName]: value, [calculatedFieldName]: calculatedValue });\r\n  };\r\n\r\n  const onVatRateChange = item => e => {\r\n    const value = e.target.value;\r\n\r\n    select(item, {\r\n      vatRate: value,\r\n      grossPrice: calculateGrossPrice(item.netPrice, value)\r\n    });\r\n  };\r\n\r\n  return item => {\r\n    return {\r\n      Name: (\r\n        <Autocomplete\r\n          disabled={Boolean(item.id)}\r\n          options={products}\r\n          getOptionLabel={item => item.name}\r\n          onChange={(_, value, reason) => reason === 'select-option' && select(item, value)}\r\n          inputValue={item.name}\r\n          renderOption={({ name, netPrice }) => (\r\n            <Typography variant='body1'>{`${name} (${netPrice.toFixed(2)} zł)`}</Typography>\r\n          )}\r\n          textProps={{\r\n            label: t('products.name'),\r\n            validators: ['required'],\r\n            onChange: update(item, 'name'),\r\n            value: item.name\r\n          }}\r\n        />\r\n      ),\r\n      Description: (\r\n        <EditorTextField\r\n          disabled={Boolean(item.id)}\r\n          label={t('products.description')}\r\n          onChange={update(item, 'description')}\r\n          value={item.description}\r\n        />\r\n      ),\r\n      Count: (\r\n        <EditorTextField\r\n          label={t('products.count')}\r\n          validators={['required', 'positiveInt']}\r\n          type='number'\r\n          onChange={update(item, 'count')}\r\n          value={item.count || ''}\r\n        />\r\n      ),\r\n      Unit: (\r\n        <EditorTextField\r\n          label={t('products.unit')}\r\n          validators={['required']}\r\n          onChange={update(item, 'unit')}\r\n          value={item.unit}\r\n        />\r\n      ),\r\n      NetPrice: (\r\n        <EditorTextField\r\n          disabled={Boolean(item.id)}\r\n          label={t('products.netPrice')}\r\n          validators={['currency']}\r\n          type='number'\r\n          onChange={onPriceChange('netPrice', item)}\r\n          value={item.netPrice || ''}\r\n        />\r\n      ),\r\n      GrossPrice: (\r\n        <EditorTextField\r\n          disabled={Boolean(item.id)}\r\n          label={t('products.grossPrice')}\r\n          validators={['currency']}\r\n          type='number'\r\n          onChange={onPriceChange('grossPrice', item)}\r\n          value={item.grossPrice || ''}\r\n        />\r\n      ),\r\n      VatRate: (\r\n        <VatRatePicker\r\n          disabled={Boolean(item.id)}\r\n          label={t('products.vatRate')}\r\n          onChange={onVatRateChange(item)}\r\n          value={item.vatRate}\r\n        />\r\n      ),\r\n      Delete: (\r\n        <Box mt={0.5} ml={1} mr={-2}>\r\n          <IconButton onClick={remove(item.editorId)}>\r\n            <Delete color='primary' />\r\n          </IconButton>\r\n        </Box>\r\n      )\r\n    };\r\n  };\r\n};\r\n\r\nexport default useFields;\r\n","import { useSelector } from 'react-redux';\r\nimport useActions from './actions';\r\nimport useFields from './fields';\r\n\r\nconst useItems = () => {\r\n  const actions = useActions();\r\n\r\n  const getFields = useFields(actions);\r\n\r\n  const editorItems = useSelector(state => state.invoice.editorData.items);\r\n\r\n  const itemRows = editorItems.map(item => {\r\n    return { editorId: item.editorId, fields: getFields(item) };\r\n  });\r\n\r\n  return { actions, itemRows };\r\n};\r\n\r\nexport default useItems;\r\n","import React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Box, Divider, Grid, Typography } from '@material-ui/core';\r\nimport Button from '../Input/Button';\r\nimport Summary from './Summary';\r\nimport useItems from './useItems';\r\nimport useStyles from './styles';\r\n\r\nconst Items = () => {\r\n  const { t } = useTranslation();\r\n\r\n  const { actions, itemRows } = useItems();\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <>\r\n      <Typography variant='h6'>{t('invoices.editor.products')}</Typography>\r\n      <Box mt={2} mb={4}>\r\n        {itemRows.map(({ editorId, fields }) => (\r\n          <div key={editorId}>\r\n            <Grid container spacing={2}>\r\n              <Grid item xs={12} xl={5}>\r\n                <Grid container spacing={2}>\r\n                  <Grid item xs={12} sm={6} xl={6}>\r\n                    {fields.Name}\r\n                  </Grid>\r\n                  <Grid item xs={12} sm={6} xl={6}>\r\n                    {fields.Description}\r\n                  </Grid>\r\n                </Grid>\r\n              </Grid>\r\n              <Grid item xs={12} xl={7}>\r\n                <Grid container spacing={2}>\r\n                  <Grid item xs={6} md={2} xl={2}>\r\n                    {fields.Count}\r\n                  </Grid>\r\n                  <Grid item xs={6} md={2} xl={2}>\r\n                    {fields.Unit}\r\n                  </Grid>\r\n                  <Grid item xs={6} md={3} xl={3}>\r\n                    {fields.NetPrice}\r\n                  </Grid>\r\n                  <Grid item xs={6} md={3} xl={3}>\r\n                    {fields.GrossPrice}\r\n                  </Grid>\r\n                  <Grid item xs={6} md={2} xl={2} className='d-flex'>\r\n                    {fields.VatRate}\r\n                    {fields.Delete}\r\n                  </Grid>\r\n                </Grid>\r\n              </Grid>\r\n            </Grid>\r\n            <Box my={3}>\r\n              <Divider />\r\n            </Box>\r\n          </div>\r\n        ))}\r\n        <div className={classes.bottomContainer}>\r\n          <Button label={t('table.add')} onClick={actions.add} className={classes.addButton} />\r\n          <Summary />\r\n        </div>\r\n      </Box>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Items;\r\n","import React from 'react';\r\nimport { Box, Grid } from '@material-ui/core';\r\nimport Details from './Common/Details';\r\nimport Items from './Common/Items';\r\nimport { getType } from '../../../../../utils/editorUtils';\r\n\r\nconst Receipt = () => {\r\n  return (\r\n    <>\r\n      <Box mb={4}>\r\n        <Grid container>\r\n          <Grid item xs={12} lg={5}>\r\n            <Details type={getType('receipt')} />\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n      <Items />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Receipt;\r\n","import { useDispatch, useSelector } from 'react-redux';\r\nimport { setEditorData } from '../../../../../../../slices/invoiceSlice';\r\n\r\nconst useActions = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const editorData = useSelector(state => state.invoice.editorData);\r\n\r\n  const counterparty = editorData.counterparty;\r\n\r\n  const update = property => e => {\r\n    dispatch(\r\n      setEditorData({\r\n        ...editorData,\r\n        counterparty: { ...counterparty, [property]: e.target.value }\r\n      })\r\n    );\r\n  };\r\n\r\n  const select = counterparty => {\r\n    dispatch(setEditorData({ ...editorData, counterparty: counterparty }));\r\n  };\r\n\r\n  return { update, select, counterparty };\r\n};\r\n\r\nexport default useActions;\r\n","import React from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { useTranslation } from 'react-i18next';\r\nimport Autocomplete from '../Input/Autocomplete';\r\nimport ClearButton from '../Input/ClearButton';\r\nimport EditorTextField from '../Input/EditorTextField';\r\n\r\nconst useFields = ({ update, select, counterparty }) => {\r\n  const { t } = useTranslation();\r\n\r\n  const counterparties = useSelector(state => state.invoice.counterpartyData);\r\n\r\n  const getAutocomplete = (property, label) => (\r\n    <Autocomplete\r\n      disabled={Boolean(counterparty?.id)}\r\n      options={counterparties}\r\n      getOptionLabel={counterparty => counterparty[property]}\r\n      onChange={(_, value, reason) => reason === 'select-option' && select(value)}\r\n      inputValue={counterparty?.[property] || ''}\r\n      textProps={{\r\n        label: label,\r\n        validators: [property === 'nip' ? 'validNip' : 'required'],\r\n        onChange: update(property),\r\n        value: counterparty?.[property]\r\n      }}\r\n    />\r\n  );\r\n\r\n  return {\r\n    Name: getAutocomplete('name', t('counterparties.name')),\r\n    Nip: getAutocomplete('nip', t('counterparties.nip')),\r\n    Address: (\r\n      <EditorTextField\r\n        disabled={Boolean(counterparty?.id)}\r\n        label={t('counterparties.address')}\r\n        validators={['required']}\r\n        onChange={update('address')}\r\n        value={counterparty?.address || ''}\r\n      />\r\n    ),\r\n    PostalCode: (\r\n      <EditorTextField\r\n        disabled={Boolean(counterparty?.id)}\r\n        label={t('counterparties.postalCode')}\r\n        validators={['postalCode']}\r\n        onChange={update('postalCode')}\r\n        value={counterparty?.postalCode || ''}\r\n      />\r\n    ),\r\n    City: (\r\n      <EditorTextField\r\n        disabled={Boolean(counterparty?.id)}\r\n        label={t('counterparties.city')}\r\n        validators={['required']}\r\n        onChange={update('city')}\r\n        value={counterparty?.city || ''}\r\n      />\r\n    ),\r\n    Clear: <ClearButton onClick={() => select(null)} />\r\n  };\r\n};\r\n\r\nexport default useFields;\r\n","import React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Box, Grid, Typography } from '@material-ui/core';\r\nimport useActions from './actions';\r\nimport useFields from './fields';\r\n\r\nconst Counterparty = () => {\r\n  const { t } = useTranslation();\r\n\r\n  const fields = useFields(useActions());\r\n\r\n  return (\r\n    <>\r\n      <div className='d-flex'>\r\n        <Typography variant='h6'>{t('invoices.editor.counterparty')}</Typography>\r\n        {fields.Clear}\r\n      </div>\r\n      <Box mt={2} mb={4}>\r\n        <Grid container spacing={2}>\r\n          <Grid item xs={12} sm={8}>\r\n            {fields.Name}\r\n          </Grid>\r\n          <Grid item xs={12} sm={4}>\r\n            {fields.Nip}\r\n          </Grid>\r\n          <Grid item xs={12} sm={5}>\r\n            {fields.Address}\r\n          </Grid>\r\n          <Grid item xs={6} sm={3}>\r\n            {fields.PostalCode}\r\n          </Grid>\r\n          <Grid item xs={6} sm={4}>\r\n            {fields.City}\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Counterparty;\r\n","import { useDispatch, useSelector } from 'react-redux';\r\nimport { setEditorData } from '../../../../../../../slices/invoiceSlice';\r\n\r\nconst useActions = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const editorData = useSelector(state => state.invoice.editorData);\r\n\r\n  const update = property => event => {\r\n    const value = event.target ? event.target.value : event;\r\n    dispatch(setEditorData({ ...editorData, [property]: value }));\r\n  };\r\n\r\n  return { update, editorData };\r\n};\r\n\r\nexport default useActions;\r\n","import React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Box, Grid, MenuItem, Typography } from '@material-ui/core';\r\nimport DatePicker from '../Input/DatePicker';\r\nimport Picker from '../Input/Picker';\r\nimport useActions from './actions';\r\n\r\nconst Payment = () => {\r\n  const { t } = useTranslation();\r\n\r\n  const paymentTypes = t('invoices.paymentTypes', { returnObjects: true });\r\n\r\n  const { update, editorData } = useActions();\r\n\r\n  return (\r\n    <>\r\n      <Typography variant='h6'>{t('invoices.editor.payment')}</Typography>\r\n      <Box mt={2} mb={4}>\r\n        <Grid container spacing={2}>\r\n          <Grid item xs={12} sm={6} lg={3} xl={2}>\r\n            <Picker\r\n              label={t('invoices.paymentType')}\r\n              onChange={update('paymentType')}\r\n              value={editorData?.paymentType || 0}>\r\n              {paymentTypes.map((value, index) => (\r\n                <MenuItem key={index} value={index}>\r\n                  {value}\r\n                </MenuItem>\r\n              ))}\r\n            </Picker>\r\n          </Grid>\r\n          <Grid item xs={12} sm={6} lg={3} xl={2}>\r\n            <DatePicker\r\n              minDate={Boolean(editorData.id) && new Date(editorData.date)}\r\n              label={t('invoices.deadline')}\r\n              onChange={update('paymentDeadline')}\r\n              value={editorData?.paymentDeadline}\r\n            />\r\n          </Grid>\r\n        </Grid>\r\n      </Box>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Payment;\r\n","import React from 'react';\r\nimport { Grid } from '@material-ui/core';\r\nimport Counterparty from './Common/Counterparty';\r\nimport Details from './Common/Details';\r\nimport Payment from './Common/Payment';\r\nimport Items from './Common/Items';\r\n\r\nconst Invoice = ({ type }) => {\r\n  return (\r\n    <>\r\n      <Grid container spacing={4}>\r\n        <Grid item xs={12} lg={5}>\r\n          <Details type={type} />\r\n        </Grid>\r\n        <Grid item xs={12} lg={7}>\r\n          <Counterparty />\r\n        </Grid>\r\n      </Grid>\r\n      <Items />\r\n      <Payment />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Invoice;\r\n","import { makeStyles } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  contentContainer: {\r\n    margin: theme.spacing(3, 0)\r\n  }\r\n}));\r\n\r\nexport default useStyles;\r\n","import React from 'react';\r\nimport { Route } from 'react-router-dom';\r\nimport Receipt from './Receipt';\r\nimport Invoice from './Invoice';\r\nimport { getType } from '../../../../../utils/editorUtils';\r\nimport useStyles from './styles';\r\n\r\nconst Content = () => {\r\n  const classes = useStyles();\r\n\r\n  const getRender = type => props => <Invoice {...props} type={getType(type)} />;\r\n\r\n  return (\r\n    <div className={classes.contentContainer}>\r\n      <Route exact path='/invoices/vat' render={getRender('vat')} />\r\n      <Route exact path='/invoices/proforma' render={getRender('proforma')} />\r\n      <Route exact path='/invoices/receipt' component={Receipt} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Content;\r\n","import { makeStyles } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  backdrop: {\r\n    zIndex: theme.zIndex.drawer + 1,\r\n    [theme.breakpoints.up('lg')]: {\r\n      paddingLeft: 252\r\n    }\r\n  },\r\n  editorContainer: {\r\n    margin: theme.spacing(3, 0),\r\n    padding: theme.spacing(3)\r\n  },\r\n  footerDivider: {\r\n    margin: theme.spacing(0, -3)\r\n  },\r\n  footerContainer: {\r\n    marginTop: theme.spacing(3),\r\n    width: '100%',\r\n    display: 'flex',\r\n    justifyContent: 'flex-end'\r\n  }\r\n}));\r\n\r\nexport default useStyles;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Box, Button, Divider } from '@material-ui/core';\r\nimport SubmitButton from '../../../common/SubmitButton/SubmitButton';\r\nimport useStyles from './styles';\r\n\r\nconst Footer = () => {\r\n  const { t } = useTranslation();\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <>\r\n      <Divider className={classes.footerDivider} />\r\n      <div className={classes.footerContainer}>\r\n        <Box mr={1}>\r\n          <SubmitButton text={t('save')} />\r\n        </Box>\r\n        <Button component={Link} to='/invoices' variant='outlined' color='primary' size='large'>\r\n          {t('cancel')}\r\n        </Button>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Footer;\r\n","import { useEffect } from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport {\r\n  createInvoice,\r\n  setEditorData,\r\n  setError,\r\n  updateInvoice\r\n} from '../../../../slices/invoiceSlice';\r\nimport useHandleAction from '../../../../hooks/useHandleAction';\r\nimport { initialEditorData } from '../../../../utils/editorUtils';\r\nimport { getPropertyTotal } from '../../../../utils/priceUtils';\r\n\r\nconst useEditor = () => {\r\n  const dispatch = useDispatch();\r\n\r\n  const history = useHistory();\r\n\r\n  const handleAction = useHandleAction();\r\n\r\n  const editorData = useSelector(state => state.invoice.editorData);\r\n\r\n  const oldEditorData = useSelector(state => state.invoice.oldEditorData);\r\n\r\n  const actionPending = useSelector(state => state.invoice.actionPending);\r\n\r\n  const error = useSelector(state => state.invoice.error);\r\n\r\n  useEffect(() => {\r\n    return () => dispatch(setEditorData(initialEditorData));\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  const onErrorDialogClose = () => {\r\n    dispatch(setError(null));\r\n    if (editorData.id && (error === 'getProducts' || error === 'getInvoiceItems')) {\r\n      history.replace('/invoices');\r\n    }\r\n  };\r\n\r\n  const onSubmit = e => {\r\n    e.preventDefault();\r\n\r\n    const payload = {\r\n      ...editorData,\r\n      netTotal: getPropertyTotal('netPrice', editorData.items),\r\n      grossTotal: getPropertyTotal('grossPrice', editorData.items)\r\n    };\r\n\r\n    const action = editorData.id\r\n      ? updateInvoice({ oldInvoice: oldEditorData, invoice: payload })\r\n      : createInvoice(payload);\r\n\r\n    handleAction({ action: action, onSuccess: () => history.replace('/invoices') });\r\n  };\r\n\r\n  return { onSubmit, actionPending, error, onErrorDialogClose };\r\n};\r\n\r\nexport default useEditor;\r\n","import React from 'react';\r\nimport { Paper } from '@material-ui/core';\r\nimport ErrorDialog from '../../../common/ErrorDialog';\r\nimport ValidatorForm from '../../../common/ValidatorForm';\r\nimport LoadingBackdrop from './LoadingBackdrop';\r\nimport Header from './Header';\r\nimport Content from './Content';\r\nimport Footer from './Footer';\r\nimport useEditor from './useEditor';\r\nimport useStyles from './styles';\r\n\r\nconst Editor = () => {\r\n  const { onSubmit, actionPending, error, onErrorDialogClose } = useEditor();\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <>\r\n      <LoadingBackdrop actionPending={actionPending} className={classes.backdrop} />\r\n      <ErrorDialog error={error} onClose={onErrorDialogClose} />\r\n      <Paper className={classes.editorContainer}>\r\n        <ValidatorForm onSubmit={onSubmit} noValidate>\r\n          <Header />\r\n          <Content />\r\n          <Footer />\r\n        </ValidatorForm>\r\n      </Paper>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Editor;\r\n","import React, { forwardRef } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { AddCircle, Check, Clear, Delete, Edit } from '@material-ui/icons';\r\nimport useHandleAction from '../../../hooks/useHandleAction';\r\nimport { filterProperties } from '../../../utils/dataUtils';\r\n\r\nconst useConfig = editableConfig => {\r\n  const { t } = useTranslation();\r\n\r\n  const handleAction = useHandleAction();\r\n\r\n  const options = {\r\n    searchFieldVariant: 'outlined',\r\n    addRowPosition: 'first',\r\n    tableLayout: 'fixed',\r\n    draggable: false\r\n  };\r\n\r\n  const getIcon = (Component, iconProps) =>\r\n    forwardRef((props, ref) => <Component {...props} ref={ref} color='primary' {...iconProps} />);\r\n\r\n  const icons = {\r\n    Add: getIcon(AddCircle, { fontSize: 'large' }),\r\n    Check: getIcon(Check),\r\n    Clear: getIcon(Clear),\r\n    Delete: getIcon(Delete),\r\n    Edit: getIcon(Edit),\r\n    ResetSearch: getIcon(Clear, { style: { marginRight: -16 }, color: 'inherit' })\r\n  };\r\n\r\n  const localization = {\r\n    body: {\r\n      emptyDataSourceMessage: t('table.empty'),\r\n      addTooltip: t('table.add'),\r\n      deleteTooltip: t('table.delete'),\r\n      editTooltip: t('table.edit'),\r\n      filterRow: {\r\n        filterTooltip: t('table.filter')\r\n      },\r\n      editRow: {\r\n        deleteText: t('table.deleteText'),\r\n        cancelTooltip: t('table.cancel'),\r\n        saveTooltip: t('table.save')\r\n      }\r\n    },\r\n    header: {\r\n      actions: t('table.actions')\r\n    },\r\n    pagination: {\r\n      labelDisplayedRows: t('table.rows'),\r\n      labelRowsSelect: t('table.rowsSelect'),\r\n      labelRowsPerPage: t('table.rowsPerPage'),\r\n      firstAriaLabel: t('table.first'),\r\n      firstTooltip: t('table.first'),\r\n      previousAriaLabel: t('table.previous'),\r\n      previousTooltip: t('table.previous'),\r\n      nextAriaLabel: t('table.next'),\r\n      nextTooltip: t('table.next'),\r\n      lastAriaLabel: t('table.last'),\r\n      lastTooltip: t('table.last')\r\n    },\r\n    toolbar: {\r\n      nRowsSelected: t('table.rowsSelected'),\r\n      searchTooltip: t('table.search'),\r\n      searchPlaceholder: t('table.search')\r\n    }\r\n  };\r\n\r\n  let editable = null;\r\n\r\n  if (editableConfig) {\r\n    const { createAction, updateAction, deleteAction } = editableConfig;\r\n\r\n    editable = {\r\n      onRowAdd: newRow => handleAction({ action: createAction(newRow), rejectOnError: true }),\r\n      onRowUpdate: async (newRow, oldRow) => {\r\n        const updateData = filterProperties(oldRow, newRow);\r\n\r\n        if (updateData) {\r\n          await handleAction({\r\n            action: updateAction({ id: newRow.id, ...updateData }),\r\n            rejectOnError: true\r\n          });\r\n        }\r\n      },\r\n      onRowDelete: deletedRow =>\r\n        handleAction({ action: deleteAction(deletedRow.id), rejectOnError: true })\r\n    };\r\n  }\r\n\r\n  return { options, icons, localization, editable };\r\n};\r\n\r\nexport default useConfig;\r\n","import { makeStyles } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  tableContainer: {\r\n    margin: theme.spacing(3, 0),\r\n    width: '100%'\r\n  }\r\n}));\r\n\r\nexport default useStyles;\r\n","import React from 'react';\r\nimport MaterialTable from 'material-table';\r\nimport useConfig from './config';\r\nimport useStyles from './styles';\r\n\r\nconst DataTable = ({ data, editableConfig = null, ...props }) => {\r\n  const { options, icons, localization, editable } = useConfig(editableConfig);\r\n\r\n  const classes = useStyles();\r\n\r\n  return (\r\n    <div className={classes.tableContainer}>\r\n      <MaterialTable\r\n        data={data}\r\n        options={options}\r\n        icons={icons}\r\n        localization={localization}\r\n        editable={editable}\r\n        {...props}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default DataTable;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Menu, MenuItem } from '@material-ui/core';\r\nimport { exportInvoice, setEditorData } from '../../../../slices/invoiceSlice';\r\nimport { getId } from '../../../../utils/editorUtils';\r\n\r\nconst ActionMenu = ({ anchor, menuData, closeMenu, openDeleteDialog }) => {\r\n  const { t } = useTranslation();\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const editorData = useSelector(state => state.invoice.editorData);\r\n\r\n  const { id, type } = menuData || {};\r\n\r\n  const handleEdit = () => {\r\n    const { tableData, ...data } = menuData;\r\n    dispatch(setEditorData({ ...editorData, ...data }));\r\n  };\r\n\r\n  const handleDelete = () => {\r\n    closeMenu();\r\n    openDeleteDialog(id);\r\n  };\r\n\r\n  const handleExport = () => {\r\n    closeMenu();\r\n    dispatch(exportInvoice(menuData));\r\n  };\r\n\r\n  const editLink = type !== undefined && `/invoices/${getId(type)}`;\r\n\r\n  return (\r\n    <Menu anchorEl={anchor} open={Boolean(anchor)} onClose={closeMenu}>\r\n      <MenuItem component={Link} to={editLink} onClick={handleEdit}>\r\n        {t('table.edit')}\r\n      </MenuItem>\r\n      <MenuItem onClick={handleDelete}>{t('table.delete')}</MenuItem>\r\n      <MenuItem onClick={handleExport}>{t('table.export')}</MenuItem>\r\n    </Menu>\r\n  );\r\n};\r\n\r\nexport default ActionMenu;\r\n","import React from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Menu, MenuItem } from '@material-ui/core';\r\nimport { setError } from '../../../../slices/invoiceSlice';\r\n\r\nconst CreateMenu = ({ anchor, closeMenu }) => {\r\n  const { t } = useTranslation();\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const history = useHistory();\r\n\r\n  const options = t('invoices.options', { returnObjects: true });\r\n\r\n  const userData = useSelector(state => state.user.userData);\r\n\r\n  const handleCreate = id => () => {\r\n    if (id !== 'receipt' && userData.nip === null) {\r\n      closeMenu();\r\n      dispatch(setError('createInvoice'));\r\n      return;\r\n    }\r\n    history.replace(`/invoices/${id}`);\r\n  };\r\n\r\n  return (\r\n    <Menu anchorEl={anchor} open={Boolean(anchor)} onClose={closeMenu}>\r\n      {options.map((option, index) => (\r\n        <MenuItem key={index} onClick={handleCreate(option.id)}>\r\n          {option.label}\r\n        </MenuItem>\r\n      ))}\r\n    </Menu>\r\n  );\r\n};\r\n\r\nexport default CreateMenu;\r\n","import React from 'react';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Button, DialogContentText } from '@material-ui/core';\r\nimport Dialog from '../../../common/Dialog';\r\nimport { deleteInvoice } from '../../../../slices/invoiceSlice';\r\n\r\nconst DeleteDialog = ({ open, onClose, id }) => {\r\n  const { t } = useTranslation();\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const deleteRecord = () => {\r\n    dispatch(deleteInvoice(id));\r\n    onClose();\r\n  };\r\n\r\n  return (\r\n    <Dialog\r\n      open={open}\r\n      onClose={onClose}\r\n      title={t('table.delete')}\r\n      content={<DialogContentText>{t('table.deleteText')}</DialogContentText>}\r\n      actions={\r\n        <>\r\n          <Button onClick={deleteRecord} color='primary'>\r\n            {t('table.delete')}\r\n          </Button>\r\n          <Button onClick={onClose} color='primary'>\r\n            {t('table.cancel')}\r\n          </Button>\r\n        </>\r\n      }\r\n    />\r\n  );\r\n};\r\n\r\nexport default DeleteDialog;\r\n","import React, { forwardRef } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { AddCircle, MoreHoriz } from '@material-ui/icons';\r\nimport useDropdownMenu from '../../../../hooks/useDropdownMenu';\r\nimport useDialog from '../../../../hooks/useDialog';\r\n\r\nconst useConfig = () => {\r\n  const { t } = useTranslation();\r\n\r\n  const dialog = useDialog();\r\n\r\n  const createMenu = useDropdownMenu();\r\n\r\n  const actionMenu = useDropdownMenu();\r\n\r\n  const currencySettings = {\r\n    type: 'currency',\r\n    align: 'left',\r\n    currencySetting: {\r\n      locale: 'pl',\r\n      currencyCode: 'PLN'\r\n    }\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: t('invoices.date'),\r\n      field: 'date',\r\n      type: 'date',\r\n      width: 190\r\n    },\r\n    {\r\n      title: t('invoices.number'),\r\n      field: 'number',\r\n      width: 190\r\n    },\r\n    {\r\n      title: t('invoices.counterparty'),\r\n      field: 'counterparty.name',\r\n      width: 190\r\n    },\r\n    {\r\n      title: t('invoices.netTotal'),\r\n      field: 'netTotal',\r\n      ...currencySettings,\r\n      width: 190\r\n    },\r\n    {\r\n      title: t('invoices.grossTotal'),\r\n      field: 'grossTotal',\r\n      ...currencySettings,\r\n      width: 190\r\n    },\r\n    {\r\n      title: t('invoices.issuer'),\r\n      field: 'employee.fullName',\r\n      width: 190\r\n    }\r\n  ];\r\n\r\n  const getIcon = (Component, iconProps) =>\r\n    forwardRef((props, ref) => <Component {...props} ref={ref} color='primary' {...iconProps} />);\r\n\r\n  const actions = [\r\n    {\r\n      icon: getIcon(AddCircle, { fontSize: 'large' }),\r\n      tooltip: t('table.add'),\r\n      isFreeAction: true,\r\n      onClick: createMenu.openMenu\r\n    },\r\n    {\r\n      icon: getIcon(MoreHoriz),\r\n      tooltip: t('table.more'),\r\n      onClick: (event, rowData) => actionMenu.openMenu(event, rowData)\r\n    }\r\n  ];\r\n\r\n  return { columns, actions, dialog, createMenu, actionMenu };\r\n};\r\n\r\nexport default useConfig;\r\n","import React, { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useTranslation } from 'react-i18next';\r\nimport DataTable from '../../../common/DataTable';\r\nimport ActionMenu from './ActionMenu';\r\nimport CreateMenu from './CreateMenu';\r\nimport DeleteDialog from './DeleteDialog';\r\nimport ErrorDialog from '../../../common/ErrorDialog';\r\nimport { getInvoices, setError } from '../../../../slices/invoiceSlice';\r\nimport useConfig from './config';\r\n\r\nconst InvoiceTable = () => {\r\n  const { t } = useTranslation();\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const invoices = useSelector(state => state.invoice.invoiceData);\r\n\r\n  const actionPending = useSelector(state => state.invoice.actionPending);\r\n\r\n  const error = useSelector(state => state.invoice.error);\r\n\r\n  const { columns, actions, dialog, createMenu, actionMenu } = useConfig();\r\n\r\n  useEffect(() => {\r\n    dispatch(getInvoices());\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <ErrorDialog error={error} clearAction={setError} />\r\n      <CreateMenu anchor={createMenu.anchor} closeMenu={createMenu.closeMenu} />\r\n      <ActionMenu\r\n        anchor={actionMenu.anchor}\r\n        menuData={actionMenu.menuData}\r\n        closeMenu={actionMenu.closeMenu}\r\n        openDeleteDialog={dialog.openDialog}\r\n      />\r\n      <DeleteDialog\r\n        open={dialog.isDialogOpen}\r\n        onClose={dialog.closeDialog}\r\n        id={dialog.dialogData}\r\n      />\r\n      <DataTable\r\n        title={t('invoices.title')}\r\n        isLoading={actionPending}\r\n        data={invoices}\r\n        columns={columns}\r\n        actions={actions}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default InvoiceTable;\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { Box, Button, Typography } from '@material-ui/core';\r\n\r\nconst NotFound = () => {\r\n  const { t } = useTranslation();\r\n\r\n  const isLoggedIn = useSelector(state => state.user.isLoggedIn);\r\n\r\n  return (\r\n    <Box mt={3} className='text-center'>\r\n      <Typography variant='h1' color='primary'>\r\n        404\r\n      </Typography>\r\n      <Typography variant='h2'>{t('notFound.header')}</Typography>\r\n      <Box my={2}>\r\n        <Typography variant='h6' color='textSecondary'>\r\n          {t('notFound.description')}\r\n        </Typography>\r\n      </Box>\r\n      <Button\r\n        component={Link}\r\n        to={isLoggedIn ? '/invoices' : '/'}\r\n        variant='contained'\r\n        color='primary'>\r\n        {t('notFound.button')}\r\n      </Button>\r\n    </Box>\r\n  );\r\n};\r\n\r\nexport default NotFound;\r\n","import React from 'react';\r\nimport { Route, Switch } from 'react-router-dom';\r\nimport Editor from './Editor';\r\nimport InvoiceTable from './InvoiceTable';\r\nimport NotFound from '../NotFound';\r\n\r\nconst Invoices = () => {\r\n  const validEditorPaths = ['/invoices/vat', '/invoices/proforma', '/invoices/receipt'];\r\n\r\n  return (\r\n    <Switch>\r\n      <Route exact path='/invoices' component={InvoiceTable} />\r\n      <Route exact path={validEditorPaths} component={Editor} />\r\n      <Route component={NotFound} />\r\n    </Switch>\r\n  );\r\n};\r\n\r\nexport default Invoices;\r\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\r\nimport webInvoicerApi from '../apis/webInvoicerApi';\r\nimport apiHandler from '../apis/apiHandler';\r\n\r\nconst initialState = {\r\n  actionPending: false,\r\n  error: null,\r\n  productData: []\r\n};\r\n\r\nexport const createProduct = createAsyncThunk('product/create', async (product, { dispatch }) => {\r\n  return await handleAction(\r\n    {\r\n      method: () => webInvoicerApi().post('Products', product),\r\n      errorData: 'create'\r\n    },\r\n    dispatch\r\n  );\r\n});\r\n\r\nexport const getProducts = createAsyncThunk('product/get', async (_, { dispatch }) => {\r\n  return await handleAction(\r\n    {\r\n      method: () => webInvoicerApi().get('Products'),\r\n      errorData: 'get'\r\n    },\r\n    dispatch\r\n  );\r\n});\r\n\r\nexport const updateProduct = createAsyncThunk('product/update', async (product, { dispatch }) => {\r\n  return await handleAction(\r\n    {\r\n      method: () => webInvoicerApi().put('Products', product),\r\n      errorData: 'update'\r\n    },\r\n    dispatch\r\n  );\r\n});\r\n\r\nexport const deleteProduct = createAsyncThunk('product/delete', async (id, { dispatch }) => {\r\n  await handleAction(\r\n    {\r\n      method: () => webInvoicerApi().delete(`Products/${id}`),\r\n      errorData: 'delete'\r\n    },\r\n    dispatch\r\n  );\r\n\r\n  return id;\r\n});\r\n\r\nconst handleAction = async ({ method, errorData }, dispatch) => {\r\n  dispatch(setActionPending(true));\r\n  const response = await apiHandler(method(), errorData);\r\n  dispatch(setActionPending(false));\r\n\r\n  if (response.type === 'ERROR') {\r\n    dispatch(setError(response.data));\r\n    throw new Error(response.data);\r\n  }\r\n  return response.data;\r\n};\r\n\r\nconst productSlice = createSlice({\r\n  name: 'product',\r\n  initialState,\r\n  reducers: {\r\n    setActionPending(state, action) {\r\n      state.actionPending = action.payload;\r\n    },\r\n    setError(state, action) {\r\n      state.error = action.payload;\r\n    }\r\n  },\r\n  extraReducers: {\r\n    [createProduct.fulfilled]: (state, action) => {\r\n      state.productData.push(action.payload);\r\n    },\r\n    [getProducts.fulfilled]: (state, action) => {\r\n      state.productData = action.payload;\r\n    },\r\n    [updateProduct.fulfilled]: (state, action) => {\r\n      const index = state.productData.findIndex(x => x.id === action.payload.id);\r\n      state.productData[index] = action.payload;\r\n    },\r\n    [deleteProduct.fulfilled]: (state, action) => {\r\n      state.productData = state.productData.filter(x => x.id !== action.payload);\r\n    }\r\n  }\r\n});\r\n\r\nexport const { setActionPending, setError } = productSlice.actions;\r\n\r\nexport default productSlice.reducer;\r\n","import React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { MTableEditField } from 'material-table';\r\nimport { createProduct, deleteProduct, updateProduct } from '../../../slices/productSlice';\r\nimport useValidation from '../../../hooks/useValidation';\r\nimport { calculateGrossPrice, calculateNetPrice } from '../../../utils/priceUtils';\r\n\r\nconst useConfig = () => {\r\n  const { t } = useTranslation();\r\n\r\n  const { required, validate } = useValidation();\r\n\r\n  const currencySettings = fieldName => {\r\n    return {\r\n      type: 'currency',\r\n      align: 'left',\r\n      currencySetting: {\r\n        locale: 'pl',\r\n        currencyCode: 'PLN'\r\n      },\r\n      editComponent: currencyEditComponent(fieldName)\r\n    };\r\n  };\r\n\r\n  const currencyEditComponent = fieldName => props => (\r\n    <MTableEditField {...props} onChange={onPriceChange(fieldName, props)} />\r\n  );\r\n\r\n  const vatRateEditComponent = props => (\r\n    <MTableEditField {...props} onChange={onVatRateChange(props)} />\r\n  );\r\n\r\n  const onPriceChange = (fieldName, { rowData, onRowDataChange }) => value => {\r\n    const calculatedValue =\r\n      fieldName === 'netPrice'\r\n        ? calculateGrossPrice(value, rowData.vatRate)\r\n        : calculateNetPrice(value, rowData.vatRate);\r\n\r\n    const calculatedFieldName = fieldName === 'netPrice' ? 'grossPrice' : 'netPrice';\r\n    onRowDataChange({\r\n      ...rowData,\r\n      [fieldName]: value,\r\n      [calculatedFieldName]: calculatedValue\r\n    });\r\n  };\r\n\r\n  const onVatRateChange = ({ rowData, onRowDataChange }) => value => {\r\n    const parsedValue = Number(value);\r\n\r\n    onRowDataChange({\r\n      ...rowData,\r\n      vatRate: parsedValue,\r\n      grossPrice: calculateGrossPrice(rowData.netPrice, parsedValue)\r\n    });\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: t('products.name'),\r\n      field: 'name',\r\n      width: 190,\r\n      validate: row => required(row.name)\r\n    },\r\n    { title: t('products.description'), field: 'description', width: 165 },\r\n    {\r\n      title: t('products.netPrice'),\r\n      field: 'netPrice',\r\n      width: 190,\r\n      ...currencySettings('netPrice'),\r\n      validate: row => validate('currency', row.netPrice, true)\r\n    },\r\n    {\r\n      title: t('products.grossPrice'),\r\n      field: 'grossPrice',\r\n      width: 190,\r\n      ...currencySettings('grossPrice'),\r\n      validate: row => validate('currency', row.grossPrice, true)\r\n    },\r\n    {\r\n      title: t('products.vatRate'),\r\n      field: 'vatRate',\r\n      width: 190,\r\n      initialEditValue: 0,\r\n      editComponent: vatRateEditComponent,\r\n      lookup: {\r\n        0: '23%',\r\n        1: '8%',\r\n        2: '5%',\r\n        3: '0%',\r\n        4: t('products.vatExempt'),\r\n        5: t('products.vatNotApplicable')\r\n      }\r\n    }\r\n  ];\r\n\r\n  const editableConfig = {\r\n    createAction: createProduct,\r\n    updateAction: updateProduct,\r\n    deleteAction: deleteProduct\r\n  };\r\n\r\n  return { columns, editableConfig };\r\n};\r\n\r\nexport default useConfig;\r\n","import React, { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useTranslation } from 'react-i18next';\r\nimport DataTable from '../../common/DataTable';\r\nimport ErrorDialog from '../../common/ErrorDialog';\r\nimport { getProducts, setError } from '../../../slices/productSlice';\r\nimport useConfig from './config';\r\n\r\nconst Products = () => {\r\n  const { t } = useTranslation();\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const products = useSelector(state => state.product.productData);\r\n\r\n  const actionPending = useSelector(state => state.product.actionPending);\r\n\r\n  const error = useSelector(state => state.product.error);\r\n\r\n  const { columns, editableConfig } = useConfig();\r\n\r\n  useEffect(() => {\r\n    dispatch(getProducts());\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <ErrorDialog error={error} clearAction={setError} />\r\n      <DataTable\r\n        title={t('products.title')}\r\n        isLoading={actionPending}\r\n        data={products}\r\n        columns={columns}\r\n        editableConfig={editableConfig}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Products;\r\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\r\nimport webInvoicerApi from '../apis/webInvoicerApi';\r\nimport apiHandler from '../apis/apiHandler';\r\n\r\nconst initialState = {\r\n  actionPending: false,\r\n  error: null,\r\n  counterpartyData: []\r\n};\r\n\r\nexport const createCounterparty = createAsyncThunk(\r\n  'counterparty/create',\r\n  async (counterparty, { dispatch }) => {\r\n    return await handleAction(\r\n      {\r\n        method: () => webInvoicerApi().post('Counterparties', counterparty),\r\n        errorData: 'create'\r\n      },\r\n      dispatch\r\n    );\r\n  }\r\n);\r\n\r\nexport const getCounterpartyDetails = createAsyncThunk(\r\n  'counterparty/getDetails',\r\n  async (nip, { dispatch }) => {\r\n    return await handleAction(\r\n      {\r\n        method: () => webInvoicerApi().get(`Counterparties/details/${nip}`),\r\n        errorData: 'details'\r\n      },\r\n      dispatch\r\n    );\r\n  }\r\n);\r\n\r\nexport const getCounterparties = createAsyncThunk('counterparty/get', async (_, { dispatch }) => {\r\n  return await handleAction(\r\n    {\r\n      method: () => webInvoicerApi().get('Counterparties'),\r\n      errorData: 'get'\r\n    },\r\n    dispatch\r\n  );\r\n});\r\n\r\nexport const updateCounterparty = createAsyncThunk(\r\n  'counterparty/update',\r\n  async (counterparty, { dispatch }) => {\r\n    return await handleAction(\r\n      {\r\n        method: () => webInvoicerApi().put('Counterparties', counterparty),\r\n        errorData: 'update'\r\n      },\r\n      dispatch\r\n    );\r\n  }\r\n);\r\n\r\nexport const deleteCounterparty = createAsyncThunk(\r\n  'counterparty/delete',\r\n  async (id, { dispatch }) => {\r\n    await handleAction(\r\n      {\r\n        method: () => webInvoicerApi().delete(`Counterparties/${id}`),\r\n        errorData: 'delete'\r\n      },\r\n      dispatch\r\n    );\r\n\r\n    return id;\r\n  }\r\n);\r\n\r\nconst handleAction = async ({ method, errorData }, dispatch) => {\r\n  dispatch(setActionPending(true));\r\n  const response = await apiHandler(method(), errorData);\r\n  dispatch(setActionPending(false));\r\n\r\n  if (response.type === 'ERROR') {\r\n    dispatch(setError(response.data));\r\n    throw new Error(response.data);\r\n  }\r\n  return response.data;\r\n};\r\n\r\nconst counterpartySlice = createSlice({\r\n  name: 'counterparty',\r\n  initialState,\r\n  reducers: {\r\n    setActionPending(state, action) {\r\n      state.actionPending = action.payload;\r\n    },\r\n    setError(state, action) {\r\n      state.error = action.payload;\r\n    }\r\n  },\r\n  extraReducers: {\r\n    [createCounterparty.fulfilled]: (state, action) => {\r\n      state.counterpartyData.push(action.payload);\r\n    },\r\n    [getCounterparties.fulfilled]: (state, action) => {\r\n      state.counterpartyData = action.payload;\r\n    },\r\n    [updateCounterparty.fulfilled]: (state, action) => {\r\n      const index = state.counterpartyData.findIndex(x => x.id === action.payload.id);\r\n      state.counterpartyData[index] = action.payload;\r\n    },\r\n    [deleteCounterparty.fulfilled]: (state, action) => {\r\n      state.counterpartyData = state.counterpartyData.filter(x => x.id !== action.payload);\r\n    }\r\n  }\r\n});\r\n\r\nexport const { setActionPending, setError } = counterpartySlice.actions;\r\n\r\nexport default counterpartySlice.reducer;\r\n","import { makeStyles } from '@material-ui/core';\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  nipEditContainer: {\r\n    width: '100%',\r\n    display: 'inline-flex',\r\n    alignItems: 'center'\r\n  },\r\n  nipEditButton: {\r\n    marginLeft: theme.spacing(1)\r\n  }\r\n}));\r\n\r\nexport default useStyles;\r\n","import React from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\nimport { MTableEditField } from 'material-table';\r\nimport { IconButton } from '@material-ui/core';\r\nimport { CloudDownload } from '@material-ui/icons';\r\nimport {\r\n  createCounterparty,\r\n  deleteCounterparty,\r\n  getCounterpartyDetails,\r\n  updateCounterparty\r\n} from '../../../slices/counterpartySlice';\r\nimport useValidation from '../../../hooks/useValidation';\r\nimport useHandleAction from '../../../hooks/useHandleAction';\r\nimport useStyles from './styles';\r\n\r\nconst useConfig = () => {\r\n  const { t } = useTranslation();\r\n\r\n  const { required, validate } = useValidation();\r\n\r\n  const handleAction = useHandleAction();\r\n\r\n  const classes = useStyles();\r\n\r\n  const downloadDetails = ({ rowData, onRowDataChange, value }) => () => {\r\n    handleAction({\r\n      action: getCounterpartyDetails(value),\r\n      onSuccess: result => {\r\n        const { street, propertyNumber, apartmentNumber, ...rest } = result;\r\n        onRowDataChange({\r\n          ...rowData,\r\n          address: `${street} ${propertyNumber}${apartmentNumber && `/${apartmentNumber}`}`,\r\n          nip: value,\r\n          ...rest\r\n        });\r\n      }\r\n    });\r\n  };\r\n\r\n  const columns = [\r\n    {\r\n      title: t('counterparties.name'),\r\n      field: 'name',\r\n      width: 190,\r\n      validate: row => required(row.name)\r\n    },\r\n    {\r\n      title: t('counterparties.nip'),\r\n      field: 'nip',\r\n      width: 190,\r\n      validate: row => validate('validNip', row.nip, true),\r\n      editComponent: props => (\r\n        <div className={classes.nipEditContainer}>\r\n          <MTableEditField {...props} />\r\n          <IconButton\r\n            onClick={downloadDetails(props)}\r\n            color='primary'\r\n            disabled={Boolean(props.error)}\r\n            className={classes.nipEditButton}>\r\n            <CloudDownload />\r\n          </IconButton>\r\n        </div>\r\n      )\r\n    },\r\n    {\r\n      title: t('counterparties.address'),\r\n      field: 'address',\r\n      width: 190,\r\n      validate: row => required(row.address)\r\n    },\r\n    {\r\n      title: t('counterparties.postalCode'),\r\n      field: 'postalCode',\r\n      width: 190,\r\n      validate: row => validate('postalCode', row.postalCode, true)\r\n    },\r\n    {\r\n      title: t('counterparties.city'),\r\n      field: 'city',\r\n      width: 190,\r\n      validate: row => required(row.city)\r\n    },\r\n    {\r\n      title: t('counterparties.phoneNumber'),\r\n      field: 'phoneNumber',\r\n      width: 190,\r\n      validate: row => validate('phoneNumber', row.phoneNumber, false)\r\n    }\r\n  ];\r\n\r\n  const editableConfig = {\r\n    createAction: createCounterparty,\r\n    updateAction: updateCounterparty,\r\n    deleteAction: deleteCounterparty\r\n  };\r\n\r\n  return { columns, editableConfig };\r\n};\r\n\r\nexport default useConfig;\r\n","import React, { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useTranslation } from 'react-i18next';\r\nimport DataTable from '../../common/DataTable';\r\nimport ErrorDialog from '../../common/ErrorDialog';\r\nimport { getCounterparties, setError } from '../../../slices/counterpartySlice';\r\nimport useConfig from './config';\r\n\r\nconst Counterparties = () => {\r\n  const { t } = useTranslation();\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const counterparties = useSelector(state => state.counterparty.counterpartyData);\r\n\r\n  const actionPending = useSelector(state => state.counterparty.actionPending);\r\n\r\n  const error = useSelector(state => state.counterparty.error);\r\n\r\n  const { columns, editableConfig } = useConfig();\r\n\r\n  useEffect(() => {\r\n    dispatch(getCounterparties());\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <ErrorDialog error={error} clearAction={setError} />\r\n      <DataTable\r\n        title={t('counterparties.title')}\r\n        isLoading={actionPending}\r\n        data={counterparties}\r\n        columns={columns}\r\n        editableConfig={editableConfig}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Counterparties;\r\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\r\nimport webInvoicerApi from '../apis/webInvoicerApi';\r\nimport apiHandler from '../apis/apiHandler';\r\n\r\nconst initialState = {\r\n  actionPending: false,\r\n  error: null,\r\n  employeeData: []\r\n};\r\n\r\nexport const createEmployee = createAsyncThunk(\r\n  'employee/create',\r\n  async (employee, { dispatch }) => {\r\n    return await handleAction(\r\n      {\r\n        method: () => webInvoicerApi().post('Employees', employee),\r\n        errorData: 'create'\r\n      },\r\n      dispatch\r\n    );\r\n  }\r\n);\r\n\r\nexport const getEmployees = createAsyncThunk('employee/get', async (_, { dispatch }) => {\r\n  return await handleAction(\r\n    {\r\n      method: () => webInvoicerApi().get('Employees'),\r\n      errorData: 'get'\r\n    },\r\n    dispatch\r\n  );\r\n});\r\n\r\nexport const updateEmployee = createAsyncThunk(\r\n  'employee/update',\r\n  async (employee, { dispatch }) => {\r\n    return await handleAction(\r\n      {\r\n        method: () => webInvoicerApi().put('Employees', employee),\r\n        errorData: 'update'\r\n      },\r\n      dispatch\r\n    );\r\n  }\r\n);\r\n\r\nexport const deleteEmployee = createAsyncThunk('employee/delete', async (id, { dispatch }) => {\r\n  await handleAction(\r\n    {\r\n      method: () => webInvoicerApi().delete(`Employees/${id}`),\r\n      errorData: 'delete'\r\n    },\r\n    dispatch\r\n  );\r\n\r\n  return id;\r\n});\r\n\r\nconst handleAction = async ({ method, errorData }, dispatch) => {\r\n  dispatch(setActionPending(true));\r\n  const response = await apiHandler(method(), errorData);\r\n  dispatch(setActionPending(false));\r\n\r\n  if (response.type === 'ERROR') {\r\n    dispatch(setError(response.data));\r\n    throw new Error(response.data);\r\n  }\r\n  return response.data;\r\n};\r\n\r\nconst employeeSlice = createSlice({\r\n  name: 'employee',\r\n  initialState,\r\n  reducers: {\r\n    setActionPending(state, action) {\r\n      state.actionPending = action.payload;\r\n    },\r\n    setError(state, action) {\r\n      state.error = action.payload;\r\n    }\r\n  },\r\n  extraReducers: {\r\n    [createEmployee.fulfilled]: (state, action) => {\r\n      state.employeeData.push(action.payload);\r\n    },\r\n    [getEmployees.fulfilled]: (state, action) => {\r\n      state.employeeData = action.payload;\r\n    },\r\n    [updateEmployee.fulfilled]: (state, action) => {\r\n      const index = state.employeeData.findIndex(x => x.id === action.payload.id);\r\n      state.employeeData[index] = action.payload;\r\n    },\r\n    [deleteEmployee.fulfilled]: (state, action) => {\r\n      state.employeeData = state.employeeData.filter(x => x.id !== action.payload);\r\n    }\r\n  }\r\n});\r\n\r\nexport const { setActionPending, setError } = employeeSlice.actions;\r\n\r\nexport default employeeSlice.reducer;\r\n","import { useTranslation } from 'react-i18next';\r\nimport { createEmployee, deleteEmployee, updateEmployee } from '../../../slices/employeeSlice';\r\nimport useValidation from '../../../hooks/useValidation';\r\n\r\nconst useConfig = () => {\r\n  const { t } = useTranslation();\r\n\r\n  const { required, validate } = useValidation();\r\n\r\n  const columns = [\r\n    {\r\n      title: t('employees.fullName'),\r\n      field: 'fullName',\r\n      width: 190,\r\n      validate: row => required(row.fullName)\r\n    },\r\n    {\r\n      title: t('employees.phoneNumber'),\r\n      field: 'phoneNumber',\r\n      width: 190,\r\n      validate: row => validate('phoneNumber', row.phoneNumber, true)\r\n    },\r\n    {\r\n      title: t('employees.dateAdded'),\r\n      field: 'dateAdded',\r\n      width: 190,\r\n      type: 'datetime',\r\n      editable: 'never'\r\n    }\r\n  ];\r\n\r\n  const editableConfig = {\r\n    createAction: createEmployee,\r\n    updateAction: updateEmployee,\r\n    deleteAction: deleteEmployee\r\n  };\r\n\r\n  return { columns, editableConfig };\r\n};\r\n\r\nexport default useConfig;\r\n","import React, { useEffect } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { useTranslation } from 'react-i18next';\r\nimport DataTable from '../../common/DataTable';\r\nimport ErrorDialog from '../../common/ErrorDialog';\r\nimport { getEmployees, setError } from '../../../slices/employeeSlice';\r\nimport useConfig from './config';\r\n\r\nconst Employees = () => {\r\n  const { t } = useTranslation();\r\n\r\n  const dispatch = useDispatch();\r\n\r\n  const employees = useSelector(state => state.employee.employeeData);\r\n\r\n  const actionPending = useSelector(state => state.employee.actionPending);\r\n\r\n  const error = useSelector(state => state.employee.error);\r\n\r\n  const { columns, editableConfig } = useConfig();\r\n\r\n  useEffect(() => {\r\n    dispatch(getEmployees());\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <ErrorDialog error={error} clearAction={setError} />\r\n      <DataTable\r\n        title={t('employees.title')}\r\n        isLoading={actionPending}\r\n        data={employees}\r\n        columns={columns}\r\n        editableConfig={editableConfig}\r\n      />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Employees;\r\n","import React from 'react';\r\n\r\nconst DataVisualization = () => {\r\n  return <div></div>;\r\n};\r\n\r\nexport default DataVisualization;\r\n","import React from 'react';\r\nimport { Route, Switch } from 'react-router-dom';\r\nimport PrivateRoute from './common/PrivateRoute';\r\nimport Home from './pages/Home';\r\nimport Invoices from './pages/Invoices';\r\nimport Products from './pages/Products';\r\nimport Counterparties from './pages/Counterparties';\r\nimport Employees from './pages/Employees';\r\nimport DataVisualization from './pages/DataVisualization';\r\nimport NotFound from './pages/NotFound';\r\n\r\nconst Routes = () => {\r\n  const validHomePaths = [\r\n    '/',\r\n    '/login',\r\n    '/register',\r\n    '/resetPassword',\r\n    '/changePassword',\r\n    '/confirmEmail'\r\n  ];\r\n\r\n  return (\r\n    <Switch>\r\n      <Route exact path={validHomePaths} component={Home} />\r\n      <PrivateRoute path='/invoices' component={Invoices} />\r\n      <PrivateRoute exact path='/products' component={Products} />\r\n      <PrivateRoute exact path='/counterparties' component={Counterparties} />\r\n      <PrivateRoute exact path='/employees' component={Employees} />\r\n      <PrivateRoute exact path='/dataVisualization' component={DataVisualization} />\r\n      <Route component={NotFound} />\r\n    </Switch>\r\n  );\r\n};\r\n\r\nexport default Routes;\r\n","import React, { Suspense } from 'react';\r\nimport { useSelector } from 'react-redux';\r\nimport { Container, createMuiTheme, CssBaseline, ThemeProvider, Toolbar } from '@material-ui/core';\r\nimport Navigation from './components/layout/Navigation';\r\nimport SuspenseLoading from './components/SuspenseLoading';\r\nimport Routes from './components/Routes';\r\nimport lightTheme from './styles/lightTheme.json';\r\nimport darkTheme from './styles/darkTheme.json';\r\n\r\nconst App = () => {\r\n  const isLoggedIn = useSelector(state => state.user.isLoggedIn);\r\n\r\n  const theme = useSelector(state => state.app.theme);\r\n\r\n  const muiTheme = createMuiTheme(theme === 'light' ? lightTheme : darkTheme);\r\n\r\n  return (\r\n    <ThemeProvider theme={muiTheme}>\r\n      <CssBaseline />\r\n      <Suspense fallback={<SuspenseLoading />}>\r\n        <Navigation />\r\n        <Container {...(isLoggedIn && { className: 'logged-in-container' })}>\r\n          <Toolbar />\r\n          <Routes />\r\n        </Container>\r\n      </Suspense>\r\n    </ThemeProvider>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import { combineReducers, configureStore } from '@reduxjs/toolkit';\r\nimport appReducer from './slices/appSlice';\r\nimport userReducer from './slices/userSlice';\r\nimport invoiceReducer from './slices/invoiceSlice';\r\nimport counterpartyReducer from './slices/counterpartySlice';\r\nimport employeeReducer from './slices/employeeSlice';\r\nimport productReducer from './slices/productSlice';\r\n\r\nconst combinedReducer = combineReducers({\r\n  app: appReducer,\r\n  user: userReducer,\r\n  invoice: invoiceReducer,\r\n  counterparty: counterpartyReducer,\r\n  employee: employeeReducer,\r\n  product: productReducer\r\n});\r\n\r\nconst rootReducer = (state, action) => {\r\n  if (action.type === 'user/logout') {\r\n    state = undefined;\r\n  }\r\n\r\n  return combinedReducer(state, action);\r\n};\r\n\r\nexport default configureStore({\r\n  reducer: rootReducer\r\n});\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport { HashRouter as Router } from 'react-router-dom';\r\nimport { Provider } from 'react-redux';\r\nimport './i18n';\r\nimport App from './App';\r\nimport store from './store';\r\nimport './styles/styles.css';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <Router>\r\n      <Provider store={store}>\r\n        <App />\r\n      </Provider>\r\n    </Router>\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n"],"sourceRoot":""}