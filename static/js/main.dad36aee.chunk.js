(this["webpackJsonpweb-invoicer-frontend"]=this["webpackJsonpweb-invoicer-frontend"]||[]).push([[0],{470:function(e){e.exports=JSON.parse('{"palette":{"type":"light","background":{"paper":"rgba(245, 245, 245, 1)","default":"rgba(255, 255, 255, 1)"},"primary":{"light":"rgba(99, 164, 255, 1)","main":"rgba(25, 118, 210, 1)","dark":"rgba(0, 75, 160, 1)","contrastText":"rgba(255, 255, 255, 1)"},"secondary":{"light":"rgba(255, 84, 122, 1)","main":"rgba(220, 0, 78, 1)","dark":"rgba(163, 0, 39, 1)","contrastText":"rgba(255, 255, 255, 1)"},"error":{"light":"rgba(99, 164, 255, 1)","main":"rgba(25, 118, 210, 1)","dark":"rgba(0, 75, 160, 1)","contrastText":"rgba(255, 255, 255, 1)"},"warning":{"light":"#ffb74d","main":"#ff9800","dark":"#f57c00","contrastText":"rgba(0, 0, 0, 0.87)"},"info":{"light":"#64b5f6","main":"#2196f3","dark":"#1976d2","contrastText":"#fff"},"success":{"light":"#81c784","main":"#4caf50","dark":"#388e3c","contrastText":"rgba(0, 0, 0, 0.87)"},"text":{"primary":"rgba(0, 0, 0, 0.87)","secondary":"rgba(0, 0, 0, 0.54)","disabled":"rgba(0, 0, 0, 0.38)","hint":"rgba(0, 0, 0, 0.38)"}}}')},471:function(e){e.exports=JSON.parse('{"palette":{"type":"dark","primary":{"light":"rgba(195, 253, 255, 1)","main":"rgba(144, 202, 249, 1)","dark":"rgba(93, 153, 198, 1)","contrastText":"rgba(0, 0, 0, 0.87)"},"secondary":{"light":"rgba(255, 193, 227, 1)","main":"rgba(244, 143, 177, 1)","dark":"rgba(191, 95, 130, 1)","contrastText":"rgba(0, 0, 0, 0.87)"},"error":{"light":"rgba(195, 253, 255, 1)","main":"rgba(144, 202, 249, 1)","dark":"rgba(93, 153, 198, 1)","contrastText":"rgba(0, 0, 0, 0.87)"},"warning":{"light":"#ffb74d","main":"#ff9800","dark":"#f57c00","contrastText":"rgba(0, 0, 0, 0.87)"},"info":{"light":"#64b5f6","main":"#2196f3","dark":"#1976d2","contrastText":"#fff"},"success":{"light":"#81c784","main":"#4caf50","dark":"#388e3c","contrastText":"rgba(0, 0, 0, 0.87)"},"text":{"primary":"#fff","secondary":"rgba(255, 255, 255, 0.7)","disabled":"rgba(255, 255, 255, 0.5)","hint":"rgba(255, 255, 255, 0.5)","icon":"rgba(255, 255, 255, 0.5)"}}}')},483:function(e,t,n){e.exports=n(742)},741:function(e,t,n){},742:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(29),o=n.n(c),i=n(46),u=n(10),l=n(330),s=n(211),d=n(460),p=n(462);l.a.use(d.a).use(p.a).use(s.e).init({fallbackLng:"en",debug:!0,interpolation:{escapeValue:!1},backend:{loadPath:"/web-invoicer-frontend/locales/{{lng}}/{{ns}}.json"}});var m=l.a,f=n(156),b=n(786),v=n(788),g=n(787),h=n(316),O=n(804),E=n(779),j=n(205),y=n(74),x=n(780),w=n(781),D=n(95),C=n(14),k=n(87),P=Object(k.a)((function(e){return{drawer:{width:250},drawerPaper:{width:250},drawerHeader:Object(C.a)({width:250,padding:e.spacing(0,1),display:"flex",alignItems:"center",justifyContent:"flex-end"},e.mixins.toolbar),drawerHighlight:{background:e.palette.primary.main,"&:hover":{background:e.palette.primary.main}},drawerHighlightText:{color:e.palette.getContrastText(e.palette.primary.main)}}})),N=P,I=function(e){var t=e.children,n=N();return r.a.createElement(D.a,{variant:"permanent",anchor:"left",className:n.drawer,classes:{paper:n.drawerPaper}},r.a.createElement(h.a,null),t)},S=n(770),T=n(769),R=function(e){var t=e.open,n=e.onClose,a=e.children,c=N();return r.a.createElement(D.a,{anchor:"left",open:t,onClose:n},r.a.createElement("div",{className:c.drawerHeader},r.a.createElement(j.a,{onClick:n},r.a.createElement(T.a,null))),r.a.createElement(S.a,null),a)},A=n(748),F=n(746),B=n(771),M=n(393),L=n(244),z=n(394),V=n(772),q=n(38),W=function(){var e=Object(a.useState)(null),t=Object(q.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(null),o=Object(q.a)(c,2),i=o[0],u=o[1];return{anchor:i,menuData:n,openMenu:function(e,t){u(e.currentTarget),t&&r(t)},closeMenu:function(){return u(null)}}},U=function(){var e=Object(O.a)(),t=e.t,n=e.i18n,a=t("languages",{returnObjects:!0}),c=W(),o=c.anchor,i=c.openMenu,u=c.closeMenu;return r.a.createElement(r.a.Fragment,null,r.a.createElement(F.a,{button:!0,onClick:i},r.a.createElement(B.a,null,r.a.createElement(V.a,null)),r.a.createElement(M.a,{primary:t("drawer.language")})),r.a.createElement(L.a,{anchorEl:o,open:Boolean(o),onClose:u},a.map((function(e,t){return r.a.createElement(z.a,{key:t,selected:n.language.startsWith(e.code),onClick:(a=e.code,function(){a!==n.language&&n.changeLanguage(a),u()})},e.label);var a}))))},H=n(773),J=n(774),_=n(28),G={theme:localStorage.getItem("theme")||"dark",isDialogOpen:!1,isDrawerOpen:!1},Y=Object(_.c)({name:"app",initialState:G,reducers:{setTheme:function(e,t){e.theme=t.payload},setDialogOpen:function(e,t){e.isDialogOpen=t.payload},setDrawerOpen:function(e,t){e.isDrawerOpen=t.payload}}}),K=Y.actions,$=K.setTheme,Z=K.setDialogOpen,Q=K.setDrawerOpen,X=Y.reducer,ee=function(){var e=Object(O.a)().t,t=Object(u.c)(),n=Object(u.d)((function(e){return e.app.theme}));return r.a.createElement(F.a,{button:!0,onClick:function(){var e="light"===n?"dark":"light";localStorage.setItem("theme",e),t($(e))}},r.a.createElement(B.a,null,"dark"===n?r.a.createElement(H.a,null):r.a.createElement(J.a,null)),r.a.createElement(M.a,{primary:e("drawer.theme")}))},te=n(455),ne=n(50),ae=function(){var e=Object(u.c)(),t=Object(u.d)((function(e){return e.app.isDialogOpen})),n=Object(ne.g)();return{openDialogForType:function(t){n.replace("/".concat(t)),e(Z(!0))},openDialog:function(){return e(Z(!0))},closeDialog:function(){return e(Z(!1))},onExited:function(){return n.replace("/")},isDialogOpen:t}},re=function(){var e=Object(O.a)().t,t=ae().openDialogForType,n=N();return r.a.createElement(te.a,{smUp:!0},r.a.createElement(S.a,null),r.a.createElement(A.a,null,r.a.createElement(F.a,{button:!0,onClick:function(){return t("login")}},r.a.createElement(M.a,{primary:e("signIn")})),r.a.createElement(F.a,{button:!0,onClick:function(){return t("register")},className:n.drawerHighlight},r.a.createElement(M.a,{primary:e("signUp"),className:n.drawerHighlightText}))))},ce=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,null,r.a.createElement(U,null),r.a.createElement(ee,null)),r.a.createElement(re,null))},oe=n(395),ie=function(e){var t=e.closeDrawer,n=e.isDrawerPermanent,a=Object(O.a)().t,c=Object(ne.h)(),o=a("drawer.user",{returnObjects:!0}),u=function(e){return c.pathname===e.pathname||c.pathname.startsWith("".concat(e.pathname,"/"))},l=function(){return!n&&t()};return r.a.createElement(r.a.Fragment,null,r.a.createElement(A.a,null,o.map((function(e,t){return r.a.createElement(F.a,{button:!0,key:t,component:i.b,to:e.pathname,replace:c.pathname===e.pathname,selected:u(e),onClick:l},r.a.createElement(B.a,null,r.a.createElement(oe.a,null,e.icon)),r.a.createElement(M.a,{primary:e.text}))}))),r.a.createElement(S.a,null),r.a.createElement(A.a,null,r.a.createElement(U,null),r.a.createElement(ee,null)))},ue=n(749),le=n(32),se=function(){var e=Object(u.c)(),t=Object(u.d)((function(e){return e.app.isDrawerOpen})),n=Object(u.d)((function(e){return e.user.isLoggedIn})),a=Object(ue.a)(Object(le.a)().breakpoints.up("lg"));return{openDrawer:function(){return e(Q(!0))},closeDrawer:function(){return e(Q(!1))},isDrawerOpen:t,isDrawerPermanent:n&&a}},de=function(e){var t=e.isLoggedIn,n=se(),a=n.closeDrawer,c=n.isDrawerOpen,o=n.isDrawerPermanent,i=o?I:R,u=t?ie:ce;return r.a.createElement(i,{open:c,onClose:a},r.a.createElement(u,{closeDrawer:a,isDrawerPermanent:o}))},pe=n(148),me=Object(k.a)((function(e){return{appBar:{zIndex:e.zIndex.drawer+1},appBarSpacer:{marginRight:e.spacing(1)},appBarLogo:{marginRight:4},appBarTitle:{userSelect:"none",flexGrow:1}}})),fe=function(){var e=Object(O.a)().t,t=ae().openDialogForType,n=me();return r.a.createElement(te.a,{xsDown:!0},r.a.createElement(pe.a,{color:"inherit",onClick:function(){return t("login")},className:n.appBarSpacer},e("signIn")),r.a.createElement(pe.a,{variant:"outlined",color:"inherit",onClick:function(){return t("register")}},e("signUp")))},be=n(778),ve=n(41),ge=n(750),he=n(751),Oe=n(752),Ee=n(775),je=n(776),ye=Object(k.a)((function(e){return{dialogTitle:function(t){var n=t.centered;return{margin:0,padding:n?e.spacing(2,8,0):e.spacing(2,8,2,3),textAlign:n?"center":"initial"}},dialogCloseButton:{position:"absolute",top:e.spacing(1),right:e.spacing(1),color:e.palette.text.secondary},successAlert:{margin:e.spacing(3,3,0)},dialogActions:{padding:e.spacing(2,3),justifyContent:"center"}}})),xe=function(e){var t=e.title,n=e.onClose,a=e.centered,c=e.closeButton,o=ye({centered:a});return r.a.createElement(Ee.a,{disableTypography:!0,className:o.dialogTitle},r.a.createElement(y.a,{variant:"h6"},t),c&&r.a.createElement(j.a,{className:o.dialogCloseButton,onClick:n},r.a.createElement(je.a,null)))},we=function(e){var t=e.open,n=e.onClose,a=e.title,c=e.centeredTitle,o=void 0!==c&&c,i=e.closeButton,u=void 0!==i&&i,l=e.content,s=e.actions,d=e.children,p=Object(ve.a)(e,["open","onClose","title","centeredTitle","closeButton","content","actions","children"]);return r.a.createElement(ge.a,Object.assign({open:t,onClose:n},p),r.a.createElement(xe,{title:a,onClose:n,centered:o,closeButton:u}),l&&r.a.createElement(he.a,null,l),s&&r.a.createElement(Oe.a,null,s),d)},De=n(777),Ce=n(803),ke=n(24),Pe=n(12),Ne=n.n(Pe),Ie=n(25),Se=n(463),Te=n.n(Se),Re=function(){return Te.a.create({baseURL:"https://api.webinvoicer.c1rcle.me",timeout:1e4,headers:localStorage.getItem("token")?{Authorization:"Bearer "+localStorage.getItem("token")}:{}})},Ae=function(){var e=Object(Ie.a)(Ne.a.mark((function e(t,n){var a,r;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:a=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),a=null;case 9:return r=a&&a.status>=200&&a.status<300,e.abrupt("return",r?a:{type:"ERROR",data:n});case 11:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,n){return e.apply(this,arguments)}}(),Fe=Object(_.b)("user/login",function(){var e=Object(Ie.a)(Ne.a.mark((function e(t,n){var a,r;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.dispatch,e.next=3,Ue({endpoint:"users/authenticate",payload:t,errorData:"login"},a);case 3:return r=e.sent,a(Q(!1)),localStorage.setItem("token",r.token),localStorage.setItem("userData",JSON.stringify(r.userData)),e.abrupt("return",r);case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Be=Object(_.b)("user/refreshToken",function(){var e=Object(Ie.a)(Ne.a.mark((function e(t,n){var a,r;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.dispatch,e.next=3,Ue({endpoint:"users/refreshToken",errorData:"refreshToken"},a);case 3:return r=e.sent,localStorage.setItem("token",r),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Me=Object(_.b)("user/register",function(){var e=Object(Ie.a)(Ne.a.mark((function e(t,n){var a;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.dispatch,e.next=3,Ue({endpoint:"users/register",payload:t,errorData:"register"},a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Le=Object(_.b)("user/confirmEmail",function(){var e=Object(Ie.a)(Ne.a.mark((function e(t,n){var a;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.dispatch,e.next=3,Ue({endpoint:"users/confirm",payload:t,errorData:"confirmEmail"},a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),ze=Object(_.b)("user/resetPassword",function(){var e=Object(Ie.a)(Ne.a.mark((function e(t,n){var a;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.dispatch,e.next=3,Ue({endpoint:"users/resetPassword",payload:{email:t},errorData:"resetPassword"},a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Ve=Object(_.b)("user/changeResetPassword",function(){var e=Object(Ie.a)(Ne.a.mark((function e(t,n){var a;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.dispatch,e.next=3,Ue({endpoint:"users/changeResetPassword",payload:t,errorData:"changePassword"},a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),qe=Object(_.b)("user/changePassword",function(){var e=Object(Ie.a)(Ne.a.mark((function e(t,n){var a;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.dispatch,e.next=3,Ue({endpoint:"users/changePassword",payload:t,errorData:"changePassword"},a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),We=Object(_.b)("user/setCompanyData",function(){var e=Object(Ie.a)(Ne.a.mark((function e(t,n){var a;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.dispatch,e.next=3,Ue({endpoint:"users/setCompanyDetails",payload:t,errorData:"setCompanyData"},a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Ue=function(){var e=Object(Ie.a)(Ne.a.mark((function e(t,n){var a,r,c,o;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.endpoint,r=t.payload,c=t.errorData,n(_e(!0)),e.next=4,Ae(Re().post(a,r),c);case 4:if(o=e.sent,n(_e(!1)),"ERROR"!==o.type){e.next=9;break}throw n(Ge(o.data)),new Error(o.data);case 9:return e.abrupt("return",o.data);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),He=Object(_.c)({name:"user",initialState:{actionPending:!1,error:null,userData:null,isLoggedIn:!1},reducers:{setActionPending:function(e,t){e.actionPending=t.payload},setError:function(e,t){e.error=t.payload},setUserData:function(e,t){e.userData=t.payload,e.isLoggedIn=!0}},extraReducers:Object(ke.a)({},Fe.fulfilled,(function(e,t){e.userData=t.payload.userData,e.isLoggedIn=!0}))}),Je=He.actions,_e=Je.setActionPending,Ge=Je.setError,Ye=Je.setUserData,Ke=He.reducer,$e=Object(k.a)((function(e){return{dialogAlert:{margin:e.spacing(3,3,0)}}})),Ze=function(){var e=Object(a.useState)(""),t=Object(q.a)(e,2),n=t[0],c=t[1],o=Object(O.a)().t,i=Object(u.c)(),l=Object(u.d)((function(e){return e.user.error})),s=$e();return Object(a.useEffect)((function(){l&&(c(l),setTimeout((function(){i(Ge(null))}),5e3))}),[l,i]),Object(a.useEffect)((function(){return function(){return i(Ge(null))}}),[]),r.a.createElement(De.a,{in:Boolean(l)},r.a.createElement(Ce.a,{variant:"outlined",severity:"error",className:s.dialogAlert},n&&o("user.error.".concat(n))))},Qe=n(130),Xe=n(149),et=n.n(Xe),tt=function(){var e=Object(O.a)().t;return{required:function(t){var n=t+"";return!(!t||et.a.isEmpty(n,{ignore_whitespace:!0}))||e("validation.required")},validate:function(t,n,a){var r=n+"";if(!a&&(!n||0===r.length))return!0;return!!function(){switch(t){case"validNip":return function(e){var t=[6,5,7,2,3,4,5,6,7,0];if(10!==e.length||!et.a.isNumeric(e))return!1;var n=0;return Array.from(e).forEach((function(e,a){return n+=Number(e)*t[a]})),n%11===Number(e[9])}(r);case"positiveInt":return function(e){return et.a.isInt(e,{gt:0,allow_leading_zeroes:!1})}(r);case"currency":return function(e){return Number(e)>0&&et.a.isCurrency(e,{allow_negatives:!1,digits_after_decimal:[1,2],symbol:""})}(r);case"phoneNumber":return function(e){return et.a.isMobilePhone(e,["pl-PL"])}(r);case"postalCode":return function(e){return et.a.isPostalCode(e,["PL"])}(r);default:throw new Error("Validation type not supported!")}}()||e("validation.".concat(t))}}},nt=function(e){var t=e.children,n=e.validatorRef,c=Object(ve.a)(e,["children","validatorRef"]),o=tt().validate,i=function(e){return!0===e},u=[{name:"validNip",validator:function(e){return i(o("validNip",e,!0))}},{name:"positiveInt",validator:function(e){return i(o("positiveInt",e,!0))}},{name:"currency",validator:function(e){return i(o("currency",e,!0))}},{name:"phoneNumber",validator:function(e){return i(o("phoneNumber",e,!0))}},{name:"postalCode",validator:function(e){return i(o("postalCode",e,!0))}}];return Object(a.useEffect)((function(){return u.forEach((function(e){return Qe.ValidatorForm.addValidationRule(e.name,e.validator)})),function(){return u.forEach((function(e){return Qe.ValidatorForm.removeValidationRule(e.name)}))}}),[]),r.a.createElement(Qe.ValidatorForm,Object.assign({},c,{ref:n}),t)},at=n(420),rt=Object(k.a)((function(){return{wrapper:{position:"relative"},progress:{position:"absolute",top:"50%",left:"50%",marginTop:-12,marginLeft:-12}}})),ct=function(e){var t=e.text,n=e.loading,a=rt();return r.a.createElement("div",{className:a.wrapper},r.a.createElement(pe.a,{variant:"contained",color:"primary",size:"large",type:"submit",disabled:n},t),n&&r.a.createElement(at.a,{size:24,className:a.progress}))},ot=function(e){var t=e.onSubmit,n=e.children,a=e.submitText,c=e.validatorRef,o=ye(),i=Object(u.d)((function(e){return e.user.actionPending}));return r.a.createElement(nt,{onSubmit:t,validatorRef:c,noValidate:!0},r.a.createElement(he.a,null,n),r.a.createElement(Oe.a,{className:o.dialogActions},r.a.createElement(ct,{text:a,loading:i})))},it=function(e){return r.a.createElement(Qe.TextValidator,Object.assign({margin:"normal",variant:"outlined",fullWidth:!0},e))},ut=function(e){var t=e.passwordChange,n=Object(ve.a)(e,["passwordChange"]),a=Object(O.a)().t;return r.a.createElement(it,Object.assign({label:a("home.dialog.".concat(t?"newPassword":"password")),type:"password",validators:["required","matchRegexp:^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[#$^+=!*()@%&]).{6,}$"],errorMessages:[a("home.dialog.validation.required"),a("home.dialog.validation.password")]},n))},lt=function(e){var t=e.success,n=e.text,a=ye();return r.a.createElement(De.a,{in:t},r.a.createElement(Ce.a,{variant:"outlined",severity:"success",className:a.successAlert},n))},st=function(e){var t=Object(a.useState)(!1),n=Object(q.a)(t,2),r=n[0],c=n[1],o=Object(u.c)();return{success:r,performAction:function(t,n,a){c(!1),o(e(t)).then(_.e).then((function(){c(!0),n&&n()})).catch((function(e){return a&&a(e)}))}}},dt=function(){var e=Object(a.useState)({password:"",newPassword:""}),t=Object(q.a)(e,2),n=t[0],c=t[1],o=Object(O.a)().t,i=Object(u.c)(),l=st(qe),s=l.success,d=l.performAction,p=Object(u.d)((function(e){return e.user.userData.email})),m=function(e){return function(t){var n=t.target;c((function(t){return Object(C.a)(Object(C.a)({},t),{},Object(ke.a)({},e,n.value))}))}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(lt,{success:s,text:o("user.success.changePassword")}),r.a.createElement(ot,{onSubmit:function(e){e.preventDefault(),n.password!==n.newPassword?d(Object(C.a)(Object(C.a)({},n),{},{email:p}),(function(){return c({password:"",newPassword:""})})):i(Ge("passwordsEqual"))},submitText:o("changePassword")},r.a.createElement(ut,{autoFocus:!0,onChange:m("password"),value:n.password}),r.a.createElement(ut,{passwordChange:!0,onChange:m("newPassword"),value:n.newPassword})))},pt=function(e,t){var n=Object(a.useRef)(!0);Object(a.useEffect)((function(){n.current?n.current=!1:e()}),t)},mt=n(466),ft=n.n(mt),bt=function(){var e={companyName:"",nip:"",address:"",postalCode:"",city:""},t=Object(a.useState)(e),n=Object(q.a)(t,2),c=n[0],o=n[1],i=Object(O.a)().t,l=Object(u.c)(),s=Object(a.useRef)(null),d=st(We),p=d.success,m=d.performAction,f=Object(u.d)((function(e){return e.user.userData}));pt((function(){ft()(c,e)&&s.current.resetValidations()}),[c]);var b=function(e){return function(t){var n=t.target;o((function(t){return Object(C.a)(Object(C.a)({},t),{},Object(ke.a)({},e,n.value))}))}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(lt,{success:p,text:i("user.success.setCompanyData")}),r.a.createElement(ot,{onSubmit:function(t){t.preventDefault(),m(c,(function(){l(Ye(Object(C.a)(Object(C.a)({},f),c))),o(e)}))},submitText:i("save"),validatorRef:s},r.a.createElement(it,{autoFocus:!0,label:i("counterparties.name"),onChange:b("companyName"),value:c.companyName,validators:["required"],errorMessages:[i("validation.required")]}),r.a.createElement(it,{label:i("counterparties.nip"),onChange:b("nip"),value:c.nip,validators:["validNip"],errorMessages:[i("validation.validNip")]}),r.a.createElement(it,{label:i("counterparties.address"),onChange:b("address"),value:c.address,validators:["required"],errorMessages:[i("validation.required")]}),r.a.createElement(it,{label:i("counterparties.postalCode"),onChange:b("postalCode"),value:c.postalCode,validators:["postalCode"],errorMessages:[i("validation.postalCode")]}),r.a.createElement(it,{label:i("counterparties.city"),onChange:b("city"),value:c.city,validators:["required"],errorMessages:[i("validation.required")]})))},vt=function(e){var t=e.open,n=e.onClose,a=e.type,c=Object(O.a)().t,o=c("changePassword"===a?"accountChangePassword":"accountSetCompanyData");return r.a.createElement(we,{centeredTitle:!0,closeButton:!0,title:o,open:t,onClose:n,maxWidth:"xs",fullWidth:!0},r.a.createElement(Ze,null),"changePassword"===a?r.a.createElement(dt,null):r.a.createElement(bt,null))},gt=function(){var e=Object(u.c)();return function(){localStorage.removeItem("token"),localStorage.removeItem("userData"),e({type:"user/logout"})}},ht=function(){var e=Object(a.useState)(!1),t=Object(q.a)(e,2),n=t[0],r=t[1],c=Object(a.useState)(null),o=Object(q.a)(c,2),i=o[0],u=o[1];return{isDialogOpen:n,dialogData:i,openDialog:function(e){r(!0),e&&u(e)},closeDialog:function(){return r(!1)}}},Ot=n(260),Et=function(e,t){var n=Object(a.useRef)();Object(a.useEffect)((function(){n.current=e}),[e]),Object(a.useEffect)((function(){if(null!==t){var e=setInterval((function(){n.current()}),t);return function(){return clearInterval(e)}}}),[t])},jt=function(){var e=Object(u.c)(),t=Object(Ot.a)(localStorage.getItem("token")).exp,n=function(){return 1e3*t-(new Date).getTime()-3e4},a=n();Et((function(){e(Be()),a=n()}),a)},yt=function(){var e=Object(O.a)().t,t=W(),n=t.anchor,a=t.openMenu,c=t.closeMenu,o=ht(),i=o.isDialogOpen,u=o.dialogData,l=o.openDialog,s=o.closeDialog,d=gt();jt();var p=function(e){return function(){c(),l(e)}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(vt,{open:i,onClose:s,type:u}),r.a.createElement(j.a,{edge:"end",color:"primary",onClick:a},r.a.createElement(be.a,{fontSize:"large"})),r.a.createElement(L.a,{anchorEl:n,open:Boolean(n),onClose:c},r.a.createElement(z.a,{onClick:p("setCompanyData")},e("accountSetCompanyData")),r.a.createElement(z.a,{onClick:p("changePassword")},e("accountChangePassword")),r.a.createElement(z.a,{onClick:d},e("signOut"))))},xt=function(){var e=Object(u.c)(),t=gt(),n=Object(u.d)((function(e){return e.user.isLoggedIn}));Object(a.useEffect)((function(){if(!n&&localStorage.getItem("token")){var a=Object(Ot.a)(localStorage.getItem("token")),r=JSON.parse(localStorage.getItem("userData"));!a||!r||a.exp<(new Date).getTime()/1e3?t():e(Ye(r))}}),[])},wt=function(){var e=Object(O.a)().t,t=Object(u.d)((function(e){return e.user.isLoggedIn})),n=se(),a=n.openDrawer,c=n.isDrawerPermanent,o=me();return xt(),r.a.createElement(r.a.Fragment,null,r.a.createElement(de,{isLoggedIn:t}),r.a.createElement(E.a,{position:"fixed",color:"inherit",className:o.appBar},r.a.createElement(h.a,null,!c&&r.a.createElement(j.a,{edge:"start",color:"inherit",onClick:a,className:o.appBarSpacer},r.a.createElement(x.a,null)),r.a.createElement(w.a,{fontSize:"large",className:o.appBarLogo,color:"primary"}),r.a.createElement(y.a,{variant:"h6",className:o.appBarTitle},e("title")),t?r.a.createElement(yt,null):r.a.createElement(fe,null))))},Dt=n(474),Ct=function(){return r.a.createElement(Dt.a,{open:!0},r.a.createElement(at.a,null))},kt=function(e){var t=Object(u.d)((function(e){return e.user.isLoggedIn}));return r.a.createElement(r.a.Fragment,null,t||r.a.createElement(ne.a,{to:"/"}),r.a.createElement(ne.b,e))},Pt=n(294),Nt=n(782),It=n(783),St=n(784),Tt=Object(k.a)((function(e){return{heroContainer:Object(ke.a)({width:"fit-content",padding:e.spacing(2),margin:e.spacing(2,0),marginLeft:"auto",marginRight:"auto",display:"flex"},e.breakpoints.only("xs"),{flexDirection:"column"}),heroItem:Object(ke.a)({marginTop:"auto",marginBottom:"auto"},e.breakpoints.only("xs"),{textAlign:"center"}),heroIcon:Object(ke.a)({fontSize:"6rem",marginRight:e.spacing(2)},e.breakpoints.only("xs"),{marginRight:0}),featureCard:{height:"100%"},featureIcon:{fontSize:"5rem"}}})),Rt=function(){var e=(0,Object(O.a)().t)("home.features",{returnObjects:!0}),t=Tt();return r.a.createElement(Nt.a,{container:!0,justify:"center",spacing:3},e.map((function(e,n){return r.a.createElement(Nt.a,{key:n,item:!0,xs:12,sm:6},r.a.createElement(It.a,{className:t.featureCard},r.a.createElement(St.a,null,r.a.createElement("div",{className:"text-center"},r.a.createElement(oe.a,{className:t.featureIcon,color:"primary"},e.icon)),r.a.createElement(y.a,{gutterBottom:!0,variant:"h5",className:"text-center"},e.header),r.a.createElement(y.a,{variant:"body1",color:"textSecondary",className:"text-center"},e.description))))})))},At=function(){var e=Object(O.a)().t,t=ae().openDialogForType;return r.a.createElement(Pt.a,{mb:4,className:"text-center"},r.a.createElement(y.a,{variant:"h5"},e("home.footer")),r.a.createElement(Pt.a,{mt:2},r.a.createElement(pe.a,{variant:"outlined",color:"inherit",size:"large",onClick:function(){return t("register")}},e("signUp"))))},Ft=function(){var e=Object(O.a)().t,t=Tt();return r.a.createElement("div",{className:t.heroContainer},r.a.createElement("div",{className:t.heroItem},r.a.createElement(w.a,{className:t.heroIcon,color:"primary"})),r.a.createElement("div",{className:t.heroItem},r.a.createElement(y.a,{variant:"h4",gutterBottom:!0},e("home.hero.title")),r.a.createElement(y.a,{variant:"h6",color:"textSecondary"},e("home.hero.description"))))},Bt=(0,n(21).makeStyles)((function(e){return{dialogAlert:{margin:e.spacing(3,3,0)},dialogActions:{padding:e.spacing(2,3),justifyContent:"center"}}})),Mt=function(e){var t=e.locationKey,n=Object(a.useState)(""),c=Object(q.a)(n,2),o=c[0],i=c[1],l=Object(O.a)().t,s=Object(u.c)(),d=Object(u.d)((function(e){return e.user.error})),p=Bt();return Object(a.useEffect)((function(){d&&(d!==t?s(Ge(null)):(i(d),setTimeout((function(){s(Ge(null))}),5e3)))}),[d,s,t]),Object(a.useEffect)((function(){return function(){return s(Ge(null))}}),[]),r.a.createElement(De.a,{in:Boolean(d)},r.a.createElement(Ce.a,{variant:"outlined",severity:"error",className:p.dialogAlert},o&&l("home.dialog.error.".concat(o))))},Lt=n(790),zt=function(e){var t=Object(O.a)().t;return r.a.createElement(it,Object.assign({label:t("home.dialog.email"),type:"email",validators:["required","isEmail"],errorMessages:[t("home.dialog.validation.required"),t("home.dialog.validation.email")]},e))},Vt=Object(k.a)((function(e){return{dialogText:{display:"block",marginTop:e.spacing(3),textAlign:"center"},dialogConfirmContainer:{display:"flex",justifyContent:"center",alignItems:"center",margin:e.spacing(3,0)},dialogProgress:{marginRight:e.spacing(2)}}})),qt=function(){var e=Object(a.useState)({email:"",password:""}),t=Object(q.a)(e,2),n=t[0],c=t[1],o=Object(O.a)().t,l=Object(u.c)(),s=Object(u.d)((function(e){return e.user.isLoggedIn})),d=Vt(),p=function(e){return function(t){var n=t.target;c((function(t){return Object(C.a)(Object(C.a)({},t),{},Object(ke.a)({},e,n.value))}))}};return r.a.createElement(r.a.Fragment,null,s&&r.a.createElement(ne.a,{to:"invoices"}),r.a.createElement(ot,{onSubmit:function(e){e.preventDefault(),l(Fe(n))},submitText:o("signIn")},r.a.createElement(zt,{autoFocus:!0,onChange:p("email"),value:n.email}),r.a.createElement(ut,{onChange:p("password"),value:n.password}),r.a.createElement(Lt.a,{component:i.b,to:"resetPassword",variant:"body2",color:"primary",className:d.dialogText},o("home.dialog.forgotPassword"))))},Wt=function(){var e=Object(a.useState)({fullName:"",email:"",password:""}),t=Object(q.a)(e,2),n=t[0],c=t[1],o=st(Me),i=o.success,u=o.performAction,l=Object(O.a)().t,s=Vt(),d=function(e){return function(t){var n=t.target;c((function(t){return Object(C.a)(Object(C.a)({},t),{},Object(ke.a)({},e,n.value))}))}};return r.a.createElement(r.a.Fragment,null,r.a.createElement(lt,{success:i,text:l("home.dialog.success.register")}),r.a.createElement(ot,{onSubmit:function(e){e.preventDefault(),u(n,(function(){return c({fullName:"",email:"",password:""})}))},submitText:l("signUp")},r.a.createElement(it,{autoFocus:!0,label:l("home.dialog.name"),type:"text",value:n.fullName,validators:["required"],errorMessages:[l("home.dialog.validation.required")],onChange:d("fullName")}),r.a.createElement(zt,{onChange:d("email"),value:n.email}),r.a.createElement(ut,{onChange:d("password"),value:n.password}),r.a.createElement(y.a,{variant:"body2",color:"textSecondary",className:s.dialogText},l("home.dialog.terms"))))},Ut=function(){var e=Object(a.useState)(""),t=Object(q.a)(e,2),n=t[0],c=t[1],o=st(ze),i=o.success,u=o.performAction,l=Object(O.a)().t;return r.a.createElement(r.a.Fragment,null,r.a.createElement(lt,{success:i,text:l("home.dialog.success.resetPassword")}),r.a.createElement(ot,{onSubmit:function(e){e.preventDefault(),u(n,(function(){return c("")}))},submitText:l("reset")},r.a.createElement(zt,{autoFocus:!0,onChange:function(e){var t=e.target;c(t.value)},value:n})))},Ht=function(){var e=Object(a.useState)(""),t=Object(q.a)(e,2),n=t[0],c=t[1],o=st(Ve),i=o.success,u=o.performAction,l=Object(O.a)().t,s=new URLSearchParams(Object(ne.h)().search),d=s.get("email"),p=s.get("token");return r.a.createElement(r.a.Fragment,null,r.a.createElement(lt,{success:i,text:l("home.dialog.success.resetPassword")}),r.a.createElement(ot,{onSubmit:function(e){e.preventDefault(),u({email:d,resetToken:p,newPassword:n},(function(){return c("")}))},submitText:l("changePassword")},r.a.createElement(ut,{autoFocus:!0,passwordChange:!0,onChange:function(e){var t=e.target;c(t.value)},value:n})))},Jt=function(){var e=st(Le),t=e.success,n=e.performAction,c=Object(O.a)().t,o=Object(u.d)((function(e){return e.user.actionPending})),i=new URLSearchParams(Object(ne.h)().search),l=i.get("email"),s=i.get("token"),d=Vt();return Object(a.useEffect)((function(){n({email:l,token:s})}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement(lt,{success:t,text:c("home.dialog.success.confirmEmail")}),r.a.createElement(he.a,null,r.a.createElement("div",{className:d.dialogConfirmContainer},o?r.a.createElement(r.a.Fragment,null,r.a.createElement(at.a,{className:d.dialogProgress}),r.a.createElement(y.a,null,c("home.dialog.pleaseWait"))):r.a.createElement(y.a,null,c("home.dialog.closeWindow")))))},_t=function(){var e=Object(O.a)().t,t=ae(),n=t.isDialogOpen,a=t.closeDialog,c=t.onExited,o=Object(ne.h)().pathname.substring(1);return r.a.createElement(we,{centeredTitle:!0,closeButton:!0,title:o?e("home.dialog.".concat(o)):"",open:n,onClose:a,onExited:c,maxWidth:"xs",fullWidth:!0},r.a.createElement(Mt,{locationKey:o}),r.a.createElement(ne.b,{exact:!0,path:"/login",component:qt}),r.a.createElement(ne.b,{exact:!0,path:"/register",component:Wt}),r.a.createElement(ne.b,{exact:!0,path:"/resetPassword",component:Ut}),r.a.createElement(ne.b,{exact:!0,path:"/changePassword",component:Ht}),r.a.createElement(ne.b,{exact:!0,path:"/confirmEmail",component:Jt}))},Gt=function(){var e=Object(ne.h)(),t=ae(),n=t.isDialogOpen,c=t.openDialog,o=t.closeDialog,i=Object(u.d)((function(e){return e.user.isLoggedIn}));return Object(a.useEffect)((function(){"/"!==e.pathname&&!n&&c(),"/"===e.pathname&&n&&o()}),[e]),r.a.createElement(r.a.Fragment,null,i&&r.a.createElement(ne.a,{to:"invoices"}),r.a.createElement(_t,null),r.a.createElement(Ft,null),r.a.createElement(Rt,null),r.a.createElement(Pt.a,{my:5},r.a.createElement(S.a,{variant:"fullWidth"})),r.a.createElement(At,null))},Yt=n(147),Kt=n(789),$t=function(e){var t=e.error,n=e.clearAction,c=e.onClose,o=Object(a.useState)(""),i=Object(q.a)(o,2),l=i[0],s=i[1],d=Object(O.a)().t,p=Object(u.c)(),m=function(){c?c():p(n(null))};return Object(a.useEffect)((function(){t&&s(t)}),[t]),r.a.createElement(we,{open:Boolean(t),onClose:m,title:l?d("errors.".concat(l)):"",content:r.a.createElement(Kt.a,null,function(){var e=["create","invoice","counterparty"];return d("errors.text.".concat(function(){switch(l){case e.includes(l):return"create";case"createInvoice":return"createInvoice";case"delete":return"delete";case"details":return"details";default:return"serverDown"}}()))}()),actions:r.a.createElement(pe.a,{onClick:m,color:"primary"},d("cancel"))})},Zt=function(e){var t=e.actionPending,n=e.className,c=Object(a.useState)(!1),o=Object(q.a)(c,2),i=o[0],u=o[1];return Object(a.useEffect)((function(){var e=null;return t!==i&&(t?u(!0):e=setTimeout((function(){u(t)}),1e3)),function(){return e&&clearTimeout(e)}}),[t]),r.a.createElement(Dt.a,{open:i,transitionDuration:500,className:n},r.a.createElement(at.a,null))},Qt=function(){var e=Object(O.a)().t,t=Object(ne.h)(),n=e("invoices.header.".concat(t.pathname.split("/")[2]));return r.a.createElement(y.a,{variant:"h5"},n)},Xt=n(794),en=n(806),tn=function(e){var t=e.validators,n=Object(ve.a)(e,["validators"]),a=Object(O.a)().t,c=t&&t.map((function(e){return a("validation.".concat(e))}));return r.a.createElement(Qe.TextValidator,Object.assign({variant:"outlined",fullWidth:!0,validators:t,errorMessages:c},n))},nn=function(e){var t=e.textProps,n=Object(ve.a)(e,["textProps"]),a=Object(Xt.a)({limit:5});return r.a.createElement(en.a,Object.assign({freeSolo:!0,fullWidth:!0,filterOptions:a,renderInput:function(e){return r.a.createElement(tn,Object.assign({},e,t,{variant:"outlined"}))}},n))},an=n(246),rn=n(472),cn=n(40),on=n(296),un=function(e){var t=e.onChange,n=e.minDate,a=Object(ve.a)(e,["onChange","minDate"]),c=Object(O.a)().i18n;return r.a.createElement(cn.a,{utils:an.default,locale:rn[c.language]},r.a.createElement(on.b,Object.assign({disablePast:!Boolean(n),variant:"inline",inputVariant:"outlined",fullWidth:!0,format:"dd/MM/yyyy",onChange:function(e,n){return t(new Date(e).toISOString())}},n&&{minDate:n},a)))},ln=n(795),sn=function(e){var t=e.onClick;return r.a.createElement(Pt.a,{ml:1},r.a.createElement(j.a,{onClick:t,size:"small"},r.a.createElement(ln.a,{color:"primary"})))},dn=function(e){var t=e.update,n=e.select,a=e.editorData,c=Object(O.a)().t,o=Object(u.d)((function(e){return e.invoice.employeeData})),i=a.employee,l=function(e,a){return r.a.createElement(nn,{disabled:Boolean(null===i||void 0===i?void 0:i.id),options:o,getOptionLabel:function(t){return t[e]},onChange:function(e,t,a){return"select-option"===a&&n(t)},inputValue:(null===i||void 0===i?void 0:i[e])||"",textProps:{label:a,validators:["fullName"===e?"required":"phoneNumber"],onChange:t(e,!0),value:null===i||void 0===i?void 0:i[e]}})};return{Number:r.a.createElement(tn,{label:c("invoices.number"),validators:["required"],onChange:t("number"),value:a.number}),Date:r.a.createElement(un,{minDate:Boolean(a.id)&&new Date(a.date),label:c("invoices.date"),onChange:t("date"),value:a.date}),FullName:l("fullName",c("employees.fullName")),PhoneNumber:l("phoneNumber",c("employees.phoneNumber")),Clear:r.a.createElement(sn,{onClick:function(){return n(null)}})}},pn=n(469),mn=n(169),fn={type:null,number:"",date:(new Date).toISOString(),employee:null,counterparty:null,items:[],paymentType:null,paymentDeadline:null},bn=function(e){return gn.findIndex((function(t){return t.id===e}))},vn=function(e){return gn[e].id},gn=[{id:"vat",symbol:"FV"},{id:"proforma",symbol:"FP"},{id:"receipt",symbol:"PA"},{id:"corrective",symbol:"FC"}],hn=function(e,t,n){return e===n.type&&t===new Date(n.date).getMonth()},On=n(328),En=n(329),jn=n.n(En),yn=n(468),xn=n.n(yn);jn.a.vfs=xn.a.pdfMake.vfs;var wn,Dn,Cn,kn,Pn=jn.a,Nn=n(119),In=function(e,t){var n=e.type,a=e.number,r=e.date,c=e.paymentDeadline,o=e.paymentType,i=t("invoices.paymentTypes",{returnObjects:!0});return[{text:t("invoices.header.".concat(vn(n))),style:"header",margin:[0,0,0,10]},{layout:"noBorders",margin:[0,0,0,20],table:{body:[["".concat(t("invoices.number"),":"),a],["".concat(t("invoices.date"),":"),Object(mn.default)(new Date(r),"dd.MM.yyyy")]].concat(Object(Nn.a)(n!==bn("receipt")?[["".concat(t("invoices.deadline"),":"),Object(mn.default)(new Date(c),"dd.MM.yyyy")],["".concat(t("invoices.paymentType"),":"),i[o]]]:[]))}}]},Sn=function(e,t,n){var a={hLineWidth:function(e){return 1===e?1:0},vLineWidth:function(){return 0}};return{columns:[{layout:a,margin:[0,0,20,0],table:{headerRows:1,widths:["*"],body:[[{text:n("invoices.seller"),fontSize:14}],[{text:t.companyName,margin:[0,5,0,0]}],[t.address],["".concat(t.postalCode," ").concat(t.city)],["".concat(n("counterparties.nip"),": ").concat(t.nip)]]}},{layout:a,margin:[20,0,0,0],table:{headerRows:1,widths:["*"],body:[[{text:n("invoices.buyer"),fontSize:14}],[{text:e.name,margin:[0,5,0,0]}],[e.address],["".concat(e.postalCode," ").concat(e.city)],["".concat(n("counterparties.nip"),": ").concat(e.nip)]]}}]}},Tn=function(e,t){return e.map((function(e,n){var a=e.name,r=e.unit,c=e.count,o=e.netPrice,i=e.grossPrice,u=e.vatRate,l=o*c,s=i*c,d=s-l;return[n+1,a,r,c,o.toFixed(2),t[u],l.toFixed(2),d.toFixed(2),s.toFixed(2)]}))},Rn=function(e,t,n){var a=["23%","8%","5%","0%",n("products.vatExempt"),n("products.vatNotApplicable")],r=Tn(e,a);return{layout:{fillColor:function(e){return 0===e?"#EEEEEE":null}},margin:[0,t===bn("receipt")?0:40,0,0],table:{headerRows:1,widths:["auto","*","auto","auto","auto","auto","auto","auto","auto"],body:[[n("products.ordinal"),n("products.name"),n("products.unit"),n("products.count"),n("products.netPrice"),"VAT",n("invoices.netValue"),n("invoices.vatValue"),n("invoices.grossValue")]].concat(Object(Nn.a)(r))}}},An=function(e,t){var n=e.reduce((function(e,t){var n=t.vatRate;return e.includes(n)?e:[].concat(Object(Nn.a)(e),[n])}),[]);return n.sort((function(e,t){return e-t})),n.map((function(n){var a=Fn("netPrice",n,e),r=Fn("grossPrice",n,e),c=r-a;return[t[n],a.toFixed(2),c.toFixed(2),r.toFixed(2)]}))},Fn=function(e,t,n){return n.reduce((function(n,a){return a.vatRate===t?n+Number(a[e])*Number(a.count):n}),0)},Bn=function(e,t){var n=["23%","8%","5%","0%",t("products.vatExempt"),t("products.vatNotApplicable")],a=e.netTotal.toFixed(2),r=e.grossTotal.toFixed(2),c=(e.grossTotal-e.netTotal).toFixed(2),o=An(e.items,n);return[{columns:[{width:"*",text:""},{width:"auto",layout:{fillColor:function(e){return 0===e||3===e?"#EEEEEE":null}},margin:[0,40,0,0],table:{headerRows:1,widths:["auto","auto","auto","auto"],body:[["VAT",t("invoices.netValue"),t("invoices.vatValue"),t("invoices.grossValue")]].concat(Object(Nn.a)(o),[[{text:t("invoices.total"),bold:!0},{text:a,bold:!0},{text:c,bold:!0},{text:r,bold:!0}]])}}]},{style:"summary",layout:"noBorders",margin:[0,40,0,0],table:{headerRows:1,keepWithHeaderRows:!0,body:[[t("invoices.total"),"".concat(e.grossTotal.toFixed(2)," z\u0142")],[{text:t("invoices.amountDue"),bold:!0},{text:"".concat(e.grossTotal.toFixed(2)," z\u0142"),bold:!0}]]}}]},Mn=function(e,t){return function(n,a){return n===a&&[{margin:[80,40],columns:[{margin:[0,0,20,0],table:{widths:["*"],body:[[{text:e,alignment:"center",border:[!1,!1,!1,!1]}],[{text:t("invoices.issuerSignature"),alignment:"center",border:[!1,!0,!1,!1]}]]}},{margin:[20,0,0,0],table:{widths:["*"],body:[[{text:" ",alignment:"center",border:[!1,!1,!1,!1]}],[{text:t("invoices.recipientSignature"),alignment:"center",border:[!1,!0,!1,!1]}]]}}]}]}},Ln=function(e,t,n){var a=e.employee,r=e.counterparty,c=e.items,o=e.type;return{content:[].concat(Object(Nn.a)(In(e,n)),[function(){if(o!==bn("receipt"))return Sn(r,t,n)}(),Rn(c,o,n)],Object(Nn.a)(Bn(e,n))),footer:Mn(a.fullName,n),pageMargins:[40,40,40,100],defaultStyle:{fontSize:10},styles:{header:{alignment:"left",fontSize:18,bold:!0},counterpartiesHeader:{fontSize:14},summary:{fontSize:12}}}},zn=function(e,t){var n=Object.keys(t).filter((function(n){return t[n]!==e[n]}));if(0!==n.length)return n.reduce((function(e,n){return Object(C.a)(Object(C.a)({},e),{},Object(ke.a)({},n,t[n]))}),{})},Vn=function(){var e=function(){var e=Object(Ie.a)(Ne.a.mark((function e(){var t,n,a;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c({method:function(){return Re().get("Employees")},errorData:"employees"});case 2:return t=e.sent,e.next=5,c({method:function(){return Re().get("Counterparties")},errorData:"counterparties"});case 5:return n=e.sent,e.next=8,c({method:function(){return Re().get("Invoices")},errorData:"invoices"});case 8:return a=(a=e.sent).map((function(e){var a=e.employeeId,r=e.counterpartyId,c=Object(ve.a)(e,["employeeId","counterpartyId"]);return Object(C.a)(Object(C.a)({},c),{},{employee:t.find((function(e){return e.id===a})),counterparty:n.find((function(e){return e.id===r}))})})),e.abrupt("return",{invoices:a,employees:t,counterparties:n});case 11:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(Ie.a)(Ne.a.mark((function e(t){return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.id){e.next=6;break}return e.next=3,c({method:function(){return Re().post("Employees",t)},errorData:"employee"});case 3:return e.abrupt("return",e.sent.id);case 6:return e.abrupt("return",t.id);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n=function(){var e=Object(Ie.a)(Ne.a.mark((function e(t,n){return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((null===t||void 0===t?void 0:t.id)||n===bn("receipt")){e.next=6;break}return e.next=3,c({method:function(){return Re().post("Counterparties",t)},errorData:"counterparty"});case 3:return e.abrupt("return",e.sent.id);case 6:return e.abrupt("return",null===t||void 0===t?void 0:t.id);case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),a=function(){var e=Object(Ie.a)(Ne.a.mark((function e(t,n){var a,r;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Ne.a.mark((function e(a){var r,o,i,u,l;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n[a],o=r.count,i=r.unit,r.editorId,u=Object(ve.a)(r,["count","unit","editorId"]),l=n[a].id){e.next=6;break}return e.next=5,c({method:function(){return Re().post("Products",u)},errorData:"product"});case 5:l=e.sent.id;case 6:return e.next=8,c({method:function(){return Re().post("InvoiceItems",{invoiceId:t,productId:l,index:a,count:o,unit:i})},errorData:"item"});case 8:case"end":return e.stop()}}),e)})),r=0;case 2:if(!(r<n.length)){e.next=7;break}return e.delegateYield(a(r),"t0",4);case 4:r++,e.next=2;break;case 7:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),r=function(){var e=Object(Ie.a)(Ne.a.mark((function e(t,n,r){var o,u,l;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(t,r.filter((function(e){return void 0===e.itemId})));case 2:o=Object(On.a)(n),e.prev=3,l=Ne.a.mark((function e(){var t,n,a,o;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=u.value,-1===(n=r.findIndex((function(e){return e.itemId===t.itemId})))){e.next=11;break}if(a=Object(C.a)(Object(C.a)({},i(r[n])),{},{index:n}),o=zn(i(t),a),e.t0=o,!e.t0){e.next=9;break}return e.next=9,c({method:function(){return Re().put("InvoiceItems",Object(C.a)(Object(C.a)({},o),{},{itemId:t.itemId}))},errorData:"item"});case 9:e.next=13;break;case 11:return e.next=13,c({method:function(){return Re().delete("InvoiceItems/".concat(t.itemId))},errorData:"item"});case 13:case"end":return e.stop()}}),e)})),o.s();case 6:if((u=o.n()).done){e.next=10;break}return e.delegateYield(l(),"t0",8);case 8:e.next=6;break;case 10:e.next=15;break;case 12:e.prev=12,e.t1=e.catch(3),o.e(e.t1);case 15:return e.prev=15,o.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[3,12,15,18]])})));return function(t,n,a){return e.apply(this,arguments)}}(),c=function(){var e=Object(Ie.a)(Ne.a.mark((function e(t){var n,a,r;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.method,a=t.errorData,e.next=3,Ae(n(),a);case 3:if("ERROR"!==(r=e.sent).type){e.next=6;break}throw new Error(r.data);case 6:return e.abrupt("return",r.data);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o=function(e){var t=e.employee,n=e.counterparty,a=(e.items,Object(ve.a)(e,["employee","counterparty","items"]));return Object(C.a)(Object(C.a)({},a),{},{employeeId:t.id,counterpartyId:null===n||void 0===n?void 0:n.id})},i=function(e){return{id:e.id,index:e.index,count:e.count,unit:e.unit}};return{createPayload:function(e){return Object(Ie.a)(Ne.a.mark((function r(){var o,i,u,l,s,d,p;return Ne.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=e.employee,i=e.counterparty,u=e.items,l=Object(ve.a)(e,["employee","counterparty","items"]),r.next=3,t(o);case 3:return s=r.sent,r.next=6,n(i,l.type);case 6:return d=r.sent,r.next=9,c({method:function(){return Re().post("Invoices",Object(C.a)(Object(C.a)({},l),{},{employeeId:s,counterpartyId:d}))},errorData:"invoice"});case 9:return p=r.sent.id,r.next=12,a(p,u);case 12:case"end":return r.stop()}}),r)})))},getPayload:e,updatePayload:function(e,a){return Object(Ie.a)(Ne.a.mark((function i(){var u,l,s,d,p,m,f,b,v,g;return Ne.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return u=a.id,l=a.type,s=a.employee,d=a.counterparty,p=a.items,m=Object(ve.a)(a,["id","type","employee","counterparty","items"]),f=o(e),i.next=4,t(s);case 4:return b=i.sent,i.next=7,n(d,l);case 7:if(v=i.sent,g=zn(f,Object(C.a)(Object(C.a)({},m),{},{employeeId:b,counterpartyId:v})),i.t0=g,!i.t0){i.next=13;break}return i.next=13,c({method:function(){return Re().put("Invoices",Object(C.a)({id:u,type:l},g))},errorData:"invoice"});case 13:return i.next=15,r(a.id,e.items,p);case 15:case"end":return i.stop()}}),i)})))},exportPayload:function(e,t){return Object(Ie.a)(Ne.a.mark((function n(){var a,r,o,i,u;return Ne.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,c({method:function(){return Re().get("InvoiceItems/".concat(e.id))},errorData:"export"});case 2:a=n.sent,r=[],o=Object(On.a)(a),n.prev=5,u=Ne.a.mark((function e(){var t,n;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=i.value,e.next=3,c({method:function(){return Re().get("Products/".concat(t.id))},errorData:"export"});case 3:n=e.sent,r.push(Object(C.a)(Object(C.a)({},t),n));case 5:case"end":return e.stop()}}),e)})),o.s();case 8:if((i=o.n()).done){n.next=12;break}return n.delegateYield(u(),"t0",10);case 10:n.next=8;break;case 12:n.next=17;break;case 14:n.prev=14,n.t1=n.catch(5),o.e(n.t1);case 17:return n.prev=17,o.f(),n.finish(17);case 20:Pn.createPdf(Ln(Object(C.a)(Object(C.a)({},e),{},{items:r}),t,m.t.bind(m))).download("".concat(e.number,".pdf"));case 21:case"end":return n.stop()}}),n,null,[[5,14,17,20]])})))}}},qn={actionPending:!1,error:null,invoiceData:[],employeeData:[],counterpartyData:[],productData:[],editorData:fn,oldEditorData:null},Wn=Object(_.b)("invoice/create",function(){var e=Object(Ie.a)(Ne.a.mark((function e(t,n){var a;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.dispatch,e.next=3,Kn(Qn(t),a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Un=Object(_.b)("invoice/get",function(){var e=Object(Ie.a)(Ne.a.mark((function e(t,n){var a;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.dispatch,e.next=3,Kn(Xn,a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Hn=Object(_.b)("invoice/update",function(){var e=Object(Ie.a)(Ne.a.mark((function e(t,n){var a,r,c;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.oldInvoice,r=t.invoice,c=n.dispatch,e.next=4,Kn(ea(a,r),c);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Jn=Object(_.b)("invoice/delete",function(){var e=Object(Ie.a)(Ne.a.mark((function e(t,n){var a;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.dispatch,e.next=3,$n({method:function(){return Re().delete("Invoices/".concat(t))},errorData:"delete"},a);case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),_n=Object(_.b)("invoice/export",function(){var e=Object(Ie.a)(Ne.a.mark((function e(t,n){var a,r;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.dispatch,r=n.getState,e.next=3,Kn(ta(t,r().user.userData),a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Gn=Object(_.b)("invoice/getProducts",function(){var e=Object(Ie.a)(Ne.a.mark((function e(t,n){var a;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.dispatch,e.next=3,$n({method:function(){return Re().get("Products")},errorData:"getProducts"},a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Yn=Object(_.b)("invoice/getItems",function(){var e=Object(Ie.a)(Ne.a.mark((function e(t,n){var a,r,c;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.dispatch,r=n.getState,e.next=3,$n({method:function(){return Re().get("InvoiceItems/".concat(t))},errorData:"getInvoiceItems"},a);case 3:return c=e.sent,e.abrupt("return",c.map((function(e){var t=r().invoice.productData.find((function(t){return t.id===e.id}));return Object(C.a)(Object(C.a)({editorId:Object(_.d)()},e),t)})));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Kn=function(){var e=Object(Ie.a)(Ne.a.mark((function e(t,n){var a;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n(ra(!0)),e.next=4,t();case 4:return a=e.sent,n(ra(!1)),e.abrupt("return",a);case 9:throw e.prev=9,e.t0=e.catch(0),n(ca(e.t0.message)),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),$n=function(){var e=Object(Ie.a)(Ne.a.mark((function e(t,n){var a,r,c;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.method,r=t.errorData,n(ra(!0)),e.next=4,Ae(a(),r);case 4:if(c=e.sent,n(ra(!1)),"ERROR"!==c.type){e.next=9;break}throw n(ca(c.data)),new Error(c.data);case 9:return e.abrupt("return",c.data);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Zn=Vn(),Qn=Zn.createPayload,Xn=Zn.getPayload,ea=Zn.updatePayload,ta=Zn.exportPayload,na=Object(_.c)({name:"invoice",initialState:qn,reducers:{setActionPending:function(e,t){e.actionPending=t.payload},setError:function(e,t){e.actionPending=!1,e.error=t.payload},setEditorData:function(e,t){e.editorData=t.payload},setOldEditorData:function(e,t){e.oldEditorData=t.payload},addItem:function(e,t){e.editorData.items.push(t.payload)},updateItem:function(e,t){var n=e.editorData.items.findIndex((function(e){return e.editorId===t.payload.editorId}));e.editorData.items[n]=t.payload},deleteItem:function(e,t){var n=e.editorData.items.findIndex((function(e){return e.editorId===t.payload}));e.editorData.items.splice(n,1)}},extraReducers:(wn={},Object(ke.a)(wn,Un.fulfilled,(function(e,t){var n=t.payload,a=n.invoices,r=n.employees,c=n.counterparties;e.invoiceData=a,e.employeeData=r,e.counterpartyData=c})),Object(ke.a)(wn,Jn.fulfilled,(function(e,t){e.invoiceData=e.invoiceData.filter((function(e){return e.id!==t.payload}))})),Object(ke.a)(wn,Gn.fulfilled,(function(e,t){e.productData=t.payload})),Object(ke.a)(wn,Yn.fulfilled,(function(e,t){e.editorData.items=t.payload,e.oldEditorData=Object(C.a)({},e.editorData)})),wn)}),aa=na.actions,ra=aa.setActionPending,ca=aa.setError,oa=aa.setEditorData,ia=(aa.setOldEditorData,aa.addItem),ua=aa.updateItem,la=aa.deleteItem,sa=na.reducer,da=function(e){var t=Object(u.c)(),n=Object(u.d)((function(e){return e.invoice.editorData})),r=Object(u.d)((function(e){return e.invoice.invoiceData}));Object(a.useEffect)((function(){n.id||c()}),[]),pt((function(){o()}),[n.date]);var c=function(){var a=e===bn("receipt")?null:0;t(oa(Object(C.a)(Object(C.a)({},n),{},{type:e,paymentType:a},i())))},o=function(){t(oa(Object(C.a)(Object(C.a)({},n),i())))},i=function(){return{number:function(e,t,n){var a=1,r=new Date(t);n.forEach((function(t){return hn(e,r.getMonth(),t)&&a++}));var c=gn[e].symbol,o=(""+a).padStart(4,"0"),i=Object(mn.default)(r,"MM"),u=Object(mn.default)(r,"yyyy");return"".concat(c," ").concat(o,"/").concat(i,"/").concat(u)}(e,n.date,r),paymentDeadline:e!==bn("receipt")?Object(pn.a)(new Date(n.date),{days:7}).toISOString():null}};return{update:function(e,a){return function(r){var c=r.target?r.target.value:r;t(oa(a?Object(C.a)(Object(C.a)({},n),{},{employee:Object(C.a)(Object(C.a)({},n.employee),{},Object(ke.a)({},e,c))}):Object(C.a)(Object(C.a)({},n),{},Object(ke.a)({},e,c))))}},select:function(e){t(oa(Object(C.a)(Object(C.a)({},n),{},{employee:e})))},editorData:n}},pa=function(e){var t=e.type,n=Object(O.a)().t,a=dn(da(t));return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex"},r.a.createElement(y.a,{variant:"h6"},n("invoices.editor.details")),a.Clear),r.a.createElement(Pt.a,{mt:2},r.a.createElement(Nt.a,{container:!0,spacing:2},r.a.createElement(Nt.a,{xs:12,sm:6,item:!0},a.Number),r.a.createElement(Nt.a,{xs:12,sm:6,item:!0},a.Date),r.a.createElement(Nt.a,{xs:6,item:!0},a.FullName),r.a.createElement(Nt.a,{xs:6,item:!0},a.PhoneNumber))))},ma=function(e){var t=e.label,n=Object(ve.a)(e,["label"]);return r.a.createElement(pe.a,Object.assign({variant:"outlined",color:"primary",size:"large"},n),t)},fa=function(e,t){return ga(e*ha(t))},ba=function(e,t){return ga(e/ha(t))},va=function(e,t){return t.reduce((function(t,n){return t+Number(n[e])*Number(n.count)}),0)||0},ga=function(e){return isNaN(e)?void 0:Number(Math.round(e+"e2")+"e-2")},ha=function(e){switch(e){case 0:return 1.23;case 1:return 1.08;case 2:return 1.05;default:return 1}},Oa=Object(k.a)((function(e){return{bottomContainer:{display:"flex",flexWrap:"wrap",justifyContent:"space-between",alignItems:"flex-start"},addButton:{marginRight:e.spacing(2),marginBottom:e.spacing(2)},summaryContainer:{padding:e.spacing(3),textAlign:"end"}}})),Ea=function(){var e=Object(O.a)().t,t=Object(u.d)((function(e){return e.invoice.editorData.items})),n=va("netPrice",t),a=va("grossPrice",t),c=Oa();return r.a.createElement(Yt.a,{variant:"outlined",className:c.summaryContainer},r.a.createElement(y.a,{variant:"body1"},e("invoices.editor.netTotal",{sum:n.toFixed(2)})),r.a.createElement(y.a,{variant:"body1"},e("invoices.editor.vatTotal",{sum:(a-n).toFixed(2)})),r.a.createElement(y.a,{variant:"body1",color:"primary"},e("invoices.editor.grossTotal",{sum:a.toFixed(2)})))},ja=function(){var e=Object(u.c)();return function(){var t=Object(Ie.a)(Ne.a.mark((function t(n){var a,r,c,o;return Ne.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.action,r=n.onSuccess,c=n.rejectOnError,o=void 0!==c&&c,t.next=3,e(a).then(_.e).then((function(e){return r&&r(e)})).catch((function(e){if(o)throw new Error}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},ya=function(){var e=Object(u.c)(),t=ja(),n=Object(u.d)((function(e){return e.invoice.editorData})),r=n.items;Object(a.useEffect)((function(){t({action:Gn(),onSuccess:function(){return n.id&&e(Yn(n.id))}})}),[]),Object(a.useEffect)((function(){0===r.length&&c()}),[r]);var c=function(){e(ia({editorId:Object(_.d)(),name:"",description:"",count:"",unit:"",netPrice:"",grossPrice:"",vatRate:0}))};return{add:c,update:function(t,n){return function(a){var r="count"===n?a.target.valueAsNumber:a.target.value;e(ua(Object(C.a)(Object(C.a)({},t),{},Object(ke.a)({},n,r))))}},remove:function(t){return function(){e(la(t))}},select:function(t,n){e(ua(Object(C.a)(Object(C.a)({},t),n)))}}},xa=n(256),wa=function(e){var t=e.children,n=Object(ve.a)(e,["children"]);return r.a.createElement(xa.a,Object.assign({select:!0,variant:"outlined",fullWidth:!0},n),t)},Da=function(e){var t=Object(O.a)().t,n=["23%","8%","5%","0%",t("products.vatExempt"),t("products.vatNotApplicable")];return r.a.createElement(wa,e,n.map((function(e,t){return r.a.createElement(z.a,{key:t,value:t},e)})))},Ca=function(e){var t=e.update,n=e.select,a=e.remove,c=Object(O.a)().t,o=Object(u.d)((function(e){return e.invoice.productData})),i=function(e,t){return function(a){var r,c=a.target.valueAsNumber,o="netPrice"===e?fa(c,t.vatRate):ba(c,t.vatRate),i="netPrice"===e?"grossPrice":"netPrice";n(t,(r={},Object(ke.a)(r,e,c),Object(ke.a)(r,i,o),r))}},l=function(e){return function(t){var a=t.target.value;n(e,{vatRate:a,grossPrice:fa(e.netPrice,a)})}};return function(e){return{Name:r.a.createElement(nn,{disabled:Boolean(e.id),options:o,getOptionLabel:function(e){return e.name},onChange:function(t,a,r){return"select-option"===r&&n(e,a)},inputValue:e.name,renderOption:function(e){var t=e.name,n=e.netPrice;return r.a.createElement(y.a,{variant:"body1"},"".concat(t," (").concat(n.toFixed(2)," z\u0142)"))},textProps:{label:c("products.name"),validators:["required"],onChange:t(e,"name"),value:e.name}}),Description:r.a.createElement(tn,{disabled:Boolean(e.id),label:c("products.description"),onChange:t(e,"description"),value:e.description}),Count:r.a.createElement(tn,{label:c("products.count"),validators:["required","positiveInt"],type:"number",onChange:t(e,"count"),value:e.count||""}),Unit:r.a.createElement(tn,{label:c("products.unit"),validators:["required"],onChange:t(e,"unit"),value:e.unit}),NetPrice:r.a.createElement(tn,{disabled:Boolean(e.id),label:c("products.netPrice"),validators:["currency"],type:"number",onChange:i("netPrice",e),value:e.netPrice||""}),GrossPrice:r.a.createElement(tn,{disabled:Boolean(e.id),label:c("products.grossPrice"),validators:["currency"],type:"number",onChange:i("grossPrice",e),value:e.grossPrice||""}),VatRate:r.a.createElement(Da,{disabled:Boolean(e.id),label:c("products.vatRate"),onChange:l(e),value:e.vatRate}),Delete:r.a.createElement(Pt.a,{mt:.5,ml:1,mr:-2},r.a.createElement(j.a,{onClick:a(e.editorId)},r.a.createElement(ln.a,{color:"primary"})))}}},ka=function(){var e=ya(),t=Ca(e);return{actions:e,itemRows:Object(u.d)((function(e){return e.invoice.editorData.items})).map((function(e){return{editorId:e.editorId,fields:t(e)}}))}},Pa=function(){var e=Object(O.a)().t,t=ka(),n=t.actions,a=t.itemRows,c=Oa();return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{variant:"h6"},e("invoices.editor.products")),r.a.createElement(Pt.a,{mt:2,mb:4},a.map((function(e){var t=e.editorId,n=e.fields;return r.a.createElement("div",{key:t},r.a.createElement(Nt.a,{container:!0,spacing:2},r.a.createElement(Nt.a,{item:!0,xs:12,xl:5},r.a.createElement(Nt.a,{container:!0,spacing:2},r.a.createElement(Nt.a,{item:!0,xs:12,sm:6,xl:6},n.Name),r.a.createElement(Nt.a,{item:!0,xs:12,sm:6,xl:6},n.Description))),r.a.createElement(Nt.a,{item:!0,xs:12,xl:7},r.a.createElement(Nt.a,{container:!0,spacing:2},r.a.createElement(Nt.a,{item:!0,xs:6,md:2,xl:2},n.Count),r.a.createElement(Nt.a,{item:!0,xs:6,md:2,xl:2},n.Unit),r.a.createElement(Nt.a,{item:!0,xs:6,md:3,xl:3},n.NetPrice),r.a.createElement(Nt.a,{item:!0,xs:6,md:3,xl:3},n.GrossPrice),r.a.createElement(Nt.a,{item:!0,xs:6,md:2,xl:2,className:"d-flex"},n.VatRate,n.Delete)))),r.a.createElement(Pt.a,{my:3},r.a.createElement(S.a,null)))})),r.a.createElement("div",{className:c.bottomContainer},r.a.createElement(ma,{label:e("table.add"),onClick:n.add,className:c.addButton}),r.a.createElement(Ea,null))))},Na=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Pt.a,{mb:4},r.a.createElement(Nt.a,{container:!0},r.a.createElement(Nt.a,{item:!0,xs:12,lg:5},r.a.createElement(pa,{type:bn("receipt")})))),r.a.createElement(Pa,null))},Ia=function(){var e=Object(u.c)(),t=Object(u.d)((function(e){return e.invoice.editorData})),n=t.counterparty;return{update:function(a){return function(r){e(oa(Object(C.a)(Object(C.a)({},t),{},{counterparty:Object(C.a)(Object(C.a)({},n),{},Object(ke.a)({},a,r.target.value))})))}},select:function(n){e(oa(Object(C.a)(Object(C.a)({},t),{},{counterparty:n})))},counterparty:n}},Sa=function(e){var t=e.update,n=e.select,a=e.counterparty,c=Object(O.a)().t,o=Object(u.d)((function(e){return e.invoice.counterpartyData})),i=function(e,c){return r.a.createElement(nn,{disabled:Boolean(null===a||void 0===a?void 0:a.id),options:o,getOptionLabel:function(t){return t[e]},onChange:function(e,t,a){return"select-option"===a&&n(t)},inputValue:(null===a||void 0===a?void 0:a[e])||"",textProps:{label:c,validators:["nip"===e?"validNip":"required"],onChange:t(e),value:null===a||void 0===a?void 0:a[e]}})};return{Name:i("name",c("counterparties.name")),Nip:i("nip",c("counterparties.nip")),Address:r.a.createElement(tn,{disabled:Boolean(null===a||void 0===a?void 0:a.id),label:c("counterparties.address"),validators:["required"],onChange:t("address"),value:(null===a||void 0===a?void 0:a.address)||""}),PostalCode:r.a.createElement(tn,{disabled:Boolean(null===a||void 0===a?void 0:a.id),label:c("counterparties.postalCode"),validators:["postalCode"],onChange:t("postalCode"),value:(null===a||void 0===a?void 0:a.postalCode)||""}),City:r.a.createElement(tn,{disabled:Boolean(null===a||void 0===a?void 0:a.id),label:c("counterparties.city"),validators:["required"],onChange:t("city"),value:(null===a||void 0===a?void 0:a.city)||""}),Clear:r.a.createElement(sn,{onClick:function(){return n(null)}})}},Ta=function(){var e=Object(O.a)().t,t=Sa(Ia());return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex"},r.a.createElement(y.a,{variant:"h6"},e("invoices.editor.counterparty")),t.Clear),r.a.createElement(Pt.a,{mt:2,mb:4},r.a.createElement(Nt.a,{container:!0,spacing:2},r.a.createElement(Nt.a,{item:!0,xs:12,sm:8},t.Name),r.a.createElement(Nt.a,{item:!0,xs:12,sm:4},t.Nip),r.a.createElement(Nt.a,{item:!0,xs:12,sm:5},t.Address),r.a.createElement(Nt.a,{item:!0,xs:6,sm:3},t.PostalCode),r.a.createElement(Nt.a,{item:!0,xs:6,sm:4},t.City))))},Ra=function(){var e=Object(u.c)(),t=Object(u.d)((function(e){return e.invoice.editorData}));return{update:function(n){return function(a){var r=a.target?a.target.value:a;e(oa(Object(C.a)(Object(C.a)({},t),{},Object(ke.a)({},n,r))))}},editorData:t}},Aa=function(){var e=Object(O.a)().t,t=e("invoices.paymentTypes",{returnObjects:!0}),n=Ra(),a=n.update,c=n.editorData;return r.a.createElement(r.a.Fragment,null,r.a.createElement(y.a,{variant:"h6"},e("invoices.editor.payment")),r.a.createElement(Pt.a,{mt:2,mb:4},r.a.createElement(Nt.a,{container:!0,spacing:2},r.a.createElement(Nt.a,{item:!0,xs:12,sm:6,lg:3,xl:2},r.a.createElement(wa,{label:e("invoices.paymentType"),onChange:a("paymentType"),value:(null===c||void 0===c?void 0:c.paymentType)||0},t.map((function(e,t){return r.a.createElement(z.a,{key:t,value:t},e)})))),r.a.createElement(Nt.a,{item:!0,xs:12,sm:6,lg:3,xl:2},r.a.createElement(un,{minDate:Boolean(c.id)&&new Date(c.date),label:e("invoices.deadline"),onChange:a("paymentDeadline"),value:null===c||void 0===c?void 0:c.paymentDeadline})))))},Fa=function(e){var t=e.type;return r.a.createElement(r.a.Fragment,null,r.a.createElement(Nt.a,{container:!0,spacing:4},r.a.createElement(Nt.a,{item:!0,xs:12,lg:5},r.a.createElement(pa,{type:t})),r.a.createElement(Nt.a,{item:!0,xs:12,lg:7},r.a.createElement(Ta,null))),r.a.createElement(Pa,null),r.a.createElement(Aa,null))},Ba=Object(k.a)((function(e){return{contentContainer:{margin:e.spacing(3,0)}}})),Ma=function(){var e=Ba(),t=function(e){return function(t){return r.a.createElement(Fa,Object.assign({},t,{type:bn(e)}))}};return r.a.createElement("div",{className:e.contentContainer},r.a.createElement(ne.b,{exact:!0,path:"/invoices/vat",render:t("vat")}),r.a.createElement(ne.b,{exact:!0,path:"/invoices/proforma",render:t("proforma")}),r.a.createElement(ne.b,{exact:!0,path:"/invoices/receipt",component:Na}))},La=Object(k.a)((function(e){return{backdrop:Object(ke.a)({zIndex:e.zIndex.drawer+1},e.breakpoints.up("lg"),{paddingLeft:252}),editorContainer:{margin:e.spacing(3,0),padding:e.spacing(3)},footerDivider:{margin:e.spacing(0,-3)},footerContainer:{marginTop:e.spacing(3),width:"100%",display:"flex",justifyContent:"flex-end"}}})),za=function(){var e=Object(O.a)().t,t=La();return r.a.createElement(r.a.Fragment,null,r.a.createElement(S.a,{className:t.footerDivider}),r.a.createElement("div",{className:t.footerContainer},r.a.createElement(Pt.a,{mr:1},r.a.createElement(ct,{text:e("save")})),r.a.createElement(pe.a,{component:i.b,to:"/invoices",variant:"outlined",color:"primary",size:"large"},e("cancel"))))},Va=function(){var e=Object(u.c)(),t=Object(ne.g)(),n=ja(),r=Object(u.d)((function(e){return e.invoice.editorData})),c=Object(u.d)((function(e){return e.invoice.oldEditorData})),o=Object(u.d)((function(e){return e.invoice.actionPending})),i=Object(u.d)((function(e){return e.invoice.error}));Object(a.useEffect)((function(){return function(){return e(oa(fn))}}),[]);return{onSubmit:function(e){e.preventDefault();var a=Object(C.a)(Object(C.a)({},r),{},{netTotal:va("netPrice",r.items),grossTotal:va("grossPrice",r.items)}),o=r.id?Hn({oldInvoice:c,invoice:a}):Wn(a);n({action:o,onSuccess:function(){return t.replace("/invoices")}})},actionPending:o,error:i,onErrorDialogClose:function(){e(ca(null)),!r.id||"getProducts"!==i&&"getInvoiceItems"!==i||t.replace("/invoices")}}},qa=function(){var e=Va(),t=e.onSubmit,n=e.actionPending,a=e.error,c=e.onErrorDialogClose,o=La();return r.a.createElement(r.a.Fragment,null,r.a.createElement(Zt,{actionPending:n,className:o.backdrop}),r.a.createElement($t,{error:a,onClose:c}),r.a.createElement(Yt.a,{className:o.editorContainer},r.a.createElement(nt,{onSubmit:t,noValidate:!0},r.a.createElement(Qt,null),r.a.createElement(Ma,null),r.a.createElement(za,null))))},Wa=n(129),Ua=n.n(Wa),Ha=n(796),Ja=n(797),_a=n(798),Ga=n(799),Ya=function(e){var t=Object(O.a)().t,n=ja(),c=function(e,t){return Object(a.forwardRef)((function(n,a){return r.a.createElement(e,Object.assign({},n,{ref:a,color:"primary"},t))}))},o={Add:c(Ha.a,{fontSize:"large"}),Check:c(Ja.a),Clear:c(_a.a),Delete:c(ln.a),Edit:c(Ga.a),ResetSearch:c(_a.a,{style:{marginRight:-16},color:"inherit"})},i={body:{emptyDataSourceMessage:t("table.empty"),addTooltip:t("table.add"),deleteTooltip:t("table.delete"),editTooltip:t("table.edit"),filterRow:{filterTooltip:t("table.filter")},editRow:{deleteText:t("table.deleteText"),cancelTooltip:t("table.cancel"),saveTooltip:t("table.save")}},header:{actions:t("table.actions")},pagination:{labelDisplayedRows:t("table.rows"),labelRowsSelect:t("table.rowsSelect"),labelRowsPerPage:t("table.rowsPerPage"),firstAriaLabel:t("table.first"),firstTooltip:t("table.first"),previousAriaLabel:t("table.previous"),previousTooltip:t("table.previous"),nextAriaLabel:t("table.next"),nextTooltip:t("table.next"),lastAriaLabel:t("table.last"),lastTooltip:t("table.last")},toolbar:{nRowsSelected:t("table.rowsSelected"),searchTooltip:t("table.search"),searchPlaceholder:t("table.search")}},u=null;if(e){var l=e.createAction,s=e.updateAction,d=e.deleteAction;u={onRowAdd:function(e){return n({action:l(e),rejectOnError:!0})},onRowUpdate:function(){var e=Object(Ie.a)(Ne.a.mark((function e(t,a){var r;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(r=zn(a,t))){e.next=4;break}return e.next=4,n({action:s(Object(C.a)({id:t.id},r)),rejectOnError:!0});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),onRowDelete:function(e){return n({action:d(e.id),rejectOnError:!0})}}}return{options:{searchFieldVariant:"outlined",addRowPosition:"first",tableLayout:"fixed",draggable:!1},icons:o,localization:i,editable:u}},Ka=Object(k.a)((function(e){return{tableContainer:{margin:e.spacing(3,0),width:"100%"}}})),$a=function(e){var t=e.data,n=e.editableConfig,a=void 0===n?null:n,c=Object(ve.a)(e,["data","editableConfig"]),o=Ya(a),i=o.options,u=o.icons,l=o.localization,s=o.editable,d=Ka();return r.a.createElement("div",{className:d.tableContainer},r.a.createElement(Ua.a,Object.assign({data:t,options:i,icons:u,localization:l,editable:s},c)))},Za=function(e){var t=e.anchor,n=e.menuData,a=e.closeMenu,c=e.openDeleteDialog,o=Object(O.a)().t,l=Object(u.c)(),s=Object(u.d)((function(e){return e.invoice.editorData})),d=n||{},p=d.id,m=d.type,f=void 0!==m&&"/invoices/".concat(vn(m));return r.a.createElement(L.a,{anchorEl:t,open:Boolean(t),onClose:a},r.a.createElement(z.a,{component:i.b,to:f,onClick:function(){n.tableData;var e=Object(ve.a)(n,["tableData"]);l(oa(Object(C.a)(Object(C.a)({},s),e)))}},o("table.edit")),r.a.createElement(z.a,{onClick:function(){a(),c(p)}},o("table.delete")),r.a.createElement(z.a,{onClick:function(){a(),l(_n(n))}},o("table.export")))},Qa=function(e){var t=e.anchor,n=e.closeMenu,a=Object(O.a)().t,c=Object(u.c)(),o=Object(ne.g)(),i=a("invoices.options",{returnObjects:!0}),l=Object(u.d)((function(e){return e.user.userData}));return r.a.createElement(L.a,{anchorEl:t,open:Boolean(t),onClose:n},i.map((function(e,t){return r.a.createElement(z.a,{key:t,onClick:(a=e.id,function(){if("receipt"!==a&&null===l.nip)return n(),void c(ca("createInvoice"));o.replace("/invoices/".concat(a))})},e.label);var a})))},Xa=function(e){var t=e.open,n=e.onClose,a=e.id,c=Object(O.a)().t,o=Object(u.c)();return r.a.createElement(we,{open:t,onClose:n,title:c("table.delete"),content:r.a.createElement(Kt.a,null,c("table.deleteText")),actions:r.a.createElement(r.a.Fragment,null,r.a.createElement(pe.a,{onClick:function(){o(Jn(a)),n()},color:"primary"},c("table.delete")),r.a.createElement(pe.a,{onClick:n,color:"primary"},c("table.cancel")))})},er=n(800),tr=function(){var e=Object(O.a)().t,t=ht(),n=W(),c=W(),o={type:"currency",align:"left",currencySetting:{locale:"pl",currencyCode:"PLN"}},i=function(e,t){return Object(a.forwardRef)((function(n,a){return r.a.createElement(e,Object.assign({},n,{ref:a,color:"primary"},t))}))};return{columns:[{title:e("invoices.date"),field:"date",type:"date",width:190},{title:e("invoices.number"),field:"number",width:190},{title:e("invoices.counterparty"),field:"counterparty.name",width:190},Object(C.a)(Object(C.a)({title:e("invoices.netTotal"),field:"netTotal"},o),{},{width:190}),Object(C.a)(Object(C.a)({title:e("invoices.grossTotal"),field:"grossTotal"},o),{},{width:190}),{title:e("invoices.issuer"),field:"employee.fullName",width:190}],actions:[{icon:i(Ha.a,{fontSize:"large"}),tooltip:e("table.add"),isFreeAction:!0,onClick:n.openMenu},{icon:i(er.a),tooltip:e("table.more"),onClick:function(e,t){return c.openMenu(e,t)}}],dialog:t,createMenu:n,actionMenu:c}},nr=function(){var e=Object(O.a)().t,t=Object(u.c)(),n=Object(u.d)((function(e){return e.invoice.invoiceData})),c=Object(u.d)((function(e){return e.invoice.actionPending})),o=Object(u.d)((function(e){return e.invoice.error})),i=tr(),l=i.columns,s=i.actions,d=i.dialog,p=i.createMenu,m=i.actionMenu;return Object(a.useEffect)((function(){t(Un())}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement($t,{error:o,clearAction:ca}),r.a.createElement(Qa,{anchor:p.anchor,closeMenu:p.closeMenu}),r.a.createElement(Za,{anchor:m.anchor,menuData:m.menuData,closeMenu:m.closeMenu,openDeleteDialog:d.openDialog}),r.a.createElement(Xa,{open:d.isDialogOpen,onClose:d.closeDialog,id:d.dialogData}),r.a.createElement($a,{title:e("invoices.title"),isLoading:c,data:n,columns:l,actions:s}))},ar=function(){var e=Object(O.a)().t,t=Object(u.d)((function(e){return e.user.isLoggedIn}));return r.a.createElement(Pt.a,{mt:3,className:"text-center"},r.a.createElement(y.a,{variant:"h1",color:"primary"},"404"),r.a.createElement(y.a,{variant:"h2"},e("notFound.header")),r.a.createElement(Pt.a,{my:2},r.a.createElement(y.a,{variant:"h6",color:"textSecondary"},e("notFound.description"))),r.a.createElement(pe.a,{component:i.b,to:t?"/invoices":"/",variant:"contained",color:"primary"},e("notFound.button")))},rr=function(){return r.a.createElement(ne.d,null,r.a.createElement(ne.b,{exact:!0,path:"/invoices",component:nr}),r.a.createElement(ne.b,{exact:!0,path:["/invoices/vat","/invoices/proforma","/invoices/receipt"],component:qa}),r.a.createElement(ne.b,{component:ar}))},cr=Object(_.b)("product/create",function(){var e=Object(Ie.a)(Ne.a.mark((function e(t,n){var a;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.dispatch,e.next=3,lr({method:function(){return Re().post("Products",t)},errorData:"create"},a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),or=Object(_.b)("product/get",function(){var e=Object(Ie.a)(Ne.a.mark((function e(t,n){var a;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.dispatch,e.next=3,lr({method:function(){return Re().get("Products")},errorData:"get"},a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),ir=Object(_.b)("product/update",function(){var e=Object(Ie.a)(Ne.a.mark((function e(t,n){var a;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.dispatch,e.next=3,lr({method:function(){return Re().put("Products",t)},errorData:"update"},a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),ur=Object(_.b)("product/delete",function(){var e=Object(Ie.a)(Ne.a.mark((function e(t,n){var a;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.dispatch,e.next=3,lr({method:function(){return Re().delete("Products/".concat(t))},errorData:"delete"},a);case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),lr=function(){var e=Object(Ie.a)(Ne.a.mark((function e(t,n){var a,r,c;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.method,r=t.errorData,n(pr(!0)),e.next=4,Ae(a(),r);case 4:if(c=e.sent,n(pr(!1)),"ERROR"!==c.type){e.next=9;break}throw n(mr(c.data)),new Error(c.data);case 9:return e.abrupt("return",c.data);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),sr=Object(_.c)({name:"product",initialState:{actionPending:!1,error:null,productData:[]},reducers:{setActionPending:function(e,t){e.actionPending=t.payload},setError:function(e,t){e.error=t.payload}},extraReducers:(Dn={},Object(ke.a)(Dn,cr.fulfilled,(function(e,t){e.productData.push(t.payload)})),Object(ke.a)(Dn,or.fulfilled,(function(e,t){e.productData=t.payload})),Object(ke.a)(Dn,ir.fulfilled,(function(e,t){var n=e.productData.findIndex((function(e){return e.id===t.payload.id}));e.productData[n]=t.payload})),Object(ke.a)(Dn,ur.fulfilled,(function(e,t){e.productData=e.productData.filter((function(e){return e.id!==t.payload}))})),Dn)}),dr=sr.actions,pr=dr.setActionPending,mr=dr.setError,fr=sr.reducer,br=function(){var e=Object(O.a)().t,t=tt(),n=t.required,a=t.validate,c=function(e){return{type:"currency",align:"left",currencySetting:{locale:"pl",currencyCode:"PLN"},editComponent:o(e)}},o=function(e){return function(t){return r.a.createElement(Wa.MTableEditField,Object.assign({},t,{onChange:i(e,t)}))}},i=function(e,t){var n=t.rowData,a=t.onRowDataChange;return function(t){var r,c="netPrice"===e?fa(t,n.vatRate):ba(t,n.vatRate),o="netPrice"===e?"grossPrice":"netPrice";a(Object(C.a)(Object(C.a)({},n),{},(r={},Object(ke.a)(r,e,t),Object(ke.a)(r,o,c),r)))}},u=function(e){var t=e.rowData,n=e.onRowDataChange;return function(e){var a=Number(e);n(Object(C.a)(Object(C.a)({},t),{},{vatRate:a,grossPrice:fa(t.netPrice,a)}))}};return{columns:[{title:e("products.name"),field:"name",width:190,validate:function(e){return n(e.name)}},{title:e("products.description"),field:"description",width:165},Object(C.a)(Object(C.a)({title:e("products.netPrice"),field:"netPrice",width:190},c("netPrice")),{},{validate:function(e){return a("currency",e.netPrice,!0)}}),Object(C.a)(Object(C.a)({title:e("products.grossPrice"),field:"grossPrice",width:190},c("grossPrice")),{},{validate:function(e){return a("currency",e.grossPrice,!0)}}),{title:e("products.vatRate"),field:"vatRate",width:190,initialEditValue:0,editComponent:function(e){return r.a.createElement(Wa.MTableEditField,Object.assign({},e,{onChange:u(e)}))},lookup:{0:"23%",1:"8%",2:"5%",3:"0%",4:e("products.vatExempt"),5:e("products.vatNotApplicable")}}],editableConfig:{createAction:cr,updateAction:ir,deleteAction:ur}}},vr=function(){var e=Object(O.a)().t,t=Object(u.c)(),n=Object(u.d)((function(e){return e.product.productData})),c=Object(u.d)((function(e){return e.product.actionPending})),o=Object(u.d)((function(e){return e.product.error})),i=br(),l=i.columns,s=i.editableConfig;return Object(a.useEffect)((function(){t(or())}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement($t,{error:o,clearAction:mr}),r.a.createElement($a,{title:e("products.title"),isLoading:c,data:n,columns:l,editableConfig:s}))},gr=Object(_.b)("counterparty/create",function(){var e=Object(Ie.a)(Ne.a.mark((function e(t,n){var a;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.dispatch,e.next=3,yr({method:function(){return Re().post("Counterparties",t)},errorData:"create"},a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),hr=Object(_.b)("counterparty/getDetails",function(){var e=Object(Ie.a)(Ne.a.mark((function e(t,n){var a;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.dispatch,e.next=3,yr({method:function(){return Re().get("Counterparties/details/".concat(t))},errorData:"details"},a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Or=Object(_.b)("counterparty/get",function(){var e=Object(Ie.a)(Ne.a.mark((function e(t,n){var a;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.dispatch,e.next=3,yr({method:function(){return Re().get("Counterparties")},errorData:"get"},a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Er=Object(_.b)("counterparty/update",function(){var e=Object(Ie.a)(Ne.a.mark((function e(t,n){var a;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.dispatch,e.next=3,yr({method:function(){return Re().put("Counterparties",t)},errorData:"update"},a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),jr=Object(_.b)("counterparty/delete",function(){var e=Object(Ie.a)(Ne.a.mark((function e(t,n){var a;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.dispatch,e.next=3,yr({method:function(){return Re().delete("Counterparties/".concat(t))},errorData:"delete"},a);case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),yr=function(){var e=Object(Ie.a)(Ne.a.mark((function e(t,n){var a,r,c;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.method,r=t.errorData,n(Dr(!0)),e.next=4,Ae(a(),r);case 4:if(c=e.sent,n(Dr(!1)),"ERROR"!==c.type){e.next=9;break}throw n(Cr(c.data)),new Error(c.data);case 9:return e.abrupt("return",c.data);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),xr=Object(_.c)({name:"counterparty",initialState:{actionPending:!1,error:null,counterpartyData:[]},reducers:{setActionPending:function(e,t){e.actionPending=t.payload},setError:function(e,t){e.error=t.payload}},extraReducers:(Cn={},Object(ke.a)(Cn,gr.fulfilled,(function(e,t){e.counterpartyData.push(t.payload)})),Object(ke.a)(Cn,Or.fulfilled,(function(e,t){e.counterpartyData=t.payload})),Object(ke.a)(Cn,Er.fulfilled,(function(e,t){var n=e.counterpartyData.findIndex((function(e){return e.id===t.payload.id}));e.counterpartyData[n]=t.payload})),Object(ke.a)(Cn,jr.fulfilled,(function(e,t){e.counterpartyData=e.counterpartyData.filter((function(e){return e.id!==t.payload}))})),Cn)}),wr=xr.actions,Dr=wr.setActionPending,Cr=wr.setError,kr=xr.reducer,Pr=n(801),Nr=Object(k.a)((function(e){return{nipEditContainer:{width:"100%",display:"inline-flex",alignItems:"center"},nipEditButton:{marginLeft:e.spacing(1)}}})),Ir=function(){var e=Object(O.a)().t,t=tt(),n=t.required,a=t.validate,c=ja(),o=Nr(),i=function(e){var t=e.rowData,n=e.onRowDataChange,a=e.value;return function(){c({action:hr(a),onSuccess:function(e){var r=e.street,c=e.propertyNumber,o=e.apartmentNumber,i=Object(ve.a)(e,["street","propertyNumber","apartmentNumber"]);n(Object(C.a)(Object(C.a)({},t),{},{address:"".concat(r," ").concat(c).concat(o&&"/".concat(o)),nip:a},i))}})}};return{columns:[{title:e("counterparties.name"),field:"name",width:190,validate:function(e){return n(e.name)}},{title:e("counterparties.nip"),field:"nip",width:190,validate:function(e){return a("validNip",e.nip,!0)},editComponent:function(e){return r.a.createElement("div",{className:o.nipEditContainer},r.a.createElement(Wa.MTableEditField,e),r.a.createElement(j.a,{onClick:i(e),color:"primary",disabled:Boolean(e.error),className:o.nipEditButton},r.a.createElement(Pr.a,null)))}},{title:e("counterparties.address"),field:"address",width:190,validate:function(e){return n(e.address)}},{title:e("counterparties.postalCode"),field:"postalCode",width:190,validate:function(e){return a("postalCode",e.postalCode,!0)}},{title:e("counterparties.city"),field:"city",width:190,validate:function(e){return n(e.city)}},{title:e("counterparties.phoneNumber"),field:"phoneNumber",width:190,validate:function(e){return a("phoneNumber",e.phoneNumber,!1)}}],editableConfig:{createAction:gr,updateAction:Er,deleteAction:jr}}},Sr=function(){var e=Object(O.a)().t,t=Object(u.c)(),n=Object(u.d)((function(e){return e.counterparty.counterpartyData})),c=Object(u.d)((function(e){return e.counterparty.actionPending})),o=Object(u.d)((function(e){return e.counterparty.error})),i=Ir(),l=i.columns,s=i.editableConfig;return Object(a.useEffect)((function(){t(Or())}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement($t,{error:o,clearAction:Cr}),r.a.createElement($a,{title:e("counterparties.title"),isLoading:c,data:n,columns:l,editableConfig:s}))},Tr=Object(_.b)("employee/create",function(){var e=Object(Ie.a)(Ne.a.mark((function e(t,n){var a;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.dispatch,e.next=3,Br({method:function(){return Re().post("Employees",t)},errorData:"create"},a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Rr=Object(_.b)("employee/get",function(){var e=Object(Ie.a)(Ne.a.mark((function e(t,n){var a;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.dispatch,e.next=3,Br({method:function(){return Re().get("Employees")},errorData:"get"},a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Ar=Object(_.b)("employee/update",function(){var e=Object(Ie.a)(Ne.a.mark((function e(t,n){var a;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.dispatch,e.next=3,Br({method:function(){return Re().put("Employees",t)},errorData:"update"},a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Fr=Object(_.b)("employee/delete",function(){var e=Object(Ie.a)(Ne.a.mark((function e(t,n){var a;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.dispatch,e.next=3,Br({method:function(){return Re().delete("Employees/".concat(t))},errorData:"delete"},a);case 3:return e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),Br=function(){var e=Object(Ie.a)(Ne.a.mark((function e(t,n){var a,r,c;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.method,r=t.errorData,n(zr(!0)),e.next=4,Ae(a(),r);case 4:if(c=e.sent,n(zr(!1)),"ERROR"!==c.type){e.next=9;break}throw n(Vr(c.data)),new Error(c.data);case 9:return e.abrupt("return",c.data);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Mr=Object(_.c)({name:"employee",initialState:{actionPending:!1,error:null,employeeData:[]},reducers:{setActionPending:function(e,t){e.actionPending=t.payload},setError:function(e,t){e.error=t.payload}},extraReducers:(kn={},Object(ke.a)(kn,Tr.fulfilled,(function(e,t){e.employeeData.push(t.payload)})),Object(ke.a)(kn,Rr.fulfilled,(function(e,t){e.employeeData=t.payload})),Object(ke.a)(kn,Ar.fulfilled,(function(e,t){var n=e.employeeData.findIndex((function(e){return e.id===t.payload.id}));e.employeeData[n]=t.payload})),Object(ke.a)(kn,Fr.fulfilled,(function(e,t){e.employeeData=e.employeeData.filter((function(e){return e.id!==t.payload}))})),kn)}),Lr=Mr.actions,zr=Lr.setActionPending,Vr=Lr.setError,qr=Mr.reducer,Wr=function(){var e=Object(O.a)().t,t=tt(),n=t.required,a=t.validate;return{columns:[{title:e("employees.fullName"),field:"fullName",width:190,validate:function(e){return n(e.fullName)}},{title:e("employees.phoneNumber"),field:"phoneNumber",width:190,validate:function(e){return a("phoneNumber",e.phoneNumber,!0)}},{title:e("employees.dateAdded"),field:"dateAdded",width:190,type:"datetime",editable:"never"}],editableConfig:{createAction:Tr,updateAction:Ar,deleteAction:Fr}}},Ur=function(){var e=Object(O.a)().t,t=Object(u.c)(),n=Object(u.d)((function(e){return e.employee.employeeData})),c=Object(u.d)((function(e){return e.employee.actionPending})),o=Object(u.d)((function(e){return e.employee.error})),i=Wr(),l=i.columns,s=i.editableConfig;return Object(a.useEffect)((function(){t(Rr())}),[]),r.a.createElement(r.a.Fragment,null,r.a.createElement($t,{error:o,clearAction:Vr}),r.a.createElement($a,{title:e("employees.title"),isLoading:c,data:n,columns:l,editableConfig:s}))},Hr=function(){return r.a.createElement("div",null)},Jr=function(){return r.a.createElement(ne.d,null,r.a.createElement(ne.b,{exact:!0,path:["/","/login","/register","/resetPassword","/changePassword","/confirmEmail"],component:Gt}),r.a.createElement(kt,{path:"/invoices",component:rr}),r.a.createElement(kt,{exact:!0,path:"/products",component:vr}),r.a.createElement(kt,{exact:!0,path:"/counterparties",component:Sr}),r.a.createElement(kt,{exact:!0,path:"/employees",component:Ur}),r.a.createElement(kt,{exact:!0,path:"/dataVisualization",component:Hr}),r.a.createElement(ne.b,{component:ar}))},_r=n(470),Gr=n(471),Yr=function(){var e=Object(u.d)((function(e){return e.user.isLoggedIn})),t=Object(u.d)((function(e){return e.app.theme})),n=Object(f.a)("light"===t?_r:Gr);return r.a.createElement(b.a,{theme:n},r.a.createElement(v.a,null),r.a.createElement(a.Suspense,{fallback:r.a.createElement(Ct,null)},r.a.createElement(wt,null),r.a.createElement(g.a,e&&{className:"logged-in-container"},r.a.createElement(h.a,null),r.a.createElement(Jr,null))))},Kr=n(67),$r=Object(Kr.c)({app:X,user:Ke,invoice:sa,counterparty:kr,employee:qr,product:fr}),Zr=Object(_.a)({reducer:function(e,t){return"user/logout"===t.type&&(e=void 0),$r(e,t)}});n(741);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(i.a,null,r.a.createElement(u.a,{store:Zr},r.a.createElement(Yr,null)))),document.getElementById("root"))}},[[483,1,2]]]);
//# sourceMappingURL=main.dad36aee.chunk.js.map